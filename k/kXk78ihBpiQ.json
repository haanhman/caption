{"0.00":{"start":"0","dur":"2.676","text":"[MUSIC PLAYING]"},"3.09":{"start":"3.089","dur":"1.291","text":"JASON POLITES: My name&#39;s Jason."},"4.38":{"start":"4.38","dur":"2.97","text":"I&#39;m a product manager on\nGoogle Cloud Platform."},"7.35":{"start":"7.35","dur":"1.89","text":"And as you can see,\ntoday we&#39;re going"},"9.24":{"start":"9.24","dur":"3.26","text":"to be talking about building\nserverless applications"},"12.50":{"start":"12.5","dur":"3.26","text":"with Google Cloud functions."},"15.76":{"start":"15.76","dur":"3.18","text":"Before we do that, we\nmight need to just describe"},"18.94":{"start":"18.94","dur":"2.79","text":"what this word, this weird\nword &quot;serverless&quot; that we"},"21.73":{"start":"21.73","dur":"3.33","text":"see popping up all over\nthe place actually means."},"25.06":{"start":"25.06","dur":"4.29","text":"And you might think that\nit means no servers, right?"},"29.35":{"start":"29.35","dur":"3.025","text":"Well, kind of."},"32.38":{"start":"32.375","dur":"3.725","text":"It could mean any, one,\nor all of these things,"},"36.10":{"start":"36.1","dur":"1.77","text":"so no need to manage\nservers, no need"},"37.87":{"start":"37.87","dur":"2.175","text":"to even think about servers."},"40.05":{"start":"40.045","dur":"2.595","text":"There&#39;s a provisioning argument."},"42.64":{"start":"42.64","dur":"1.572","text":"Maybe it&#39;s about\nwhat you pay for."},"44.21":{"start":"44.212","dur":"1.458","text":"Maybe it&#39;s not\nabout billing, maybe"},"45.67":{"start":"45.67","dur":"4.12","text":"it&#39;s about developer experience\nor the unit of deployment,"},"49.79":{"start":"49.79","dur":"2.26","text":"et cetera."},"52.05":{"start":"52.05","dur":"2.42","text":"For the purpose\nof today, I&#39;m just"},"54.47":{"start":"54.47","dur":"2.462","text":"going to narrow that scope."},"56.93":{"start":"56.932","dur":"1.958","text":"So we&#39;re going to talk\nabout these four things."},"58.89":{"start":"58.89","dur":"2.72","text":"Serverless by\ndefinition of something"},"61.61":{"start":"61.61","dur":"3.269","text":"that you don&#39;t even need\nto think about servers,"},"64.88":{"start":"64.879","dur":"3.601","text":"you pay only for what you\nuse, it&#39;s event-oriented,"},"68.48":{"start":"68.48","dur":"4.27","text":"and you deploy\nfunctions and not apps."},"72.75":{"start":"72.75","dur":"2.75","text":"OK, what does that really mean?"},"75.50":{"start":"75.5","dur":"1.47","text":"In order to answer\nthat question,"},"76.97":{"start":"76.97","dur":"1.39","text":"I&#39;m going to tell\na little story."},"81.50":{"start":"81.5","dur":"3.84","text":"This is Tony, and\nTony has an app."},"85.34":{"start":"85.34","dur":"3.27","text":"And he&#39;s going to run his\napp on a virtual machine."},"88.61":{"start":"88.61","dur":"2.58","text":"And so he launches the app,\nand the app gets some traffic,"},"91.19":{"start":"91.19","dur":"2.67","text":"and his virtual machine\nis humming along nicely."},"93.86":{"start":"93.86","dur":"3.59","text":"And then his app\ngets more popular"},"97.45":{"start":"97.45","dur":"1.53","text":"and he gets more traffic."},"98.98":{"start":"98.98","dur":"3.5","text":"And now, he can&#39;t fit on\na single virtual machine,"},"102.48":{"start":"102.48","dur":"4.03","text":"but that&#39;s cool, he just gets\na second virtual machine."},"106.51":{"start":"106.51","dur":"3.67","text":"And the extra traffic that\ncouldn&#39;t get on the first one"},"110.18":{"start":"110.18","dur":"2.19","text":"flows over to the second one."},"112.37":{"start":"112.37","dur":"3.39","text":"Now, if he&#39;s got some sort of\nload balancing ahead of this,"},"115.76":{"start":"115.76","dur":"4.511","text":"it probably looks more something\nlike this, and that&#39;s fine."},"120.27":{"start":"120.271","dur":"0.499","text":"Sweet."},"123.42":{"start":"123.42","dur":"5.39","text":"But there&#39;s a problem with\nthis, and it&#39;s these gray boxes."},"128.81":{"start":"128.81","dur":"1.8","text":"This means he&#39;s\nover-provisioned,"},"130.61":{"start":"130.61","dur":"4.71","text":"so he&#39;s bought and paid for\ncapacity that he&#39;s not using,"},"135.32":{"start":"135.32","dur":"2.54","text":"and that&#39;s costing him money."},"137.86":{"start":"137.86","dur":"1.742","text":"Let&#39;s see if we can do better."},"139.60":{"start":"139.602","dur":"2.518","text":"We&#39;re going to start\nwith a virtual machine,"},"142.12":{"start":"142.12","dur":"2.37","text":"but this time, we&#39;re not\ngoing to deploy an application"},"144.49":{"start":"144.49","dur":"1.541","text":"into that virtual\nmachine, we&#39;re just"},"146.03":{"start":"146.031","dur":"2.299","text":"going to deploy a container."},"148.33":{"start":"148.33","dur":"3.77","text":"And then when that container\nexhausts its resources,"},"152.10":{"start":"152.1","dur":"5.21","text":"I deploy another container,\nand so on and so on and so on."},"157.31":{"start":"157.31","dur":"2.95","text":"And then if I&#39;m load\nbalancing, maybe it"},"160.26":{"start":"160.26","dur":"2.22","text":"looks something like that."},"162.48":{"start":"162.48","dur":"1.9","text":"So that looks good."},"164.38":{"start":"164.38","dur":"1.95","text":"But then what if\nI need one more?"},"169.03":{"start":"169.03","dur":"3.54","text":"Well, I need a whole\nnew virtual machine."},"172.57":{"start":"172.57","dur":"3.34","text":"So we&#39;re kind of\nback to square one."},"175.91":{"start":"175.91","dur":"2.27","text":"We still have an\nover-provisioning problem."},"178.18":{"start":"178.18","dur":"2.34","text":"I&#39;m still provisioning\ncapacity that I&#39;m not using,"},"180.52":{"start":"180.52","dur":"2.16","text":"and that&#39;s costing me money."},"182.68":{"start":"182.68","dur":"2.58","text":"OK, let&#39;s try again."},"185.26":{"start":"185.26","dur":"1.84","text":"What if we just\nremove the server?"},"190.01":{"start":"190.01","dur":"2.365","text":"Now when he wants to\nadd a new container,"},"192.38":{"start":"192.375","dur":"2.699","text":"he just adds a new container."},"195.07":{"start":"195.074","dur":"2.816","text":"Sweet."},"197.89":{"start":"197.89","dur":"2.07","text":"We still do have some\nwaste here, though."},"199.96":{"start":"199.96","dur":"3.63","text":"You can see there&#39;s still a\nbunch of gray boxes there."},"203.59":{"start":"203.59","dur":"1.94","text":"So that&#39;s still somewhat\nover-provisioned"},"205.53":{"start":"205.53","dur":"1.63","text":"and still costing money."},"210.41":{"start":"210.41","dur":"2.87","text":"What if we were to shrink\nthis unit of compute?"},"213.28":{"start":"213.28","dur":"4.67","text":"Rather than deploying a\nVM image or a container,"},"217.95":{"start":"217.95","dur":"3.03","text":"what if we made it\nas small as possible?"},"220.98":{"start":"220.98","dur":"1.69","text":"So each little unit\nis going to have"},"222.67":{"start":"222.67","dur":"1.41","text":"its own amount of capacity."},"224.08":{"start":"224.08","dur":"3.09","text":"And so the amount that we&#39;re\nover-provisioning is even less."},"227.17":{"start":"227.17","dur":"1.666","text":"You&#39;re still going\nto have a little bit."},"230.82":{"start":"230.815","dur":"2.875","text":"You&#39;re not going to be able\nto get rid of it entirely,"},"233.69":{"start":"233.69","dur":"2.569","text":"but this is a much\nbetter place to be."},"236.26":{"start":"236.259","dur":"1.541","text":"And so you end up\nin this world where"},"237.80":{"start":"237.8","dur":"3.65","text":"you have independent units of\ncompute, independent functions,"},"241.45":{"start":"241.45","dur":"2.26","text":"that scale independently."},"243.71":{"start":"243.71","dur":"1.98","text":"And the amount of\nover-provisioning"},"245.69":{"start":"245.69","dur":"1.95","text":"is as low as it can be."},"250.81":{"start":"250.81","dur":"1.44","text":"If I scale\nindependently, they&#39;re"},"252.25":{"start":"252.25","dur":"2.88","text":"isolated from one another,\nthey&#39;re stateless,"},"255.13":{"start":"255.13","dur":"3.37","text":"and they more closely\nmatch the traffic pattern."},"258.50":{"start":"258.5","dur":"3.38","text":"So some functions will execute\nfrequently, some functions not"},"261.88":{"start":"261.88","dur":"2.856","text":"so much."},"264.74":{"start":"264.736","dur":"0.5","text":"Sweet."},"269.57":{"start":"269.57","dur":"3.99","text":"So that&#39;s, broadly\nspeaking, a view"},"273.56":{"start":"273.56","dur":"3.27","text":"of computing that&#39;s\nserverless, and what that means"},"276.83":{"start":"276.83","dur":"1.81","text":"and why it&#39;s important."},"278.64":{"start":"278.64","dur":"4.94","text":"But how do you use this, and\nwhy does this matter to you?"},"283.58":{"start":"283.58","dur":"2.22","text":"So just hold that thought."},"285.80":{"start":"285.8","dur":"4.652","text":"I&#39;m going to switch gears and\ntalk about some use cases."},"290.45":{"start":"290.452","dur":"1.708","text":"Imagine you&#39;re building\na booking system."},"292.16":{"start":"292.16","dur":"2.97","text":"And I apologize that this\nis a somewhat dry and boring"},"295.13":{"start":"295.13","dur":"3.78","text":"example, but it&#39;ll\nserve the purpose."},"298.91":{"start":"298.91","dur":"1.77","text":"You have some\napplication, some bit"},"300.68":{"start":"300.68","dur":"1.77","text":"of compute, that&#39;s\naccepting data."},"302.45":{"start":"302.45","dur":"2.8","text":"Maybe it&#39;s accepting orders."},"305.25":{"start":"305.25","dur":"3.07","text":"And you want to write those\norders to some back end storage"},"308.32":{"start":"308.32","dur":"0.5","text":"system."},"308.82":{"start":"308.82","dur":"4.295","text":"In this case, I&#39;m choosing\nCloud Storage as the example."},"313.12":{"start":"313.115","dur":"2.125","text":"And so that&#39;s really the\nguts of your application--"},"315.24":{"start":"315.24","dur":"3.09","text":"just take orders and\nwrite them to storage."},"318.33":{"start":"318.33","dur":"1.494","text":"Now you have a new requirement."},"319.82":{"start":"319.824","dur":"1.416","text":"Maybe you want to\ndo some indexing"},"321.24":{"start":"321.24","dur":"3.96","text":"or some processing of this\norder before it goes to storage."},"325.20":{"start":"325.2","dur":"3.69","text":"And so you implement, in code,\nsome indexing or some library"},"328.89":{"start":"328.89","dur":"1.56","text":"that does this work for you."},"330.45":{"start":"330.45","dur":"3.232","text":"But maybe that library or\nthat code that you&#39;ve written"},"333.68":{"start":"333.682","dur":"1.958","text":"depends on a database,\nso it needs to write out"},"335.64":{"start":"335.64","dur":"1.71","text":"to a database or an index."},"337.35":{"start":"337.35","dur":"3.6","text":"And maybe it needs some special\nfile or rules to do that."},"340.95":{"start":"340.95","dur":"2.999","text":"And probably, it needs some\nsort of special authentication."},"343.95":{"start":"343.949","dur":"0.541","text":"So that&#39;s OK."},"344.49":{"start":"344.49","dur":"3.82","text":"You put all of that into your\napplication, and it looks good."},"348.31":{"start":"348.31","dur":"4.79","text":"Meanwhile, elsewhere, you have\nanother application, completely"},"353.10":{"start":"353.1","dur":"3.45","text":"separate, that&#39;s\ntaking some other data,"},"356.55":{"start":"356.55","dur":"1.56","text":"but it needs to do\nsomething similar."},"358.11":{"start":"358.11","dur":"1.98","text":"This time, maybe\nit&#39;s taking invoices"},"360.09":{"start":"360.09","dur":"1.86","text":"and it&#39;s writing\nthem to storage."},"361.95":{"start":"361.95","dur":"3.115","text":"And then maybe you also need\nto index that data as well,"},"365.07":{"start":"365.065","dur":"1.625","text":"and you want to reuse\nsome of this code"},"366.69":{"start":"366.69","dur":"4.19","text":"that you&#39;ve written\nover on the order side."},"370.88":{"start":"370.88","dur":"2.79","text":"So now, again, you need\nthe same database network"},"373.67":{"start":"373.67","dur":"3.624","text":"and authentication configuration\nthat you had previously."},"377.29":{"start":"377.294","dur":"0.666","text":"And that&#39;s fine."},"377.96":{"start":"377.96","dur":"3.96","text":"That will work, and\nthat happens routinely."},"381.92":{"start":"381.92","dur":"1.92","text":"But this might be a problem."},"383.84":{"start":"383.84","dur":"1.79","text":"You&#39;ve duplicated\nthis configuration"},"385.63":{"start":"385.63","dur":"1.75","text":"and these settings and\nthis authentication"},"387.38":{"start":"387.38","dur":"2.94","text":"in two different places, not to\nmention duplicating the code."},"390.32":{"start":"390.32","dur":"2.88","text":"So what does that mean\nfor things like security,"},"393.20":{"start":"393.2","dur":"3.39","text":"things like deployment?"},"396.59":{"start":"396.59","dur":"2.25","text":"If you change this\nlibrary, do you"},"398.84":{"start":"398.84","dur":"2.22","text":"have to deploy both\nversions of your application"},"401.06":{"start":"401.06","dur":"1.756","text":"simultaneously?"},"402.82":{"start":"402.816","dur":"1.374","text":"Let&#39;s see if we\ncan improve this."},"407.00":{"start":"407","dur":"1.28","text":"So same application."},"408.28":{"start":"408.28","dur":"3.71","text":"Two different sides of\nit-- invoices and orders."},"411.99":{"start":"411.99","dur":"3.69","text":"This time, we&#39;re going to\nimplement a separate API."},"415.68":{"start":"415.68","dur":"3.06","text":"And the applications are\ngoing to call that API"},"418.74":{"start":"418.74","dur":"2.31","text":"rather than writing\ndirectly to storage."},"421.05":{"start":"421.05","dur":"3.109","text":"And that API is going to\nwrite the file to storage,"},"424.16":{"start":"424.159","dur":"1.541","text":"and it&#39;s going to\ndo all the indexing"},"425.70":{"start":"425.7","dur":"3.21","text":"and have those dependencies."},"428.91":{"start":"428.91","dur":"1.68","text":"This is classically\nwhat we might"},"430.59":{"start":"430.59","dur":"3.15","text":"term, in a very simplistic way,\na microservices approach, where"},"433.74":{"start":"433.74","dur":"3.855","text":"you separate logic into\nservices rather than baking it"},"437.60":{"start":"437.595","dur":"1.925","text":"into the application."},"439.52":{"start":"439.52","dur":"1.5","text":"And this is totally fine--"},"441.02":{"start":"441.02","dur":"4.62","text":"great architecture, works\nwell, Tony loves it."},"445.64":{"start":"445.64","dur":"1.95","text":"There is one small\nchallenge with this,"},"447.59":{"start":"447.59","dur":"3.51","text":"and that is that\npreviously, you recall,"},"451.10":{"start":"451.1","dur":"3.839","text":"we were writing from the\ncompute to storage directly."},"454.94":{"start":"454.939","dur":"2.041","text":"And the storage, let&#39;s\nsay, was a managed service"},"456.98":{"start":"456.98","dur":"1.17","text":"like Cloud Storage."},"458.15":{"start":"458.15","dur":"4.2","text":"So it had SLAs and it had all\nsorts of uptime guarantees."},"462.35":{"start":"462.35","dur":"1.59","text":"And now we&#39;ve\ncreated our own API"},"463.94":{"start":"463.94","dur":"2.82","text":"that we have to scale ourselves\nand have to manage ourselves."},"466.76":{"start":"466.76","dur":"2.67","text":"And so we&#39;ve introduced\na point of failure here."},"469.43":{"start":"469.43","dur":"3.4","text":"It&#39;s not terrible, and there&#39;s\nmany ways to mitigate that,"},"472.83":{"start":"472.83","dur":"2.51","text":"but you now do have to\nthink about how do I"},"475.34":{"start":"475.34","dur":"1.5","text":"deal with that failure?"},"476.84":{"start":"476.84","dur":"2.55","text":"How does the application deal\nwith the failure to index"},"479.39":{"start":"479.39","dur":"0.67","text":"the data?"},"480.06":{"start":"480.06","dur":"1.22","text":"What does it do?"},"481.28":{"start":"481.28","dur":"4.26","text":"So we might be able\nto do one step better."},"485.54":{"start":"485.54","dur":"1.32","text":"Same application."},"486.86":{"start":"486.86","dur":"2.71","text":"This time, I&#39;m going to go\nback to what I had before."},"489.57":{"start":"489.57","dur":"1.97","text":"I&#39;m writing directly to storage."},"491.54":{"start":"491.54","dur":"2.31","text":"What if the storage\nsystem itself was aware"},"493.85":{"start":"493.85","dur":"3.037","text":"of that write, and it\ncould emit an event?"},"496.89":{"start":"496.887","dur":"2.333","text":"So when the write occurred,\nwhen the mutation in storage"},"499.22":{"start":"499.22","dur":"1.74","text":"occurred, it would\nemit an event,"},"500.96":{"start":"500.96","dur":"2.43","text":"and then I could attach\ncode to that event,"},"503.39":{"start":"503.39","dur":"2.87","text":"and that code would\nhave the dependencies."},"506.26":{"start":"506.26","dur":"3.109","text":"So in this model, I&#39;ve solved,\nsort of, two problems in one."},"509.37":{"start":"509.369","dur":"2.041","text":"I&#39;ve solved the original\nproblem with duplication"},"511.41":{"start":"511.41","dur":"1.649","text":"of configuration in code."},"513.06":{"start":"513.059","dur":"3.421","text":"And I&#39;ve also solved the\nproblem of not depending"},"516.48":{"start":"516.48","dur":"5.04","text":"on a managed service and the\nreliability challenges that"},"521.52":{"start":"521.52","dur":"1.49","text":"might present."},"523.01":{"start":"523.01","dur":"2.37","text":"So looks good, right?"},"525.38":{"start":"525.38","dur":"4.25","text":"Well, there is one\nmore issue here."},"529.63":{"start":"529.63","dur":"2.46","text":"Those two applications\nwere pretty heavyweight,"},"532.09":{"start":"532.09","dur":"3.24","text":"and they required virtual\nmachines under a lot of load."},"535.33":{"start":"535.33","dur":"1.977","text":"But this one little piece\nthat I&#39;ve pulled out"},"537.31":{"start":"537.307","dur":"1.833","text":"doesn&#39;t get called all\nthe time, or maybe it"},"539.14":{"start":"539.14","dur":"2.52","text":"doesn&#39;t need many resources."},"541.66":{"start":"541.66","dur":"3.58","text":"So now I&#39;m back to this\nover-provisioning situation."},"545.24":{"start":"545.24","dur":"3.54","text":"If only I had a smaller\nunit of compute that I"},"548.78":{"start":"548.78","dur":"3.48","text":"could use in place of that."},"552.26":{"start":"552.26","dur":"2.572","text":"And the good news is that we do."},"554.83":{"start":"554.832","dur":"0.5","text":"Sweet."},"558.20":{"start":"558.2","dur":"4.14","text":"So Google Cloud Functions is\nthat lightweight, small unit"},"562.34":{"start":"562.34","dur":"1.5","text":"of compute."},"563.84":{"start":"563.84","dur":"2.81","text":"It&#39;s a serverless environment\nto build and connect"},"566.65":{"start":"566.65","dur":"1.5","text":"cloud services with code."},"571.71":{"start":"571.71","dur":"2.86","text":"The characteristics of\nCloud Functions are this."},"574.57":{"start":"574.57","dur":"1.96","text":"You don&#39;t need to even\nthink about service."},"576.53":{"start":"576.53","dur":"1.62","text":"You pay only for what you use."},"578.15":{"start":"578.15","dur":"3.98","text":"It is event-oriented, and you\ndeploy in units of functions,"},"582.13":{"start":"582.13","dur":"1.12","text":"not apps."},"583.25":{"start":"583.25","dur":"1.5","text":"And you&#39;ll recall\nthat this is where"},"584.75":{"start":"584.75","dur":"4.254","text":"we started in our definition."},"589.00":{"start":"589.004","dur":"2.836","text":"OK, pretty simple\ndiagram, but just"},"591.84":{"start":"591.84","dur":"1.77","text":"to give a sense\nof what that looks"},"593.61":{"start":"593.61","dur":"3.57","text":"like, your cloud environment\nwill emit events,"},"597.18":{"start":"597.18","dur":"0.659","text":"as I mentioned."},"597.84":{"start":"597.839","dur":"2.041","text":"Mutation on the storage\nbucket might be an event,"},"599.88":{"start":"599.88","dur":"2.85","text":"mutation on a database\nmight be an event."},"602.73":{"start":"602.73","dur":"2.07","text":"Also, external services\nwill emit events."},"604.80":{"start":"604.8","dur":"2.912","text":"Typically, this is materialized\nas a webhook callback"},"607.71":{"start":"607.712","dur":"0.958","text":"or something like that."},"608.67":{"start":"608.67","dur":"1.179","text":"So a commit to GitHub."},"609.85":{"start":"609.849","dur":"1.791","text":"And you can configure\nthat to call you back"},"611.64":{"start":"611.64","dur":"2.42","text":"with a webhook over HTTP."},"614.06":{"start":"614.06","dur":"4.294","text":"Your function will come to\nlife, respond to that event,"},"618.35":{"start":"618.354","dur":"1.416","text":"and then from\nwithin the function,"},"619.77":{"start":"619.77","dur":"2.22","text":"you can do anything that you\ncan do in a normal computing"},"621.99":{"start":"621.99","dur":"0.5","text":"environment."},"622.49":{"start":"622.49","dur":"1.642","text":"You can call an API."},"624.13":{"start":"624.132","dur":"1.458","text":"You can write back\nto the database."},"625.59":{"start":"625.59","dur":"1.23","text":"You can call an external API."},"631.10":{"start":"631.1","dur":"4.62","text":"In Cloud Functions within\nGoogle, we have two flavors."},"635.72":{"start":"635.72","dur":"3.99","text":"An HTTP function is a function\nyou deploy with an HTTP"},"639.71":{"start":"639.71","dur":"4.48","text":"trigger, and will give you back,\nimmediately, a URL with a TLS"},"644.19":{"start":"644.19","dur":"3.29","text":"certificate so it&#39;s secure, and\nyou can curl that straightaway."},"647.48":{"start":"647.48","dur":"1.95","text":"That would be for\nsynchronous use cases."},"649.43":{"start":"649.43","dur":"4.755","text":"The webhook callback will\nwork out-of-the-box for this."},"654.19":{"start":"654.185","dur":"1.875","text":"The second flavor is\nthe background function."},"656.06":{"start":"656.06","dur":"1.8","text":"This is where it\nhappens asynchronously."},"657.86":{"start":"657.86","dur":"3.96","text":"There&#39;s an EventBus in between,\ntypically, Cloud Pub\/Sub."},"661.82":{"start":"661.82","dur":"2.37","text":"This is where you don&#39;t\nneed to know the outcome"},"664.19":{"start":"664.19","dur":"1.68","text":"of the function in real time."},"665.87":{"start":"665.87","dur":"3.33","text":"You&#39;re happy for it to be\nprocessed in the background."},"669.20":{"start":"669.2","dur":"3.36","text":"And typically, this will be\nas a result of an event being"},"672.56":{"start":"672.56","dur":"2.559","text":"emitted from a cloud service."},"675.12":{"start":"675.119","dur":"1.541","text":"So let&#39;s have a look\nat each of these"},"676.66":{"start":"676.66","dur":"2.98","text":"in a little bit more detail."},"679.64":{"start":"679.64","dur":"3.31","text":"HTTP-- this is the\nsimplest hello world"},"682.95":{"start":"682.95","dur":"2.4","text":"HTTP function you can imagine."},"685.35":{"start":"685.35","dur":"3.81","text":"We give you an HTTP request\nand response object."},"689.16":{"start":"689.16","dur":"1.17","text":"This is in Node."},"690.33":{"start":"690.33","dur":"2.58","text":"Anyone familiar with Node--"},"692.91":{"start":"692.91","dur":"3.735","text":"the request and response is\nliterally an Express.js request"},"696.65":{"start":"696.645","dur":"2.075","text":"and response."},"698.72":{"start":"698.72","dur":"2.17","text":"And so if you&#39;ve\never used Express.js,"},"700.89":{"start":"700.89","dur":"2.59","text":"then you know how to do this."},"703.48":{"start":"703.48","dur":"1.82","text":"Couple of things to point out--"},"705.30":{"start":"705.3","dur":"2.64","text":"I just mentioned it&#39;s just\na regular request response,"},"707.94":{"start":"707.94","dur":"3.69","text":"and then you have the full\naccess to the response object."},"711.63":{"start":"711.63","dur":"2.772","text":"You don&#39;t need to do any\nsort of crazy translations"},"714.40":{"start":"714.402","dur":"1.208","text":"on the way in or the way out."},"715.61":{"start":"715.61","dur":"1.896","text":"It&#39;s just regular, old HTTP."},"721.56":{"start":"721.555","dur":"2.625","text":"This is what a deploy might look\nlike for that from the command"},"724.18":{"start":"724.18","dur":"0.499","text":"line."},"724.68":{"start":"724.679","dur":"1.541","text":"We also have a\nweb UI, which I&#39;ll"},"726.22":{"start":"726.22","dur":"2.25","text":"show you in a little while."},"728.47":{"start":"728.47","dur":"1.895","text":"You just deploy the function."},"730.37":{"start":"730.365","dur":"1.375","text":"You give it a\nstage bucket, which"},"731.74":{"start":"731.74","dur":"2.87","text":"is where we store your\ndeployment while we&#39;re"},"734.61":{"start":"734.61","dur":"1.97","text":"building the function."},"736.58":{"start":"736.58","dur":"1.98","text":"And then you just say\nit&#39;s a trigger HTTP,"},"738.56":{"start":"738.56","dur":"1.25","text":"and we&#39;ll give you back a URL."},"744.14":{"start":"744.14","dur":"3","text":"Background functions."},"747.14":{"start":"747.14","dur":"0.82","text":"Pretty similar."},"747.96":{"start":"747.96","dur":"1.5","text":"The only difference\nhere is instead"},"749.46":{"start":"749.46","dur":"2.39","text":"of a request and\nresponse, we give you"},"751.85":{"start":"751.85","dur":"3.69","text":"an event, which is the event\nthat was emitted from the cloud"},"755.54":{"start":"755.54","dur":"0.99","text":"service--"},"756.53":{"start":"756.53","dur":"2.73","text":"database mutation, storage\nmutation, et cetera--"},"759.26":{"start":"759.26","dur":"1.61","text":"and we give you a callback."},"760.87":{"start":"760.87","dur":"3.596","text":"The callback is because in\nruntime environments like Node,"},"764.47":{"start":"764.466","dur":"1.124","text":"everything is asynchronous."},"765.59":{"start":"765.59","dur":"2.76","text":"You might be doing some\nwork asynchronously,"},"768.35":{"start":"768.35","dur":"3.12","text":"and you need to tell us\nwhen your function is done,"},"771.47":{"start":"771.47","dur":"1.92","text":"and so you call the callback."},"773.39":{"start":"773.39","dur":"3.03","text":"If you don&#39;t like using\ncallbacks, that&#39;s cool."},"776.42":{"start":"776.42","dur":"1.195","text":"You can return a promise."},"777.62":{"start":"777.615","dur":"1.875","text":"In fact, you can just\nreturn a discrete value"},"779.49":{"start":"779.49","dur":"2.09","text":"and we&#39;ll treat it as a promise."},"781.58":{"start":"781.58","dur":"2.64","text":"Again, for the people in the\naudience familiar with Node"},"784.22":{"start":"784.22","dur":"2.457","text":"and JavaScript, this\nis particularly useful"},"786.68":{"start":"786.677","dur":"1.833","text":"if you&#39;re using a third\nparty library that&#39;s"},"788.51":{"start":"788.51","dur":"1.44","text":"going to return a promise."},"789.95":{"start":"789.95","dur":"2.112","text":"You don&#39;t have to do\nany kind of black magic,"},"792.06":{"start":"792.062","dur":"1.458","text":"you just return\nwhat they gave you."},"799.05":{"start":"799.05","dur":"3.66","text":"And a couple of examples of\ndeploying background functions."},"802.71":{"start":"802.71","dur":"3","text":"So one here is triggering\noff a Cloud Storage bucket,"},"805.71":{"start":"805.71","dur":"2.52","text":"the other is triggering\nof a Cloud Pub\/Sub topic."},"815.99":{"start":"815.99","dur":"3.17","text":"Dependencies."},"819.16":{"start":"819.16","dur":"2.16","text":"It would be unusual,\nI think, for you"},"821.32":{"start":"821.32","dur":"2.07","text":"to write a bit of code\nthat has no dependencies"},"823.39":{"start":"823.39","dur":"1.833","text":"on any other modules\nor any other libraries."},"825.22":{"start":"825.223","dur":"3.867","text":"Typically, you will depend on\nnumerous libraries of your own,"},"829.09":{"start":"829.09","dur":"2.61","text":"or typically, third\nparty libraries."},"831.70":{"start":"831.7","dur":"2.7","text":"In a Node.js environment, they\nare expressed in a manifest"},"834.40":{"start":"834.4","dur":"2.366","text":"file called a package.json."},"836.77":{"start":"836.766","dur":"1.624","text":"You declare your\ndependencies in there,"},"838.39":{"start":"838.39","dur":"3.75","text":"and then there&#39;s a tool called\nNPM, Node Package Manager, that"},"842.14":{"start":"842.14","dur":"2.85","text":"will resolve those dependencies,\ndownload all the files,"},"844.99":{"start":"844.99","dur":"1.19","text":"and package up your app."},"849.05":{"start":"849.052","dur":"1.958","text":"That means that you can\ndo something like this."},"851.01":{"start":"851.01","dur":"4.07","text":"You can require this external\ndependency in your code."},"855.08":{"start":"855.08","dur":"2.64","text":"And typically, you\nwould declare it"},"857.72":{"start":"857.72","dur":"2.605","text":"like this in your package.json."},"860.33":{"start":"860.325","dur":"1.625","text":"So when you deploy\nyour Cloud Function,"},"861.95":{"start":"861.95","dur":"2.19","text":"we will actually run\nNPM install for you."},"864.14":{"start":"864.14","dur":"2.73","text":"So you don&#39;t have to\nresolve those dependencies"},"866.87":{"start":"866.87","dur":"3.12","text":"and zip them up into a big\nfat ZIP and send them to us."},"869.99":{"start":"869.99","dur":"2.197","text":"You just send us your source\ncode in your manifest,"},"872.19":{"start":"872.187","dur":"1.083","text":"and we&#39;ll handle the rest."},"879.05":{"start":"879.05","dur":"2.64","text":"And this is what the deploy\ncommand looks like if you&#39;re"},"881.69":{"start":"881.69","dur":"3.73","text":"using a manifest file."},"885.42":{"start":"885.42","dur":"2.54","text":"It&#39;s the same as it was\nbefore, so nothing changes."},"887.96":{"start":"887.96","dur":"2.82","text":"We just suck that up and run\nNPM install in the cloud."},"895.83":{"start":"895.83","dur":"1.1","text":"Logging and monitoring."},"901.94":{"start":"901.94","dur":"2.892","text":"So from your Cloud\nFunction, you just"},"904.83":{"start":"904.832","dur":"2.208","text":"write a console.log command\nas you would do normally,"},"907.04":{"start":"907.04","dur":"1.56","text":"as you would do anywhere else."},"908.60":{"start":"908.6","dur":"2.445","text":"We will capture that and write\nit to Stackdriver Logging."},"911.05":{"start":"911.045","dur":"1.5","text":"From Stackdriver\nLogging, you can do"},"912.55":{"start":"912.545","dur":"1.605","text":"a bunch of interesting things."},"914.15":{"start":"914.15","dur":"2.16","text":"You can pipe those\nlogs to BigQuery,"},"916.31":{"start":"916.31","dur":"3.72","text":"you can set up a filter to pipe\nthose logs to a Cloud Pub\/Sub"},"920.03":{"start":"920.03","dur":"5.12","text":"topic and have another function\nexecute in response to that."},"925.15":{"start":"925.15","dur":"3.15","text":"If you have an uncalled\nexception in your code,"},"928.30":{"start":"928.3","dur":"2.49","text":"that will get sent to\nStackdriver Errors."},"930.79":{"start":"930.79","dur":"1.5","text":"From there, you\ncan set up alerts"},"932.29":{"start":"932.29","dur":"2.85","text":"to tell you that something&#39;s\ngone unusually wrong that we"},"935.14":{"start":"935.14","dur":"3.05","text":"didn&#39;t expect with the function."},"938.19":{"start":"938.19","dur":"4.5","text":"And all of this is available\nthrough CLI, UI, and API."},"946.16":{"start":"946.16","dur":"1.07","text":"Monitoring."},"947.23":{"start":"947.23","dur":"4.039","text":"We report the essential\ntelemetry that you need--"},"951.27":{"start":"951.269","dur":"1.541","text":"how many times your\nfunction is being"},"952.81":{"start":"952.81","dur":"3.19","text":"invoked, how long it ran for,\nand how much memory did it use?"},"962.74":{"start":"962.74","dur":"3.02","text":"OK, what does the environment\nlook like that we run in?"},"965.76":{"start":"965.76","dur":"1.77","text":"This comes up\nparticularly for those"},"967.53":{"start":"967.53","dur":"2.59","text":"who might be running\nany native libraries."},"970.12":{"start":"970.12","dur":"2.21","text":"And by native, I\nmean code that needs"},"972.33":{"start":"972.33","dur":"2.95","text":"to be compiled against the\nunderlying operating system."},"978.21":{"start":"978.21","dur":"3.48","text":"So Cloud Functions run\nin an open environment,"},"981.69":{"start":"981.69","dur":"4.7","text":"meaning that we just have a\nvanilla flavor of Debian Linux."},"986.39":{"start":"986.39","dur":"2.13","text":"We have a vanilla\nflavor of Node.js."},"988.52":{"start":"988.52","dur":"2.13","text":"We pre-install ImageMagick\njust because that&#39;s"},"990.65":{"start":"990.65","dur":"3.51","text":"a very commonly\nused native library."},"994.16":{"start":"994.16","dur":"1.92","text":"We give you a local disk, @\/tmp."},"998.67":{"start":"998.67","dur":"2.25","text":"Within the environment,\nyou&#39;re automatically"},"1000.92":{"start":"1000.92","dur":"2.67","text":"authenticated against\nother Google services,"},"1003.59":{"start":"1003.59","dur":"2.94","text":"so you don&#39;t have to bundle\nin any authentication tokens"},"1006.53":{"start":"1006.53","dur":"2.88","text":"or consider how you\nauthenticate your function"},"1009.41":{"start":"1009.41","dur":"2.34","text":"against other services\nin your project."},"1011.75":{"start":"1011.75","dur":"2.45","text":"It&#39;s automatically done for you."},"1014.20":{"start":"1014.2","dur":"2.7","text":"And the last point is\nabout the compilation."},"1016.90":{"start":"1016.9","dur":"2.274","text":"Some node modules will\nhave a native component."},"1019.17":{"start":"1019.174","dur":"1.416","text":"And when you run\nNPM install, it&#39;s"},"1020.59":{"start":"1020.59","dur":"1.92","text":"going to compile\nthat native code."},"1022.51":{"start":"1022.51","dur":"2.339","text":"If you run NPM install and\nit compiles native code"},"1024.85":{"start":"1024.849","dur":"3.841","text":"on your Mac laptop\nand then you deploy"},"1028.69":{"start":"1028.69","dur":"5.46","text":"to a non-Mac environment,\nyou might have a bad day."},"1034.15":{"start":"1034.15","dur":"2.16","text":"So the advantage of\nhaving NPM install"},"1036.31":{"start":"1036.31","dur":"4.259","text":"run for you is that you just\nhave to name the dependency."},"1040.57":{"start":"1040.569","dur":"2.691","text":"We will run NPM install, we\nwill run the compilation step,"},"1043.26":{"start":"1043.26","dur":"2.5","text":"and by definition, it&#39;s going\nto run on the same environment"},"1045.76":{"start":"1045.76","dur":"1.583","text":"that we&#39;re going to\nexecute on, so you"},"1047.34":{"start":"1047.343","dur":"2.587","text":"don&#39;t run into these\ncrazy incompatibilities."},"1049.93":{"start":"1049.93","dur":"3.24","text":"If the node module you&#39;re\nusing doesn&#39;t prepackage"},"1053.17":{"start":"1053.17","dur":"3.3","text":"a compilation step, and it\ndepends on some library that"},"1056.47":{"start":"1056.47","dur":"5.28","text":"is not part of the node\nmodule, 9 times out of 10,"},"1061.75":{"start":"1061.75","dur":"2.4","text":"you can go and download\nthe precompiled Debian"},"1064.15":{"start":"1064.15","dur":"1.91","text":"version of that library."},"1066.06":{"start":"1066.06","dur":"3.32","text":"And because it&#39;s just a\nstandard Debian environment,"},"1069.38":{"start":"1069.38","dur":"1.584","text":"that should work."},"1070.96":{"start":"1070.964","dur":"1.416","text":"If you really,\nreally, really have"},"1072.38":{"start":"1072.38","dur":"4.71","text":"to compile your own library onto\nthe image, onto the same image,"},"1077.09":{"start":"1077.09","dur":"2.43","text":"then you don&#39;t get\nthis image from us,"},"1079.52":{"start":"1079.52","dur":"1.56","text":"you just go get it\nfrom the internet."},"1086.86":{"start":"1086.86","dur":"1.222","text":"Local development."},"1088.08":{"start":"1088.082","dur":"0.708","text":"So this is great."},"1088.79":{"start":"1088.79","dur":"2.166","text":"I&#39;ve got this environment,\nI&#39;m writing my functions,"},"1090.96":{"start":"1090.956","dur":"2.054","text":"I&#39;m deploying them,\nI&#39;m executing them,"},"1093.01":{"start":"1093.01","dur":"1.577","text":"but it&#39;s a little\nslow in the sense"},"1094.59":{"start":"1094.587","dur":"2.083","text":"that I have to go through\nthe whole deploy process"},"1096.67":{"start":"1096.67","dur":"3.03","text":"every time I want\nto make a change."},"1099.70":{"start":"1099.7","dur":"4.57","text":"It&#39;d be great if we gave you a\nlocal emulation environment so"},"1104.27":{"start":"1104.27","dur":"3.33","text":"that you can build and\ntest and iterate and debug"},"1107.60":{"start":"1107.6","dur":"2.73","text":"your functions locally\nbefore you deploy them."},"1110.33":{"start":"1110.33","dur":"2.11","text":"So this is available today."},"1112.44":{"start":"1112.44","dur":"1.46","text":"Just NPM install the emulator."},"1113.90":{"start":"1113.9","dur":"5.529","text":"It runs a simulated environment\nof the cloud environment"},"1119.43":{"start":"1119.429","dur":"1.041","text":"for your Cloud Functions."},"1120.47":{"start":"1120.47","dur":"2.67","text":"It has exactly the\nsame API surface area."},"1123.14":{"start":"1123.14","dur":"2.22","text":"So if you wanted to\nwrite tooling around"},"1125.36":{"start":"1125.36","dur":"2.85","text":"how to deploy\nfunctions using an API,"},"1128.21":{"start":"1128.21","dur":"1.89","text":"that tooling will work\nwith the emulator."},"1130.10":{"start":"1130.1","dur":"5.43","text":"So you can easily switch\nbetween emulator and live code."},"1135.53":{"start":"1135.53","dur":"1.5","text":"And you can debug with this."},"1137.03":{"start":"1137.03","dur":"2.88","text":"So it has a command to\nenable the debugger."},"1139.91":{"start":"1139.91","dur":"2.82","text":"And then you can attach\nyour favorite IDE to that"},"1142.73":{"start":"1142.73","dur":"1.75","text":"and step through\nyour JavaScript code."},"1150.02":{"start":"1150.015","dur":"1.875","text":"Deployment I already\ntouched on a little bit,"},"1151.89":{"start":"1151.89","dur":"2.07","text":"but I want to walk you\nthrough how this works."},"1156.80":{"start":"1156.8","dur":"1.25","text":"So you can deploy inline."},"1158.05":{"start":"1158.05","dur":"3.06","text":"We have an inline\ncode editor in the UI."},"1161.11":{"start":"1161.11","dur":"4.36","text":"Or you can deploy via the\ncommand line or via an API."},"1165.47":{"start":"1165.47","dur":"2.53","text":"If you&#39;re deploying directly\nfrom your local file system,"},"1168.00":{"start":"1168","dur":"2.711","text":"we&#39;ll zip it up for you\nwithout the dependencies,"},"1170.71":{"start":"1170.711","dur":"1.499","text":"or with the\ndependencies if you want"},"1172.21":{"start":"1172.21","dur":"5.087","text":"to send them with us for\nwhichever reason you like."},"1177.30":{"start":"1177.297","dur":"1.583","text":"And we&#39;ll send it\nto the API and we&#39;ll"},"1178.88":{"start":"1178.88","dur":"1.816","text":"run the build\nprocess from there."},"1180.70":{"start":"1180.696","dur":"2.374","text":"If you don&#39;t want to deploy\ndirectly from your local file"},"1183.07":{"start":"1183.07","dur":"5.58","text":"system, you can also deploy\nfrom your GitHub or BitBucket"},"1188.65":{"start":"1188.65","dur":"1.89","text":"repository."},"1190.54":{"start":"1190.54","dur":"2.85","text":"This is done using a tool called\nCloud Source Repositories."},"1193.39":{"start":"1193.39","dur":"3.42","text":"We&#39;ll automatically keep in\nsync your Cloud repository"},"1196.81":{"start":"1196.81","dur":"1.645","text":"with your GitHub repository."},"1198.46":{"start":"1198.455","dur":"2.375","text":"And so you&#39;re actually deploying\nfrom Cloud Source repos,"},"1200.83":{"start":"1200.83","dur":"2.025","text":"but it is kept in\nsync with GitHub,"},"1202.86":{"start":"1202.855","dur":"1.875","text":"so you don&#39;t really have\nto interact with it."},"1204.73":{"start":"1204.73","dur":"6.21","text":"You just commit to GitHub,\nand then trigger a deploy,"},"1210.94":{"start":"1210.94","dur":"2.62","text":"and your Cloud Source\nrepo will sync."},"1218.34":{"start":"1218.337","dur":"2.083","text":"So I want to talk a little\nbit about what actually"},"1220.42":{"start":"1220.42","dur":"1.86","text":"happens at deploy time."},"1222.28":{"start":"1222.28","dur":"1.63","text":"So you&#39;ve written your code."},"1223.91":{"start":"1223.91","dur":"1.41","text":"Let&#39;s say you&#39;re using the CLI."},"1225.32":{"start":"1225.32","dur":"3.85","text":"You&#39;ve gone G Cloud,\nbeta functions, deploy,"},"1229.17":{"start":"1229.17","dur":"3.18","text":"and then what happens?"},"1232.35":{"start":"1232.35","dur":"2.28","text":"So you hit Deploy."},"1234.63":{"start":"1234.63","dur":"3.57","text":"As I said, we zip it\nup if it&#39;s in the CLI."},"1238.20":{"start":"1238.2","dur":"2.58","text":"When it gets to the\nserver, we run NPM install."},"1240.78":{"start":"1240.78","dur":"5.64","text":"If there are already\npackages there,"},"1246.42":{"start":"1246.42","dur":"2.28","text":"then we might just\nrun NPM rebuild"},"1248.70":{"start":"1248.7","dur":"1.955","text":"to capture any native\ncompilation that needs"},"1250.66":{"start":"1250.655","dur":"1.125","text":"to happen for the platform."},"1254.65":{"start":"1254.65","dur":"2.46","text":"We have, internally, a\nthing called create version."},"1257.11":{"start":"1257.11","dur":"1.98","text":"So what this is doing\nis saying, OK, we"},"1259.09":{"start":"1259.09","dur":"1.709","text":"have a new version\nof this function."},"1260.80":{"start":"1260.799","dur":"2.041","text":"I&#39;m going to create a new\nversion so the existing"},"1262.84":{"start":"1262.84","dur":"1.185","text":"version continues to exist."},"1266.55":{"start":"1266.554","dur":"2.416","text":"And before we do anything, I&#39;m\ngoing to health check that."},"1268.97":{"start":"1268.97","dur":"3.07","text":"I&#39;m going to make sure\nthat that thing is OK."},"1272.04":{"start":"1272.04","dur":"1.91","text":"That means that the\nenvironment&#39;s spun up"},"1273.95":{"start":"1273.95","dur":"3.45","text":"correctly, the image is\nbeing created correctly,"},"1277.40":{"start":"1277.4","dur":"2.31","text":"the runtime has\nstarted correctly."},"1279.71":{"start":"1279.71","dur":"2.67","text":"We can&#39;t check that your\nfunction is going to work,"},"1282.38":{"start":"1282.38","dur":"2.53","text":"because your function, of\ncourse, may have side effects."},"1284.91":{"start":"1284.91","dur":"1.375","text":"So we can&#39;t invoke\nyour function,"},"1286.29":{"start":"1286.285","dur":"4.135","text":"but we can do everything\nbut that to make sure"},"1290.42":{"start":"1290.42","dur":"1.81","text":"that everything&#39;s OK."},"1292.23":{"start":"1292.23","dur":"2.43","text":"And if everything&#39;s OK,\nwe&#39;ll mark the deployment"},"1294.66":{"start":"1294.66","dur":"2.232","text":"as complete, and\nthen we&#39;ll gradually"},"1296.89":{"start":"1296.892","dur":"2.208","text":"move traffic from the old\nversion to the new version."},"1303.93":{"start":"1303.93","dur":"2.372","text":"OK, so that all sounds great."},"1306.30":{"start":"1306.302","dur":"0.708","text":"Now what do I do?"},"1309.86":{"start":"1309.857","dur":"1.833","text":"One of these cases that\npops up quite a lot,"},"1311.69":{"start":"1311.69","dur":"3.78","text":"and I&#39;ve touched on it a few\ntimes, is lightweight ETL."},"1315.47":{"start":"1315.47","dur":"4.497","text":"So a file comes in, hits\nstorage or comes into the cloud,"},"1319.97":{"start":"1319.967","dur":"1.833","text":"and you want to do some\ntransformation of it"},"1321.80":{"start":"1321.8","dur":"1.57","text":"before it goes somewhere else."},"1323.37":{"start":"1323.37","dur":"4.43","text":"So one solution to that is\nhave the file hit storage"},"1327.80":{"start":"1327.8","dur":"5.56","text":"immediately, have storage\ncall a Cloud Function,"},"1333.36":{"start":"1333.36","dur":"3.61","text":"and maybe from there, you want\nto write it to a database."},"1336.97":{"start":"1336.97","dur":"2.292","text":"Or maybe you want to\nsend it to BigQuery."},"1339.26":{"start":"1339.262","dur":"1.958","text":"Or maybe you just want\nto write back to storage"},"1341.22":{"start":"1341.22","dur":"1.71","text":"with a mutated\nversion of that file."},"1345.54":{"start":"1345.54","dur":"1.98","text":"This comes up in things\nlike image processing,"},"1347.52":{"start":"1347.52","dur":"4.59","text":"video processing, indexing, like\nin my earlier example, entity"},"1352.11":{"start":"1352.11","dur":"1.62","text":"extraction."},"1353.73":{"start":"1353.73","dur":"2.7","text":"You might want to send the\nimage to the vision API"},"1356.43":{"start":"1356.43","dur":"1.914","text":"to pull the entities out of it."},"1358.34":{"start":"1358.344","dur":"1.416","text":"Content sanitation\nand filtering--"},"1359.76":{"start":"1359.76","dur":"2.98","text":"those sorts of things."},"1362.74":{"start":"1362.74","dur":"1.68","text":"Semios is one of the\ncustomers we have"},"1364.42":{"start":"1364.42","dur":"2.262","text":"using Cloud Functions for this."},"1366.68":{"start":"1366.682","dur":"1.708","text":"They&#39;re in here because\nI thought they&#39;re"},"1368.39":{"start":"1368.39","dur":"1.55","text":"a really interesting use case."},"1369.94":{"start":"1369.94","dur":"4.8","text":"They have around 150,000\nsensors in orchards"},"1374.74":{"start":"1374.74","dur":"4.35","text":"tracking things like temperature\nand pressure, humidity,"},"1379.09":{"start":"1379.09","dur":"1.102","text":"those sorts of things."},"1380.19":{"start":"1380.192","dur":"1.958","text":"And they aggregate all\nthat data in the orchard"},"1382.15":{"start":"1382.15","dur":"1.544","text":"and send it back to the cloud."},"1383.69":{"start":"1383.694","dur":"2.416","text":"And it passes through a Cloud\nFunction on its way through,"},"1386.11":{"start":"1386.11","dur":"1.666","text":"and through that Cloud\nFunction, they&#39;re"},"1387.78":{"start":"1387.776","dur":"2.731","text":"doing some filtering before\nit gets to the database."},"1394.25":{"start":"1394.25","dur":"4.72","text":"Another use case we see a\nlot, and I also alluded to,"},"1398.97":{"start":"1398.97","dur":"2.65","text":"is microservices and webhooks."},"1401.62":{"start":"1401.62","dur":"2.61","text":"So there&#39;s a few different\nflavors of how this might work."},"1404.23":{"start":"1404.23","dur":"6.89","text":"One is that the client is\ncalling, typically via HTTP,"},"1411.12":{"start":"1411.12","dur":"1.207","text":"the Cloud Function directly."},"1412.33":{"start":"1412.327","dur":"1.583","text":"So the client is\noutside of the cloud,"},"1413.91":{"start":"1413.91","dur":"1.749","text":"the Cloud Function is\ninside of the cloud,"},"1415.66":{"start":"1415.659","dur":"1.641","text":"and they just call it directly."},"1417.30":{"start":"1417.3","dur":"2.1","text":"You can think of this\nas a microservice."},"1419.40":{"start":"1419.4","dur":"2.37","text":"The client may also be inside\nthe cloud in this case."},"1424.72":{"start":"1424.72","dur":"1.05","text":"API."},"1425.77":{"start":"1425.77","dur":"1.95","text":"So similar to a\nmicroservice, but it&#39;s"},"1427.72":{"start":"1427.72","dur":"5.49","text":"where the client is\ncalling the Cloud Function"},"1433.21":{"start":"1433.21","dur":"1.609","text":"and treating it as an API."},"1434.82":{"start":"1434.819","dur":"1.541","text":"In the same way that\nyou would if you"},"1436.36":{"start":"1436.36","dur":"5.44","text":"were to build a website\nwith exposed endpoints,"},"1441.80":{"start":"1441.8","dur":"2.96","text":"the mobile client is calling\ndirectly to the Cloud Function."},"1448.74":{"start":"1448.74","dur":"0.72","text":"Webhook."},"1449.46":{"start":"1449.46","dur":"2.55","text":"This is the example\nI gave before where"},"1452.01":{"start":"1452.01","dur":"2.73","text":"somebody like a GitHub\nmight be calling you back,"},"1454.74":{"start":"1454.74","dur":"2.724","text":"or maybe you&#39;re sending\nan SMS using Twilio,"},"1457.46":{"start":"1457.464","dur":"1.416","text":"and they&#39;re going\nto call you back"},"1458.88":{"start":"1458.88","dur":"1.32","text":"with a webhook when it&#39;s done."},"1462.82":{"start":"1462.82","dur":"3.09","text":"So microservices,\ndata ingestion APIs,"},"1465.91":{"start":"1465.91","dur":"3","text":"callbacks from\nexternal services."},"1468.91":{"start":"1468.91","dur":"3.55","text":"A good example here is Vroom."},"1472.46":{"start":"1472.46","dur":"5.07","text":"Vroom are the largest\nused car seller on eBay."},"1477.53":{"start":"1477.53","dur":"1.7","text":"And they accept\ndata from partners."},"1479.23":{"start":"1479.23","dur":"1.369","text":"They have a network of partners."},"1480.60":{"start":"1480.599","dur":"1.041","text":"They want to accept data."},"1481.64":{"start":"1481.64","dur":"4.47","text":"They&#39;re using Cloud Functions\nas a data ingestion mechanism,"},"1486.11":{"start":"1486.11","dur":"1.8","text":"as an API for their\npartners to call."},"1491.40":{"start":"1491.399","dur":"1.791","text":"And the last one I want\nto talk about today"},"1493.19":{"start":"1493.19","dur":"2.73","text":"is more of a fun use case."},"1495.92":{"start":"1495.92","dur":"1.12","text":"So bots an action."},"1497.04":{"start":"1497.04","dur":"4.16","text":"So this is where some messaging\nclient, some chat client,"},"1501.20":{"start":"1501.2","dur":"4.65","text":"some voice-enabled device is\ngoing to use a Cloud Function"},"1505.85":{"start":"1505.85","dur":"2.34","text":"to create a custom command--"},"1508.19":{"start":"1508.19","dur":"4.105","text":"something to extend the\nbehavior of this tool."},"1512.30":{"start":"1512.295","dur":"1.375","text":"So they&#39;ll use\nthe Cloud Function"},"1513.67":{"start":"1513.67","dur":"5.49","text":"for doing this-- typically,\nagain, enabled over HTTP."},"1519.16":{"start":"1519.16","dur":"2.94","text":"Messaging bots-- things\nlike adding custom actions"},"1522.10":{"start":"1522.1","dur":"4.7","text":"to Google Assistant\nand home automation."},"1526.80":{"start":"1526.8","dur":"1.95","text":"So the example here is Meetup."},"1528.75":{"start":"1528.75","dur":"2.04","text":"They created a\ncustom Slack command."},"1530.79":{"start":"1530.79","dur":"2.43","text":"And so when you type this\nSlack command into their Slack"},"1533.22":{"start":"1533.22","dur":"2.43","text":"channel, it will fire\na file function that"},"1535.65":{"start":"1535.65","dur":"1.96","text":"will create a ticket in JIRA."},"1537.61":{"start":"1537.61","dur":"3.62","text":"It&#39;s part of their way to\nautomate their development"},"1541.23":{"start":"1541.23","dur":"0.67","text":"processes."},"1546.95":{"start":"1546.95","dur":"3.97","text":"This is my own artistic\ntalent being shown."},"1550.92":{"start":"1550.92","dur":"1.26","text":"It&#39;s supposed to be a drum."},"1552.18":{"start":"1552.18","dur":"3.191","text":"And then my wife said that it\nlooked like a bowl of rice."},"1555.37":{"start":"1555.371","dur":"1.499","text":"It&#39;s supposed to\nbe a drum, and it&#39;s"},"1556.87":{"start":"1556.87","dur":"3.08","text":"supposed to remind me that\nthis is the drum roll."},"1559.95":{"start":"1559.95","dur":"5.6","text":"You may have already heard, but\nwe also now support Firebase."},"1565.55":{"start":"1565.55","dur":"2.13","text":"So you can cause\na Cloud Function"},"1567.68":{"start":"1567.68","dur":"4.26","text":"to be invoked from a mutation in\nthe Firebase real time database"},"1571.94":{"start":"1571.94","dur":"2.88","text":"from life cycle events\non authentication,"},"1574.82":{"start":"1574.82","dur":"3.839","text":"and also from analytics events\nfrom your mobile client."},"1578.66":{"start":"1578.659","dur":"2.041","text":"But I don&#39;t want to steal\ntheir thunder too much."},"1586.17":{"start":"1586.17","dur":"2.38","text":"They have a session\ntoday at 4 o&#39;clock."},"1588.55":{"start":"1588.55","dur":"2.34","text":"I encourage you to go\nand have a look at that."},"1590.89":{"start":"1590.89","dur":"2.325","text":"And you can see here\njust those examples"},"1593.22":{"start":"1593.215","dur":"1.125","text":"in the context of Firebase."},"1594.34":{"start":"1594.34","dur":"2.79","text":"So processing payments\nthrough an external provider,"},"1597.13":{"start":"1597.13","dur":"3.57","text":"sending an email or an SMS,\nbackend service integration,"},"1600.70":{"start":"1600.7","dur":"3.69","text":"so connecting to the\nrest of the cloud."},"1604.39":{"start":"1604.39","dur":"3.75","text":"And then funnel optimization\nis leveraging things"},"1608.14":{"start":"1608.14","dur":"3.75","text":"like analytics to know what\nthe end users are doing,"},"1611.89":{"start":"1611.89","dur":"1.89","text":"and to react to that with code."},"1613.78":{"start":"1613.78","dur":"3.51","text":"So a great example might be,\ndepending what the end user is,"},"1617.29":{"start":"1617.29","dur":"4.2","text":"doing, you might want to send\nthem a push notification when"},"1621.49":{"start":"1621.49","dur":"2.15","text":"they enter or exit a\nparticular analytics cohort."},"1629.07":{"start":"1629.07","dur":"3.46","text":"So Cloud Functions\nis in beta today."},"1632.53":{"start":"1632.53","dur":"2.56","text":"It&#39;s available for\neveryone to use."},"1635.09":{"start":"1635.09","dur":"4.27","text":"Just go to that URL and\nyou can find out more."},"1639.36":{"start":"1639.36","dur":"2.52","text":"That&#39;s all I have\nin terms of content."},"1641.88":{"start":"1641.88","dur":"2.578","text":"Does anyone want to see a demo?"},"1644.46":{"start":"1644.458","dur":"3.728","text":"[APPLAUSE]"},"1649.12":{"start":"1649.124","dur":"1.416","text":"Let me rephrase\nthat-- does anyone"},"1650.54":{"start":"1650.54","dur":"1.995","text":"want to see me try\nto do a demo and have"},"1652.54":{"start":"1652.535","dur":"4.955","text":"it fail catastrophically\nand be embarrassed?"},"1657.49":{"start":"1657.49","dur":"0.75","text":"Yeah, more people."},"1658.24":{"start":"1658.24","dur":"2.03","text":"Great."},"1660.27":{"start":"1660.27","dur":"2.64","text":"OK, switch to demo, please."},"1662.91":{"start":"1662.91","dur":"1.964","text":"OK, this looks confusing."},"1664.87":{"start":"1664.874","dur":"1.166","text":"I&#39;m zoomed out a little bit."},"1666.04":{"start":"1666.04","dur":"1.541","text":"That&#39;s why the boxes\nare [INAUDIBLE]."},"1667.58":{"start":"1667.581","dur":"2.287","text":"Let me see if I can make\nthat a little bit better."},"1672.62":{"start":"1672.616","dur":"0.874","text":"That&#39;s worse."},"1673.49":{"start":"1673.49","dur":"2.06","text":"OK, we&#39;ll live with it."},"1675.55":{"start":"1675.55","dur":"2.36","text":"OK, what are you\nlooking at here?"},"1677.91":{"start":"1677.91","dur":"2.01","text":"All these gray\nboxes at the top--"},"1679.92":{"start":"1679.92","dur":"5.04","text":"you can think of those as\nusers calling your function."},"1684.96":{"start":"1684.96","dur":"4.74","text":"Now, unfortunately, when\nwe were creating this demo,"},"1689.70":{"start":"1689.7","dur":"2.55","text":"we thought it would be easy\njust to run it in a browser."},"1692.25":{"start":"1692.25","dur":"2.67","text":"It turns out the browser\nis not great at generating"},"1694.92":{"start":"1694.92","dur":"3.09","text":"many, many concurrent\nHTTP requests."},"1698.01":{"start":"1698.01","dur":"3.69","text":"So even though there&#39;s, I think,\nabout 80 boxes on the screen"},"1701.70":{"start":"1701.7","dur":"2.335","text":"there, we&#39;re not talking\n80 concurrent requests."},"1704.04":{"start":"1704.035","dur":"1.625","text":"They&#39;re just going\nto fire off requests"},"1705.66":{"start":"1705.66","dur":"2.34","text":"as quickly as they can."},"1708.00":{"start":"1708","dur":"3.43","text":"Each little box\nrepresents a request."},"1711.43":{"start":"1711.43","dur":"1.587","text":"When the Cloud\nFunction executes,"},"1713.02":{"start":"1713.017","dur":"1.333","text":"it&#39;s just going to do one thing."},"1714.35":{"start":"1714.35","dur":"1.91","text":"It&#39;s just going\nto return a color."},"1716.26":{"start":"1716.26","dur":"3.18","text":"And the box is going to render\nthe color that it returns,"},"1719.44":{"start":"1719.44","dur":"2.57","text":"and that&#39;s it."},"1722.01":{"start":"1722.01","dur":"2.01","text":"Once we kick this off,\nwe&#39;ll see these boxes"},"1724.02":{"start":"1724.02","dur":"2.067","text":"switching color\nto whatever color"},"1726.09":{"start":"1726.087","dur":"1.083","text":"the function is returning."},"1727.17":{"start":"1727.17","dur":"2.31","text":"It&#39;s returning the same\ncolor for every one."},"1729.48":{"start":"1729.48","dur":"1.926","text":"Then I&#39;m going to show\nyou the deploy process."},"1731.41":{"start":"1731.406","dur":"1.624","text":"Live, I&#39;m going to\nredeploy a function,"},"1733.03":{"start":"1733.03","dur":"2.45","text":"I&#39;m going to change the\ncolor, and visually, you"},"1735.48":{"start":"1735.48","dur":"3.21","text":"should see all these boxes\nflick over to the new color."},"1738.69":{"start":"1738.69","dur":"3.75","text":"And down below, what\nyou&#39;ll see is the latency--"},"1742.44":{"start":"1742.44","dur":"4.106","text":"the median response time\nfrom executing this function."},"1746.55":{"start":"1746.546","dur":"1.124","text":"So let&#39;s see if this works."},"1751.04":{"start":"1751.044","dur":"5.166","text":"OK, these are all my\nboxes changing color."},"1756.21":{"start":"1756.21","dur":"3.19","text":"And below, you can\nsee the latency."},"1759.40":{"start":"1759.4","dur":"4.81","text":"Now, I&#39;m going switch\nover to my Cloud console."},"1764.21":{"start":"1764.21","dur":"1.35","text":"Here&#39;s my send color function."},"1768.34":{"start":"1768.344","dur":"1.354","text":"I&#39;m just going to edit."},"1773.19":{"start":"1773.19","dur":"3.05","text":"So you can see here, this is\nwhere I&#39;m sending the response."},"1776.24":{"start":"1776.24","dur":"1.42","text":"It&#39;s just an HTTP function."},"1777.66":{"start":"1777.66","dur":"1.55","text":"I&#39;ve got some call\nstuff there just"},"1779.21":{"start":"1779.21","dur":"1.541","text":"to make it callable\nfrom the browser."},"1780.75":{"start":"1780.751","dur":"2.589","text":"Just ignore that."},"1783.34":{"start":"1783.34","dur":"6.212","text":"So I&#39;m going to change this to\nsend green rather than blue."},"1789.55":{"start":"1789.552","dur":"2.555","text":"Hit Save."},"1792.11":{"start":"1792.107","dur":"1.583","text":"And recalling what\nI mentioned before,"},"1793.69":{"start":"1793.69","dur":"4.74","text":"that&#39;s going to send that\ndeployment to the cloud."},"1798.43":{"start":"1798.43","dur":"2.35","text":"It&#39;s going to run NPM install."},"1800.78":{"start":"1800.78","dur":"1.32","text":"It&#39;s going to build an image."},"1802.10":{"start":"1802.1","dur":"1.52","text":"It&#39;s going to create a version--"},"1803.62":{"start":"1803.62","dur":"2.8","text":"I better switch across\nso you can see it."},"1806.42":{"start":"1806.42","dur":"2.09","text":"It&#39;s going to create a version."},"1808.51":{"start":"1808.51","dur":"1.99","text":"It&#39;s going to health\ncheck that version."},"1810.50":{"start":"1810.5","dur":"2.16","text":"And assuming the\nhealth check passes"},"1812.66":{"start":"1812.66","dur":"4.62","text":"and everything&#39;s OK, that will\nbecome the current version."},"1817.28":{"start":"1817.28","dur":"3.51","text":"And right on cue--"},"1820.79":{"start":"1820.79","dur":"4.824","text":"right on cue-- it&#39;s\ngoing to change."},"1825.61":{"start":"1825.614","dur":"3.374","text":"[APPLAUSE]"},"1834.30":{"start":"1834.3","dur":"4.94","text":"So that&#39;s just showing how easy\nit is to deploy a function."},"1839.24":{"start":"1839.24","dur":"2.29","text":"And if you had some\nerror, some problem in it,"},"1841.53":{"start":"1841.53","dur":"2.45","text":"the existing function\nkeeps ticking."},"1843.98":{"start":"1843.98","dur":"1.92","text":"And we will health\ncheck everything,"},"1845.90":{"start":"1845.9","dur":"2.49","text":"and then we&#39;ll switch\nacross to the new version."},"1848.39":{"start":"1848.39","dur":"1.47","text":"And you&#39;ll notice\nthat the colors"},"1849.86":{"start":"1849.86","dur":"1.68","text":"didn&#39;t flick immediately."},"1851.54":{"start":"1851.54","dur":"1.89","text":"That&#39;s more a\nbrowser issue, but it"},"1853.43":{"start":"1853.43","dur":"3.75","text":"may be that there&#39;s\ntraffic, rather"},"1857.18":{"start":"1857.18","dur":"1.86","text":"requests, that are\ncurrently being served"},"1859.04":{"start":"1859.04","dur":"2.64","text":"will complete before they\nget to the new version."},"1861.68":{"start":"1861.68","dur":"2.97","text":"So you might get some\ntiming issue in that,"},"1864.65":{"start":"1864.65","dur":"1.77","text":"and you saw that\nreflected there."},"1866.42":{"start":"1866.42","dur":"3.3","text":"OK, so that&#39;s all I have today."},"1869.72":{"start":"1869.72","dur":"3.35","text":"[MUSIC PLAYING]"}}