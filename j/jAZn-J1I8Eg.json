{"0.00":{"start":"0","dur":"3.402","text":"[MUSIC PLAYING]"},"5.83":{"start":"5.832","dur":"1.888","text":"OLIVER WOODMAN: So\nmy name&#39;s Ollie."},"7.72":{"start":"7.72","dur":"1.566","text":"This is Andrew."},"9.29":{"start":"9.286","dur":"1.674","text":"It&#39;s great to see\nso many of you here."},"10.96":{"start":"10.96","dur":"2.4","text":"I know it&#39;s been a long day."},"13.36":{"start":"13.36","dur":"2.43","text":"And today we&#39;re going to talk\nto you about media playback"},"15.79":{"start":"15.79","dur":"3.19","text":"on Android using ExoPlayer."},"18.98":{"start":"18.98","dur":"1.62","text":"In terms of what\nwe&#39;re going to cover,"},"20.60":{"start":"20.6","dur":"2.57","text":"we&#39;re really going to try and\ncater a little bit for everyone"},"23.17":{"start":"23.17","dur":"1.76","text":"in this talk."},"24.93":{"start":"24.93","dur":"1.75","text":"So what that means is\nwe&#39;re going to start"},"26.68":{"start":"26.68","dur":"0.99","text":"with some fundamentals."},"27.67":{"start":"27.67","dur":"3.54","text":"So we&#39;re going to briefly\ndiscuss what ExoPlayer is."},"31.21":{"start":"31.21","dur":"2.837","text":"We&#39;re going to discuss\nsome of its features."},"34.05":{"start":"34.047","dur":"2.083","text":"We&#39;re going to discuss a\nlittle bit about when you"},"36.13":{"start":"36.13","dur":"1.986","text":"might want to use ExoPlayer."},"38.12":{"start":"38.116","dur":"2.124","text":"And we&#39;re going to go\nthrough a simple example that"},"40.24":{"start":"40.24","dur":"2.95","text":"shows how you might be\nable to get started."},"43.19":{"start":"43.19","dur":"2.12","text":"After that, perhaps more\nfor those who are already"},"45.31":{"start":"45.31","dur":"1.5","text":"familiar with\nExoPlayer, we&#39;re going"},"46.81":{"start":"46.81","dur":"4.46","text":"to run quite quickly through\nsome more advanced topics."},"51.27":{"start":"51.27","dur":"2.14","text":"So we&#39;ll talk about\nmedia composition, which"},"53.41":{"start":"53.41","dur":"3.302","text":"is a new feature ExoPlayer v2."},"56.71":{"start":"56.712","dur":"3.298","text":"We&#39;ll talk about some of\nthe internals of ExoPlayer,"},"60.01":{"start":"60.01","dur":"3.09","text":"and we&#39;ll describe a little\nbit about how they work"},"63.10":{"start":"63.1","dur":"3.18","text":"and how playback actually works."},"66.28":{"start":"66.28","dur":"2.14","text":"And then finally we&#39;ll\nbuild on that knowledge"},"68.42":{"start":"68.42","dur":"2.42","text":"and we&#39;ll start to talk about\nhow you can really customize"},"70.84":{"start":"70.84","dur":"3.54","text":"and fine tune ExoPlayer to do\na really good job of matching"},"74.38":{"start":"74.38","dur":"3.83","text":"your specific use case."},"78.21":{"start":"78.21","dur":"2.34","text":"OK, so let&#39;s get started."},"80.55":{"start":"80.55","dur":"1.841","text":"What is ExoPlayer?"},"82.39":{"start":"82.391","dur":"2.249","text":"So for those of you who\naren&#39;t familiar with ExoPlayer"},"84.64":{"start":"84.64","dur":"4.09","text":"already, it&#39;s a media\nplayback library for Android."},"88.73":{"start":"88.73","dur":"2.259","text":"It works on Jelly\nBean and above,"},"90.99":{"start":"90.989","dur":"1.041","text":"and it&#39;s written in Java."},"92.03":{"start":"92.03","dur":"2.7","text":"So as Android developers,\nit&#39;s already in the language"},"94.73":{"start":"94.73","dur":"3.36","text":"that you&#39;re most familiar with."},"98.09":{"start":"98.09","dur":"2.61","text":"If you want to ExoPlayer, you\ninclude it as a dependency,"},"100.70":{"start":"100.7","dur":"3.6","text":"just as you would include\nany other Java library."},"104.30":{"start":"104.3","dur":"1.41","text":"And it&#39;s also open source."},"105.71":{"start":"105.71","dur":"1.44","text":"So if you&#39;re\ninspired to check out"},"107.15":{"start":"107.15","dur":"2.7","text":"our source code after this\ntalk, you can easily do that."},"109.85":{"start":"109.85","dur":"2.28","text":"And the last slide\nof this presentation"},"112.13":{"start":"112.13","dur":"4.66","text":"will actually have a link\nto our GitHub repository."},"116.79":{"start":"116.79","dur":"2.11","text":"In terms of features,\nwe have come a long way"},"118.90":{"start":"118.9","dur":"2","text":"since we initially open\nsourced ExoPlayer, which"},"120.90":{"start":"120.9","dur":"3.9","text":"was back at Google I\/O in 2014."},"124.80":{"start":"124.8","dur":"1.89","text":"So in that initial\nrelease, we supported"},"126.69":{"start":"126.69","dur":"3.69","text":"DASH and SmoothStreaming\nadaptive media playbacks,"},"130.38":{"start":"130.38","dur":"4.2","text":"primarily using fragmented\nMP4 as the container format."},"134.58":{"start":"134.58","dur":"5.104","text":"We also supported TTML\ncaptions and common encryption."},"139.68":{"start":"139.684","dur":"1.666","text":"Not too long after\nthat we added support"},"141.35":{"start":"141.35","dur":"4.22","text":"for HLS and the MPEG-TS\ncontainer format,"},"145.57":{"start":"145.57","dur":"3.777","text":"and also some additional\ncaption formats."},"149.35":{"start":"149.347","dur":"1.833","text":"And since then we&#39;ve\nreally been quite busy,"},"151.18":{"start":"151.18","dur":"2.76","text":"adding support for loads\nof more traditional media"},"153.94":{"start":"153.94","dur":"4.47","text":"formats like MP3, MP4, Ogg\nand Matroska and so on."},"163.29":{"start":"163.29","dur":"3.55","text":"We also others\nseveral extensions."},"166.84":{"start":"166.84","dur":"2.32","text":"What ExoPlayer\nextensions are is a way"},"169.16":{"start":"169.16","dur":"4.35","text":"of bringing functionality from\nother libraries into ExoPlayer."},"173.51":{"start":"173.51","dur":"4.05","text":"So as a concrete example, if you\nuse OkHttp as your networking"},"177.56":{"start":"177.56","dur":"2.576","text":"stack for the rest\nof your application,"},"180.14":{"start":"180.136","dur":"2.374","text":"you might actually want to\nuse that exact same networking"},"182.51":{"start":"182.51","dur":"2.73","text":"stack for media playbacks."},"185.24":{"start":"185.24","dur":"3.06","text":"And you can do that with\nOkHttp extension, which"},"188.30":{"start":"188.3","dur":"3.24","text":"allows you to use that exact\nsame network stack inside"},"191.54":{"start":"191.54","dur":"3.15","text":"of ExoPlayer."},"194.69":{"start":"194.69","dur":"3.03","text":"So this brings us up to\nthe middle of last year."},"197.72":{"start":"197.72","dur":"2.48","text":"And at this point we\nkind of took a step back,"},"200.20":{"start":"200.2","dur":"2.55","text":"and we made some quite\nin-depth architectural changes"},"202.75":{"start":"202.75","dur":"1.68","text":"inside the player."},"204.43":{"start":"204.43","dur":"3.294","text":"And we released\nExoPlayer version 2."},"207.72":{"start":"207.724","dur":"1.416","text":"In this release\nwe had the support"},"209.14":{"start":"209.14","dur":"3.81","text":"for more advanced features\nlike MultiPeriod DASH supports,"},"212.95":{"start":"212.95","dur":"1.692","text":"gapless audio, and\nmedia composition,"},"214.64":{"start":"214.642","dur":"1.458","text":"which is something\nwe&#39;ll talk quite"},"216.10":{"start":"216.1","dur":"2.58","text":"a lot about in a little while."},"218.68":{"start":"218.68","dur":"2.61","text":"At the same time we tried to\nmake ExoPlayer easier to use."},"221.29":{"start":"221.29","dur":"2","text":"So we added Simple\nExoPlayer view--"},"223.29":{"start":"223.29","dur":"3.73","text":"sorry, Simple ExoPlayer, which\nis a slightly higher level"},"227.02":{"start":"227.02","dur":"3.504","text":"API for using ExoPlayer,\nand also some playback UI"},"230.52":{"start":"230.524","dur":"1.416","text":"components that\nyou can use to get"},"231.94":{"start":"231.94","dur":"3.55","text":"started really quickly\nout of the box."},"235.49":{"start":"235.49","dur":"1.88","text":"Since then we&#39;ve been\nadding more features."},"237.37":{"start":"237.37","dur":"1.74","text":"Most notably we\nrecently added support"},"239.11":{"start":"239.11","dur":"1.705","text":"for variable speed playback."},"240.82":{"start":"240.815","dur":"2.075","text":"And we&#39;ve also been\nbuilding up our ability"},"242.89":{"start":"242.89","dur":"4.18","text":"to cache media as it&#39;s played."},"247.07":{"start":"247.07","dur":"2.58","text":"And so this is where\nwe&#39;re at today."},"249.65":{"start":"249.65","dur":"1.5","text":"And the key takeaway\nfrom this slide"},"251.15":{"start":"251.15","dur":"1.833","text":"isn&#39;t necessarily that\nyou should understand"},"252.98":{"start":"252.983","dur":"1.527","text":"everything that&#39;s on it."},"254.51":{"start":"254.51","dur":"2.069","text":"Probably for your\nparticular use case"},"256.58":{"start":"256.579","dur":"3.541","text":"you only need a very small\nsubset of these features."},"260.12":{"start":"260.12","dur":"2.37","text":"The key takeaway here\nis really that ExoPlayer"},"262.49":{"start":"262.49","dur":"2.79","text":"has kind of evolved into quite\na fully featured media library"},"265.28":{"start":"265.28","dur":"0.93","text":"now."},"266.21":{"start":"266.21","dur":"3.12","text":"And so if you have a media\nplayback use case for Android,"},"269.33":{"start":"269.33","dur":"4.81","text":"probably ExoPlayer is going to\nsupport what you want to do."},"274.14":{"start":"274.14","dur":"2.25","text":"So now we know a bit\nabout the features there."},"276.39":{"start":"276.39","dur":"3.12","text":"Let&#39;s talk about when it might\nmake sense to use ExoPlayer"},"279.51":{"start":"279.51","dur":"2.79","text":"and when it might makes sense\nto use the obviously alternative"},"282.30":{"start":"282.3","dur":"5.094","text":"to ExoPlayer, which is Android&#39;s\nbuilt in MediaPlayer API."},"287.39":{"start":"287.394","dur":"1.916","text":"So the first thing to\nnote is that MediaPlayer"},"289.31":{"start":"289.31","dur":"3.32","text":"works all the way back to\nthe beginning of Android."},"292.63":{"start":"292.63","dur":"3.02","text":"ExoPlayer is Jelly\nBean and above only."},"295.65":{"start":"295.65","dur":"2","text":"This is far less of an\nissue than it used to be."},"297.65":{"start":"297.65","dur":"3.45","text":"And in fact there&#39;s only around\n2% of active Android devices"},"301.10":{"start":"301.1","dur":"2.52","text":"still on earlier\nversions of Android."},"303.62":{"start":"303.62","dur":"1.95","text":"But if you really care\na lot about providing"},"305.57":{"start":"305.57","dur":"3.09","text":"continued support to\nthat 2%, then MediaPlayer"},"308.66":{"start":"308.66","dur":"3.38","text":"is going to be your best bet."},"312.04":{"start":"312.04","dur":"2.79","text":"In terms of what use cases\neach of these solutions"},"314.83":{"start":"314.83","dur":"4.14","text":"is best suited for, MediaPlayer\ndoes quite a good job"},"318.97":{"start":"318.97","dur":"1.12","text":"of simple use cases."},"320.09":{"start":"320.09","dur":"1.43","text":"So if you just\nhave an MP3 that&#39;s"},"321.52":{"start":"321.52","dur":"2.61","text":"maybe bundled in\nyour APK and you"},"324.13":{"start":"324.13","dur":"2.4","text":"want to play it inside\nyour app, then MediaPlayer"},"326.53":{"start":"326.53","dur":"1.56","text":"is going to work\njust fine for you."},"328.09":{"start":"328.09","dur":"1.249","text":"Maybe you&#39;re already using it."},"329.34":{"start":"329.339","dur":"3.891","text":"And there&#39;s no real reason\nwhy you should switch."},"333.23":{"start":"333.23","dur":"2.06","text":"Where ExoPlayer really\ncomes into its own"},"335.29":{"start":"335.29","dur":"3.72","text":"is for more advanced use\ncases, so specifically"},"339.01":{"start":"339.01","dur":"3.81","text":"any kind of adaptive streaming,\nincluding DASH, SmoothStreaming"},"342.82":{"start":"342.82","dur":"2.934","text":"and HLS, and use\ncases where you really"},"345.75":{"start":"345.754","dur":"1.916","text":"want to leverage some\nof the advanced features"},"347.67":{"start":"347.67","dur":"3.19","text":"that ExoPlayer provides, like\nmedia composition and caching."},"353.09":{"start":"353.092","dur":"1.958","text":"Another difference that&#39;s\nworth bearing in mind"},"355.05":{"start":"355.05","dur":"3.56","text":"is the way that these two\nAPIs have been designed."},"358.61":{"start":"358.61","dur":"1.84","text":"MediaPlayer is very\nmuch a black box."},"360.45":{"start":"360.45","dur":"2.31","text":"You don&#39;t get very much\ncontrol over the inner workings"},"362.76":{"start":"362.76","dur":"1.34","text":"of the player."},"364.10":{"start":"364.1","dur":"2.35","text":"And in contrast, ExoPlayer\nis designed really"},"366.45":{"start":"366.45","dur":"2.1","text":"to be very customizable\nand extensible."},"368.55":{"start":"368.55","dur":"1.5","text":"And you can really\ndig in and start"},"370.05":{"start":"370.05","dur":"3.69","text":"to fine tune the various\ndials inside of ExoPlayer"},"373.74":{"start":"373.74","dur":"4.03","text":"to get things working just\nthe way you want them to."},"377.77":{"start":"377.77","dur":"3.08","text":"So ExoPlayer is really\nbest if you are probably"},"380.85":{"start":"380.85","dur":"4.65","text":"an advanced user and you want\nto kind of tweak these things."},"385.50":{"start":"385.5","dur":"1.84","text":"A final but important\nconsideration"},"387.34":{"start":"387.34","dur":"4.38","text":"is to consider the difference\nof where the player actually"},"391.72":{"start":"391.72","dur":"3.33","text":"lives when using\nMediaPlayer and ExoPlayer."},"395.05":{"start":"395.05","dur":"4.47","text":"So when you use MediaPlayer, as\nyou can see on the left here,"},"399.52":{"start":"399.52","dur":"1.83","text":"the MediaPlayer\nimplementation is actually"},"401.35":{"start":"401.35","dur":"1.92","text":"in the Android operating system."},"403.27":{"start":"403.27","dur":"3.01","text":"And the division here is the\nhorizontal line that you see."},"406.28":{"start":"406.28","dur":"4.73","text":"So below is the operating system\nand above is your application."},"411.01":{"start":"411.01","dur":"1.95","text":"When you use ExoPlayer,\nthe actual player"},"412.96":{"start":"412.96","dur":"3.45","text":"implementation ships as\npart of your application."},"416.41":{"start":"416.41","dur":"2.58","text":"And it really just goes through\nto some quite low level media"},"418.99":{"start":"418.99","dur":"2.85","text":"APIs in the platform,\nmainly for providing access"},"421.84":{"start":"421.84","dur":"2.81","text":"to hardware decoders."},"424.65":{"start":"424.65","dur":"2.17","text":"So why is this important?"},"426.82":{"start":"426.82","dur":"1.91","text":"Well one reason is that\nAndroid&#39;s media power"},"428.73":{"start":"428.73","dur":"1.52","text":"has actually evolved over time."},"430.25":{"start":"430.25","dur":"3.52","text":"So as a result of that,\nthe behavior that you get"},"433.77":{"start":"433.77","dur":"4.599","text":"may vary slightly from Android\nrelease to Android release."},"438.37":{"start":"438.369","dur":"2.041","text":"In contrast with ExoPlayer,\nwe have an advantage."},"440.41":{"start":"440.41","dur":"2.36","text":"So you can ship a single\nversion of the player"},"442.77":{"start":"442.77","dur":"1.41","text":"inside your application."},"444.18":{"start":"444.18","dur":"2.19","text":"And you&#39;re going to get\nthat exact same version"},"446.37":{"start":"446.37","dur":"2.635","text":"across all versions of Android."},"449.01":{"start":"449.005","dur":"1.625","text":"And this means that\nExoPlayer is really"},"450.63":{"start":"450.63","dur":"5.26","text":"better positioned to provide\na very consistent experience."},"455.89":{"start":"455.89","dur":"2.01","text":"Another important\nbenefit of this model"},"457.90":{"start":"457.9","dur":"3","text":"is when we add a new\nfeature, we can generally"},"460.90":{"start":"460.9","dur":"2.581","text":"support all the way back to\nJelly Bean with ExoPlayer,"},"463.48":{"start":"463.481","dur":"1.499","text":"whereas a new feature\nin MediaPlayer"},"464.98":{"start":"464.98","dur":"2.97","text":"is only going to be available\nfor subsequent releases"},"467.95":{"start":"467.95","dur":"2.99","text":"of Android."},"470.94":{"start":"470.94","dur":"2.28","text":"An interesting example\nof these advantages"},"473.22":{"start":"473.22","dur":"3.2","text":"is actually variable\nspeed playback supports."},"476.42":{"start":"476.42","dur":"3.769","text":"So this was supported in\nMediaPlayer from Marshmallow."},"480.19":{"start":"480.189","dur":"1.791","text":"And recently we added\nsupport in ExoPlayer."},"481.98":{"start":"481.98","dur":"3.06","text":"And because we didn&#39;t have any\ndependencies on new low level"},"485.04":{"start":"485.04","dur":"2.79","text":"media APIs or anything\nlike that in the platform,"},"487.83":{"start":"487.83","dur":"3.9","text":"we were able to add support\nall the way back to Jelly Bean."},"491.73":{"start":"491.73","dur":"2.16","text":"What we discovered next\nwas that there was actually"},"493.89":{"start":"493.89","dur":"4.58","text":"a bug in the playback rate and\npitch adjustment implementation"},"498.47":{"start":"498.47","dur":"3.114","text":"that affected both\nMediaPlayer and ExoPlayer."},"501.58":{"start":"501.584","dur":"1.666","text":"And we were able to\nfix that bug, again,"},"503.25":{"start":"503.25","dur":"2.43","text":"all the way back to Jelly\nBean with ExoPlayer,"},"505.68":{"start":"505.68","dur":"3.146","text":"and only in O and\nlater for MediaPlayer."},"511.69":{"start":"511.691","dur":"2.499","text":"So at this point, hopefully you\ncan see some of the benefits"},"514.19":{"start":"514.19","dur":"1.359","text":"ExoPlayer has."},"515.55":{"start":"515.549","dur":"1.633","text":"But you might be\nthinking that you"},"517.18":{"start":"517.182","dur":"1.458","text":"would be more\nconfident in using it"},"518.64":{"start":"518.64","dur":"4.069","text":"if you knew that some people\nwere using it already."},"522.71":{"start":"522.709","dur":"1.541","text":"And I&#39;m happy to\nsay that we actually"},"524.25":{"start":"524.25","dur":"2.91","text":"use ExoPlayer very extensively\nin Google&#39;s own applications."},"527.16":{"start":"527.16","dur":"2.49","text":"So most notably YouTube,\nwhich is obviously"},"529.65":{"start":"529.65","dur":"2.73","text":"a huge video streaming\nservice, and also"},"532.38":{"start":"532.38","dur":"4.954","text":"applications like Google Play\nMovies and Google Photos."},"537.33":{"start":"537.334","dur":"1.916","text":"And we&#39;ve actually seen\nreally strong adoption"},"539.25":{"start":"539.25","dur":"2.35","text":"from the wider development\ncommunity as well."},"541.60":{"start":"541.6","dur":"1.73","text":"So here are just some\nof the applications"},"543.33":{"start":"543.33","dur":"5.46","text":"that for some use or\nother use ExoPlayer today."},"548.79":{"start":"548.79","dur":"1.95","text":"And it&#39;s not just\na handful either."},"550.74":{"start":"550.74","dur":"3.36","text":"There are actually over 140,000\napplications on the Play Store"},"554.10":{"start":"554.1","dur":"3.36","text":"today that are making\nuse of ExoPlayer."},"557.46":{"start":"557.46","dur":"1.714","text":"If your app&#39;s one\nof these, thank you"},"559.17":{"start":"559.174","dur":"1.166","text":"very much for your adoption."},"560.34":{"start":"560.34","dur":"3.58","text":"And please keep\nsending us feedback."},"563.92":{"start":"563.92","dur":"2.05","text":"It&#39;s really important\nto us and it actually"},"565.97":{"start":"565.97","dur":"3.64","text":"does guide a lot\nof what we work on."},"569.61":{"start":"569.61","dur":"2.07","text":"So next up we&#39;re going\nto dive in some code"},"571.68":{"start":"571.68","dur":"1.26","text":"and show a simple example."},"572.94":{"start":"572.94","dur":"3.541","text":"And for that I&#39;m going to\nhand you over to Andrew."},"576.48":{"start":"576.481","dur":"1.907","text":"ANDREW LEWIS: Hi, everyone."},"578.39":{"start":"578.388","dur":"4.132","text":"[APPLAUSE]"},"582.52":{"start":"582.52","dur":"2.79","text":"So let&#39;s imagine you&#39;ve\ngot an existing app"},"585.31":{"start":"585.31","dur":"3.03","text":"and you&#39;d like to\nadd an MP4 player"},"588.34":{"start":"588.34","dur":"2.08","text":"to that app-- so just\nshowing a simple video"},"590.42":{"start":"590.42","dur":"1.34","text":"in your existing app."},"591.76":{"start":"591.76","dur":"1.95","text":"I&#39;m going to go through\nthe minimal changes"},"593.71":{"start":"593.71","dur":"2.97","text":"that you need to make\nto use ExoPlayer."},"596.68":{"start":"596.68","dur":"1.65","text":"So the first step is\ngoing to be to add"},"598.33":{"start":"598.33","dur":"2.64","text":"a dependency on ExoPlayer And\nthere are two main options"},"600.97":{"start":"600.97","dur":"1.08","text":"here."},"602.05":{"start":"602.05","dur":"3.42","text":"You can either bring in the\nwhole of the ExoPlayer library."},"605.47":{"start":"605.47","dur":"2.88","text":"And that will include support\nfor adaptive streaming formats"},"608.35":{"start":"608.35","dur":"1.32","text":"like DASH and HLS."},"609.67":{"start":"609.67","dur":"4.08","text":"And for that you can use this\nline in your build.gradle file."},"613.75":{"start":"613.75","dur":"1.74","text":"This is kind of the\nkitchen sink option."},"615.49":{"start":"615.49","dur":"2.79","text":"So the alternative is that\nyou can just pick and choose"},"618.28":{"start":"618.28","dur":"2.25","text":"the specific modules from\nthe ExoPlayer library"},"620.53":{"start":"620.53","dur":"1.2","text":"that you need."},"621.73":{"start":"621.73","dur":"2.16","text":"So for this example, I&#39;m\ngoing to add a dependency"},"623.89":{"start":"623.89","dur":"2.92","text":"on the core library, which\ncontains the main player"},"626.81":{"start":"626.81","dur":"4.16","text":"obviously, and also support\nfor regular media for like MP4s"},"630.97":{"start":"630.97","dur":"1.71","text":"and MP3s."},"632.68":{"start":"632.68","dur":"3.54","text":"And there&#39;s also a dependency\nhere on the UI library,"},"636.22":{"start":"636.22","dur":"2.91","text":"which brings in\nSimpleExoPlayerView, which"},"639.13":{"start":"639.13","dur":"3.827","text":"is a minimal but\ncustomizable player that you"},"642.96":{"start":"642.957","dur":"0.833","text":"can put in your app."},"646.45":{"start":"646.45","dur":"1.74","text":"So once we&#39;ve added\nthe dependency,"},"648.19":{"start":"648.19","dur":"2.28","text":"the next step is to\nadd some code snippets"},"650.47":{"start":"650.47","dur":"5.08","text":"to your activity, which will\ncreate a player and use it."},"655.55":{"start":"655.55","dur":"1.88","text":"So we have this\nExoPlayer factory,"},"657.43":{"start":"657.43","dur":"4.11","text":"which has several methods for\ncreating player instances."},"661.54":{"start":"661.54","dur":"1.74","text":"And this is the\neasiest to use one."},"663.28":{"start":"663.28","dur":"3.23","text":"It takes a context\nand a track selector."},"666.51":{"start":"666.51","dur":"1.63","text":"And for this simple\nuse case we can"},"668.14":{"start":"668.14","dur":"2.04","text":"use the\nDefaultTrackSelector which"},"670.18":{"start":"670.18","dur":"4.41","text":"has sensible defaults for almost\neverything you&#39;d want to do."},"674.59":{"start":"674.59","dur":"1.92","text":"Once we&#39;ve created the\nplayer, the next step"},"676.51":{"start":"676.51","dur":"2.61","text":"is to drop a view\ninto your app&#39;s layout"},"679.12":{"start":"679.12","dur":"2.76","text":"and then bind it to the player\nby calling the setPlayer"},"681.88":{"start":"681.88","dur":"2.4","text":"method."},"684.28":{"start":"684.28","dur":"2.91","text":"Now most importantly, we need to\ntell the player exactly what we"},"687.19":{"start":"687.19","dur":"1.23","text":"want to play."},"688.42":{"start":"688.42","dur":"2.52","text":"And for this we&#39;re going\nto use a MediaSource."},"690.94":{"start":"690.94","dur":"3.45","text":"In ExoPlayer, everything that\nyou can play is a MediaSource."},"694.39":{"start":"694.39","dur":"1.71","text":"It&#39;s responsible for\nloading the media"},"696.10":{"start":"696.1","dur":"2.85","text":"and providing it to the player."},"698.95":{"start":"698.95","dur":"3.03","text":"So we&#39;re going to create an\nExtractorMediaSource, which"},"701.98":{"start":"701.98","dur":"3.3","text":"has support for regular\nmedia files like MP4s, MP3s,"},"705.28":{"start":"705.28","dur":"2.56","text":"and Matroska files and so on."},"707.84":{"start":"707.84","dur":"1.82","text":"So you pass that to\nthe prepare method."},"709.66":{"start":"709.66","dur":"1.56","text":"And then we call\nsetPlayWhenReady"},"711.22":{"start":"711.22","dur":"2.57","text":"to tell the player that as\nsoon as buffering is completed"},"713.79":{"start":"713.79","dur":"4.72","text":"and playback can begin,\nthen playback should start."},"718.51":{"start":"718.51","dur":"2.13","text":"And finally it&#39;s very\nimportant that you release"},"720.64":{"start":"720.64","dur":"2.34","text":"the player when\nplayback is complete"},"722.98":{"start":"722.98","dur":"3.18","text":"because the player holds\nsystem resources like codecs"},"726.16":{"start":"726.16","dur":"2.46","text":"and it uses memory for buffers."},"728.62":{"start":"728.62","dur":"1.74","text":"So these code snippets\nwould generally"},"730.36":{"start":"730.36","dur":"3.196","text":"go in activity lifecycle\nmethods in your app."},"737.05":{"start":"737.05","dur":"2.19","text":"So this is a video\nof what you got."},"739.24":{"start":"739.24","dur":"3.9","text":"I&#39;ve got a nice video of\nthe skyline of London."},"743.14":{"start":"743.14","dur":"2.35","text":"And you can see there\nthat it had basic playback"},"745.49":{"start":"745.49","dur":"4.49","text":"controls like play and\npause button and a seek bar."},"749.98":{"start":"749.98","dur":"1.64","text":"So if you&#39;d like\nto try this out,"},"751.62":{"start":"751.62","dur":"2.74","text":"there&#39;s a codelab being\npublished as part of I\/O, which"},"754.36":{"start":"754.36","dur":"1.57","text":"you can go and try out."},"755.93":{"start":"755.93","dur":"1.64","text":"And there&#39;s also\na developer guide"},"757.57":{"start":"757.57","dur":"2.7","text":"on our project page, which will\nwalk you through these steps."},"763.02":{"start":"763.02","dur":"2.58","text":"So as I mentioned,\neverything that you can play"},"765.60":{"start":"765.6","dur":"1.56","text":"is a media source."},"767.16":{"start":"767.16","dur":"3.15","text":"And it&#39;s responsible for\nloading media for the player."},"770.31":{"start":"770.31","dur":"2.49","text":"And in that example we\nused ExtractorMediaSource,"},"772.80":{"start":"772.8","dur":"2.07","text":"but there are actually\nother more advanced media"},"774.87":{"start":"774.87","dur":"2.84","text":"sources available."},"777.71":{"start":"777.71","dur":"2.14","text":"So you may have\nheard of DASH, which"},"779.85":{"start":"779.85","dur":"2.1","text":"is a specification\nfor streaming which"},"781.95":{"start":"781.95","dur":"2.4","text":"allows for adaptation\nbetween qualities"},"784.35":{"start":"784.35","dur":"2.43","text":"to handle varying\nnetwork conditions."},"786.78":{"start":"786.78","dur":"4.38","text":"And we provide DASHMediaSource\nfor support for DASH."},"791.16":{"start":"791.16","dur":"2.79","text":"We also have a HLS media\nsource for supporting"},"793.95":{"start":"793.95","dur":"6.27","text":"HTTP live streaming and a media\nsource for SmoothStreaming."},"800.22":{"start":"800.22","dur":"2.25","text":"And with our recent\nv2 release, we&#39;ve"},"802.47":{"start":"802.47","dur":"3.42","text":"also added a new category\nof MediaSources which"},"805.89":{"start":"805.89","dur":"1.65","text":"are designed for composition."},"807.54":{"start":"807.54","dur":"2.16","text":"And by composition we\nmean joining together"},"809.70":{"start":"809.7","dur":"1.862","text":"other media sources."},"811.56":{"start":"811.562","dur":"1.208","text":"Why would we want to do this?"},"812.77":{"start":"812.77","dur":"1.333","text":"Well I&#39;ll go through an example."},"814.10":{"start":"814.103","dur":"3.497","text":"So let&#39;s say we&#39;ve got a\nvideo that we want to play"},"817.60":{"start":"817.6","dur":"2.5","text":"and also some subtitles,\nwhich are in a separate file,"},"820.10":{"start":"820.1","dur":"2.38","text":"an SRT file."},"822.48":{"start":"822.48","dur":"3.15","text":"In that case, we can create\nan ExtractorMediaSource"},"825.63":{"start":"825.63","dur":"3.96","text":"to load the video, a single\nsample media source, which"},"829.59":{"start":"829.59","dur":"2.46","text":"is going to load the SRT file."},"832.05":{"start":"832.05","dur":"3.57","text":"And then we&#39;re going to play the\nsubtitles alongside the video."},"835.62":{"start":"835.62","dur":"1.626","text":"Now you could try\nand do this yourself"},"837.25":{"start":"837.246","dur":"1.374","text":"by looking at the\nplayer position"},"838.62":{"start":"838.62","dur":"3","text":"and synchronizing the playback\nposition with the subtitles"},"841.62":{"start":"841.62","dur":"0.96","text":"that you&#39;re showing."},"842.58":{"start":"842.58","dur":"2.88","text":"But this is actually quite\ndifficult to do in general."},"845.46":{"start":"845.46","dur":"3.64","text":"It&#39;s much easier to use\na MergingMediaSource."},"849.10":{"start":"849.1","dur":"2.54","text":"And the MergingMediaSource\njust takes the video"},"851.64":{"start":"851.64","dur":"1.89","text":"you want to play\nand the subtitles"},"853.53":{"start":"853.53","dur":"1.717","text":"and handles everything for you."},"855.25":{"start":"855.247","dur":"1.583","text":"So it will handle\nthe synchronization."},"856.83":{"start":"856.83","dur":"2.25","text":"And then they&#39;ll be\nshown in the player."},"861.91":{"start":"861.91","dur":"4.14","text":"Another time you&#39;d use\ncomposition is for playlists."},"866.05":{"start":"866.05","dur":"4.23","text":"So in this case, say you\nhave an album of MP3s"},"870.28":{"start":"870.28","dur":"3.21","text":"that you want to\nplay back to back."},"873.49":{"start":"873.49","dur":"1.53","text":"You could try and\ndo this yourself"},"875.02":{"start":"875.02","dur":"3.18","text":"by playing the first stream\nand then swapping out"},"878.20":{"start":"878.2","dur":"1.26","text":"the source for the next one."},"879.46":{"start":"879.46","dur":"2.25","text":"But that&#39;s not going to be\ngreat because the player is"},"881.71":{"start":"881.71","dur":"3.75","text":"going to buffer when\nyou swap out the source."},"885.46":{"start":"885.46","dur":"4.23","text":"So we&#39;ve added a\nConcatenatingMediaSource,"},"889.69":{"start":"889.69","dur":"2.28","text":"which takes a list\nof sources that you"},"891.97":{"start":"891.97","dur":"2.34","text":"want to combine together\nand then plays them"},"894.31":{"start":"894.31","dur":"2.82","text":"back to back with a\nconsistent buffering policy."},"897.13":{"start":"897.13","dur":"2.52","text":"So if you tell the player to\nhave three seconds of media"},"899.65":{"start":"899.65","dur":"1.92","text":"buffered at all\ntimes, then it will"},"901.57":{"start":"901.57","dur":"2.46","text":"ensure that that is the\ncase even across transitions"},"904.03":{"start":"904.03","dur":"1.74","text":"from one source to the next."},"905.77":{"start":"905.77","dur":"2.47","text":"And this also supports\ngapless playback metadata."},"908.24":{"start":"908.24","dur":"2.39","text":"So you can play the album\nof MP3s with completely"},"910.63":{"start":"910.63","dur":"0.93","text":"seamless playback."},"914.69":{"start":"914.69","dur":"1.829","text":"And also composition\nis very flexible."},"916.52":{"start":"916.519","dur":"2.041","text":"So we can combine those\ntwo examples that we saw."},"918.56":{"start":"918.56","dur":"3.81","text":"So we concatenate a video\nwith the merged source"},"922.37":{"start":"922.37","dur":"3.06","text":"that we created earlier\nthat had subtitles."},"925.43":{"start":"925.43","dur":"2.61","text":"And if you do that, this is\nwhat you&#39;re going to get."},"928.04":{"start":"928.04","dur":"2.384","text":"So the first video plays."},"930.42":{"start":"930.424","dur":"1.666","text":"And then when the\nfirst video completes,"},"932.09":{"start":"932.09","dur":"2.349","text":"we get a seamless transition\nto the next video."},"934.44":{"start":"934.439","dur":"1.791","text":"And you can see the\nsubtitles are coming up"},"936.23":{"start":"936.23","dur":"0.875","text":"as we&#39;d expect there."},"941.07":{"start":"941.07","dur":"1.06","text":"So this is great."},"942.13":{"start":"942.13","dur":"4.81","text":"We can play these\ncompositions of media."},"946.94":{"start":"946.94","dur":"1.06","text":"So we implemented this."},"948.00":{"start":"948","dur":"2.43","text":"And then we thought,\nhold on a moment."},"950.43":{"start":"950.43","dur":"1.89","text":"We&#39;ve got this seekTo\nmethod on the player."},"952.32":{"start":"952.32","dur":"3.78","text":"But now we&#39;ve got playlists\nthat we want to play back"},"956.10":{"start":"956.1","dur":"1.62","text":"that have multiple sources."},"957.72":{"start":"957.72","dur":"2.67","text":"And a timestamp is not\nreally enough information"},"960.39":{"start":"960.39","dur":"3","text":"to know where you want\nto seek to anymore."},"963.39":{"start":"963.39","dur":"2.564","text":"So we thought about\nthis, and we thought"},"965.95":{"start":"965.954","dur":"2.416","text":"about other types of media\nsources you might want to play,"},"968.37":{"start":"968.37","dur":"1.83","text":"like live media sources."},"970.20":{"start":"970.2","dur":"4.53","text":"And we realized that we really\nneed a way to expose to the app"},"974.73":{"start":"974.73","dur":"1.89","text":"the structure of\nthe media source"},"976.62":{"start":"976.62","dur":"2.94","text":"and what media is available."},"979.56":{"start":"979.56","dur":"5.01","text":"So to solve the issue\nof needing to know which"},"984.57":{"start":"984.57","dur":"2.76","text":"source you want to seek\ninto, we added a parameter"},"987.33":{"start":"987.33","dur":"2.45","text":"that tells the player\nwhich of the source"},"989.78":{"start":"989.78","dur":"4.06","text":"is in the playlist\nyou want to seek to."},"993.84":{"start":"993.84","dur":"1.92","text":"And then we thought,\nwe&#39;re going to need"},"995.76":{"start":"995.76","dur":"1.66","text":"a description of\nthe media available."},"997.42":{"start":"997.42","dur":"4.34","text":"So we added a new data\nstructure called a timeline."},"1001.76":{"start":"1001.76","dur":"3.12","text":"And a timeline basically\nis a representation"},"1004.88":{"start":"1004.88","dur":"2.79","text":"of all the media that is\navailable in a media source."},"1007.67":{"start":"1007.67","dur":"2.55","text":"And it consists of\na list of windows."},"1010.22":{"start":"1010.22","dur":"1.47","text":"Each of those\nwindows corresponds"},"1011.69":{"start":"1011.69","dur":"1.95","text":"to one item in a playlist."},"1013.64":{"start":"1013.64","dur":"2.35","text":"And it describes which\nparts of the media"},"1015.99":{"start":"1015.99","dur":"1.935","text":"you can seek to at\nany given moment."},"1017.93":{"start":"1017.925","dur":"1.625","text":"So I&#39;m going to show\nan example of this"},"1019.55":{"start":"1019.55","dur":"1.81","text":"to make it a bit clearer."},"1021.36":{"start":"1021.36","dur":"2.18","text":"So let&#39;s imagine we&#39;ve\ngot a single source where"},"1023.54":{"start":"1023.54","dur":"1.799","text":"you can seek anywhere."},"1025.34":{"start":"1025.339","dur":"2.891","text":"The red line here\nrepresents one window."},"1028.23":{"start":"1028.23","dur":"3.379","text":"The dot at the left\nhand side represents"},"1031.61":{"start":"1031.609","dur":"3.99","text":"the default start position for\nthis media source is at zero."},"1035.60":{"start":"1035.599","dur":"1.651","text":"So when the player\nreaches the source,"},"1037.25":{"start":"1037.25","dur":"3.24","text":"if it&#39;s in a concatenation,\nthen it will go to time zero."},"1040.49":{"start":"1040.49","dur":"1.5","text":"And the window\nextends all the way"},"1041.99":{"start":"1041.99","dur":"2.836","text":"to the duration of\nthe media source."},"1044.83":{"start":"1044.826","dur":"3.374","text":"A more interesting case is if\nyou concatenate two sources"},"1048.20":{"start":"1048.2","dur":"0.687","text":"together."},"1048.89":{"start":"1048.887","dur":"1.833","text":"And in this case, you\nend up with a timeline"},"1050.72":{"start":"1050.72","dur":"1.56","text":"that has two windows."},"1052.28":{"start":"1052.28","dur":"1.92","text":"And as you can see,\nfor both windows"},"1054.20":{"start":"1054.2","dur":"4.12","text":"the start position is at the\nbeginning of that source."},"1058.32":{"start":"1058.32","dur":"3","text":"What about if we have\na live media source?"},"1061.32":{"start":"1061.32","dur":"2.86","text":"Well in this case, the\ntimeline is actually dynamic."},"1064.18":{"start":"1064.18","dur":"2.75","text":"So as the live event\nprogresses, more media"},"1066.93":{"start":"1066.93","dur":"1.98","text":"is becoming available\nin the window."},"1068.91":{"start":"1068.91","dur":"1.95","text":"And you can see that\nthe default position"},"1070.86":{"start":"1070.86","dur":"2.25","text":"is tracking the live edge."},"1073.11":{"start":"1073.11","dur":"1.92","text":"And then when the\nlive event completes,"},"1075.03":{"start":"1075.03","dur":"2.78","text":"the default position snaps\nback to the beginning"},"1077.81":{"start":"1077.81","dur":"1.854","text":"so that this becomes\na regular stream where"},"1079.66":{"start":"1079.664","dur":"1.666","text":"playback begins at\nthe beginning and you"},"1081.33":{"start":"1081.33","dur":"1.08","text":"can seek to any position."},"1085.33":{"start":"1085.325","dur":"1.625","text":"And we can build on\ntop of this to have"},"1086.95":{"start":"1086.95","dur":"2.79","text":"concatenations of regular\nstreams and live streams."},"1089.74":{"start":"1089.74","dur":"1.66","text":"And this works in\nthe way you&#39;d expect."},"1091.40":{"start":"1091.4","dur":"2.24","text":"So when you concatenate\nsources, you"},"1093.64":{"start":"1093.64","dur":"1.56","text":"end up with a time\nline that consists"},"1095.20":{"start":"1095.2","dur":"1.764","text":"of the concatenation\nof the windows"},"1096.96":{"start":"1096.964","dur":"1.166","text":"of those individual sources."},"1100.96":{"start":"1100.96","dur":"2.06","text":"So you&#39;ll see this\ntimeline exposed"},"1103.02":{"start":"1103.02","dur":"1.86","text":"in ExoPlayer&#39;s top level API."},"1104.88":{"start":"1104.88","dur":"2.13","text":"You can get the\ncurrent timeline."},"1107.01":{"start":"1107.01","dur":"2.97","text":"You can pass in a window index\nwhen you seek the player."},"1109.98":{"start":"1109.98","dur":"2.76","text":"So you can say please seek to\nthe second item in the playlist"},"1112.74":{"start":"1112.74","dur":"1.5","text":"at a particular offset."},"1114.24":{"start":"1114.24","dur":"2.94","text":"And you can inspect\ndetails about these windows"},"1117.18":{"start":"1117.18","dur":"4.087","text":"like where the window\nstarts and how long it is."},"1121.27":{"start":"1121.267","dur":"2.333","text":"Now back over to Ollie to\ntalk a bit about the internals"},"1123.60":{"start":"1123.6","dur":"0.672","text":"of the players."},"1129.61":{"start":"1129.614","dur":"1.416","text":"OLIVER WOODMAN:\nSo as Andrew says,"},"1131.03":{"start":"1131.03","dur":"4.17","text":"we&#39;re now going to dive in\na bit deeper to ExoPlayer,"},"1135.20":{"start":"1135.2","dur":"3.24","text":"and really talk about\nwhat happens internally"},"1138.44":{"start":"1138.44","dur":"1.4","text":"during a playback."},"1139.84":{"start":"1139.84","dur":"1.75","text":"And the reason that\nwe&#39;re going to do this"},"1141.59":{"start":"1141.59","dur":"2.125","text":"is that after we&#39;ve\ntalked about some"},"1143.72":{"start":"1143.715","dur":"1.375","text":"of the internal\ncomponents, we&#39;re"},"1145.09":{"start":"1145.09","dur":"3.6","text":"then going to go and talk about\nhow we might customize those"},"1148.69":{"start":"1148.69","dur":"4.17","text":"to very fine tune the player\nto your specific use case."},"1152.86":{"start":"1152.86","dur":"1.75","text":"So here we have an\nExoPlayer and it&#39;s just"},"1154.61":{"start":"1154.61","dur":"3.81","text":"received its MediaSource\nthat it&#39;s going to play back."},"1158.42":{"start":"1158.42","dur":"3.18","text":"So what are the important\ninternal components?"},"1161.60":{"start":"1161.6","dur":"1.68","text":"Well the first\nimportant component"},"1163.28":{"start":"1163.28","dur":"2.75","text":"that we should\nmention are renderers."},"1166.03":{"start":"1166.03","dur":"1.96","text":"A renderer is\nresponsible for rendering"},"1167.99":{"start":"1167.99","dur":"2.04","text":"a single component of media."},"1170.03":{"start":"1170.03","dur":"4.56","text":"So a VideoRenderer will\ndecode and display just video."},"1174.59":{"start":"1174.59","dur":"3.09","text":"And an AudioRenderer similarly\nwill decode and output"},"1177.68":{"start":"1177.68","dur":"2.03","text":"just audio."},"1179.71":{"start":"1179.71","dur":"1.422","text":"And a real ExoPlayer\ninstance will"},"1181.13":{"start":"1181.132","dur":"2.458","text":"have additional renderers for\nthings like text and metadata"},"1183.59":{"start":"1183.59","dur":"0.5","text":"as well."},"1184.09":{"start":"1184.09","dur":"2.53","text":"But we&#39;re going to omit\nthose from this diagram just"},"1186.62":{"start":"1186.62","dur":"2.34","text":"for simplicity."},"1188.96":{"start":"1188.96","dur":"3.425","text":"Another component that is\nimportant is a TrackSelector."},"1192.39":{"start":"1192.385","dur":"1.885","text":"A media source may\nactually expose"},"1194.27":{"start":"1194.27","dur":"3.96","text":"multiple tracks that could\nbe played back by the player."},"1198.23":{"start":"1198.23","dur":"2.91","text":"Particularly if you have a\nDASH or HLS adaptive playback,"},"1201.14":{"start":"1201.14","dur":"2.79","text":"the MediaSource may actually\nexpose multiple video streams"},"1203.93":{"start":"1203.93","dur":"3.42","text":"at different resolutions, and\nmaybe multiple audio languages"},"1207.35":{"start":"1207.35","dur":"1.181","text":"as well."},"1208.53":{"start":"1208.531","dur":"1.499","text":"And its the job of\nthe TrackSelector"},"1210.03":{"start":"1210.03","dur":"1.76","text":"to select the subset\nof those tracks"},"1211.79":{"start":"1211.79","dur":"4.5","text":"that should be buffered\nand played by the player."},"1216.29":{"start":"1216.29","dur":"3.055","text":"The last component that we need\nto talk about is a LoadControl."},"1219.35":{"start":"1219.345","dur":"2.895","text":"A LoadControl\nactually has two jobs."},"1222.24":{"start":"1222.24","dur":"2.77","text":"Its first job is to\ntell the MediaSource"},"1225.01":{"start":"1225.01","dur":"2.88","text":"whether it should be buffering\nat this point in time."},"1227.89":{"start":"1227.89","dur":"1.94","text":"And this is indicated\nin this diagram"},"1229.83":{"start":"1229.83","dur":"2.552","text":"by the green dots on\nthe left hand side."},"1232.38":{"start":"1232.382","dur":"1.708","text":"So since we haven&#39;t\nstarted playback yet,"},"1234.09":{"start":"1234.09","dur":"1.447","text":"we don&#39;t have anything buffered."},"1235.54":{"start":"1235.537","dur":"2.333","text":"And therefore it&#39;s green to\nrepresent that a MediaSource"},"1237.87":{"start":"1237.87","dur":"1.95","text":"should be buffering."},"1239.82":{"start":"1239.82","dur":"2.7","text":"Its second job is to tell\nthe player when playback"},"1242.52":{"start":"1242.52","dur":"1.68","text":"is actually allowed to start."},"1244.20":{"start":"1244.2","dur":"2.414","text":"This is represented by\nthe right hand side dot."},"1246.61":{"start":"1246.614","dur":"1.666","text":"And because we don&#39;t\nhave any media yet,"},"1248.28":{"start":"1248.28","dur":"5.63","text":"it&#39;s obviously too soon to start\nplayback and therefore is red."},"1253.91":{"start":"1253.91","dur":"3.55","text":"One of the components that we\nshould mention are DataSources."},"1257.46":{"start":"1257.46","dur":"3.03","text":"MediaSources use DataSources\nto load the actual media"},"1260.49":{"start":"1260.49","dur":"3.11","text":"that I&#39;m going to provide\nto the player for playback."},"1266.84":{"start":"1266.84","dur":"3.79","text":"So I&#39;ve kind of given you\nsome major components."},"1270.63":{"start":"1270.63","dur":"1.75","text":"But let&#39;s talk a\nlittle bit about how"},"1272.38":{"start":"1272.38","dur":"4.032","text":"these components actually\ninteract during a playback."},"1276.41":{"start":"1276.412","dur":"1.758","text":"Well we haven&#39;t\nbuffered anything yet,"},"1278.17":{"start":"1278.17","dur":"1.86","text":"and LoadControl is\ntelling the MediaSource"},"1280.03":{"start":"1280.03","dur":"2.19","text":"that it should be buffering."},"1282.22":{"start":"1282.22","dur":"2.46","text":"And so the MediaSource is\ngoing to start loading data"},"1284.68":{"start":"1284.68","dur":"3.59","text":"through its DataSource."},"1288.27":{"start":"1288.27","dur":"1.63","text":"And after it&#39;s\nloaded enough media,"},"1289.90":{"start":"1289.9","dur":"3.682","text":"probably not very much, just a\nheader for a normal media file,"},"1293.58":{"start":"1293.582","dur":"1.958","text":"the MediaSource is going\nto be able to work out"},"1295.54":{"start":"1295.54","dur":"2.88","text":"what tracks it can actually\nexpose to the player."},"1298.42":{"start":"1298.42","dur":"3.829","text":"And it does this by exposing\nsomething called TrackGroups."},"1302.25":{"start":"1302.249","dur":"2.041","text":"Now we know the TrackSelector\nis the thing that&#39;s"},"1304.29":{"start":"1304.29","dur":"3.192","text":"going to choose which of\nthe tracks to actually play."},"1307.48":{"start":"1307.482","dur":"2.605","text":"But the TrackSelector\nneeds something else."},"1310.09":{"start":"1310.087","dur":"1.583","text":"And the reason it\nneeds something else"},"1311.67":{"start":"1311.67","dur":"2.73","text":"is that different devices\nhave different capabilities."},"1314.40":{"start":"1314.4","dur":"2.07","text":"And in particular\nthe VideoRenderer"},"1316.47":{"start":"1316.47","dur":"3.62","text":"may only be able to decode up\nto a particular resolution."},"1320.09":{"start":"1320.09","dur":"4.66","text":"And so even if the MediaSource\nexposes a 4K video stream,"},"1324.75":{"start":"1324.75","dur":"1.845","text":"if you&#39;re on a low\nend device, it&#39;s"},"1326.60":{"start":"1326.595","dur":"1.875","text":"not going to make sense\nfor the TrackSelector"},"1328.47":{"start":"1328.47","dur":"3.03","text":"to actually choose that stream."},"1331.50":{"start":"1331.5","dur":"2.31","text":"And the way we represent\nthese kind of capabilities"},"1333.81":{"start":"1333.81","dur":"2.7","text":"in the player is we have each\nrenderer expose something"},"1336.51":{"start":"1336.51","dur":"2.07","text":"called a\nRendererCapabilities object"},"1338.58":{"start":"1338.58","dur":"5.53","text":"that describes specifically what\nit&#39;s actually able to handle."},"1344.11":{"start":"1344.11","dur":"2.31","text":"So what happens next\nis that the TrackGroups"},"1346.42":{"start":"1346.42","dur":"3.3","text":"and the RendererCapabilities\nare fed into the TrackSelector."},"1349.72":{"start":"1349.72","dur":"1.41","text":"The TrackSelector\ndoes its magic."},"1351.13":{"start":"1351.13","dur":"1.95","text":"It produces a selection."},"1353.08":{"start":"1353.08","dur":"4.32","text":"And that selection goes\nback to the MediaSource."},"1357.40":{"start":"1357.4","dur":"1.519","text":"At this point the\nMediaSource knows"},"1358.92":{"start":"1358.919","dur":"1.541","text":"what it&#39;s going to\nbuffer, because it"},"1360.46":{"start":"1360.46","dur":"1.89","text":"knows what the\ntrack selection is,"},"1362.35":{"start":"1362.35","dur":"3.26","text":"and so it allocates\nsome buffers."},"1365.61":{"start":"1365.61","dur":"1.56","text":"Of course we still\nhaven&#39;t actually"},"1367.17":{"start":"1367.17","dur":"2.07","text":"loaded any useful\nmedia for playback."},"1369.24":{"start":"1369.24","dur":"4.19","text":"The LoadControl is still\ntelling the MediaSource to load."},"1373.43":{"start":"1373.43","dur":"3.46","text":"And therefore the MediaSource\ncontinues to load data"},"1376.89":{"start":"1376.89","dur":"1.95","text":"and it starts to\nfill its buffers."},"1378.84":{"start":"1378.84","dur":"1.86","text":"And what you can see\nhere is that as soon"},"1380.70":{"start":"1380.7","dur":"2.67","text":"as these buffers\nstart to get full,"},"1383.37":{"start":"1383.37","dur":"2.85","text":"the renderers actually start\nconsuming from those buffers"},"1386.22":{"start":"1386.22","dur":"2.22","text":"and feeding that media data\nthrough their decoders,"},"1388.44":{"start":"1388.44","dur":"3.06","text":"getting ready for playback."},"1391.50":{"start":"1391.5","dur":"2.06","text":"So at this point we\nhave some media buffers."},"1393.56":{"start":"1393.56","dur":"2.31","text":"The renderers have\ndecoded a bit of media,"},"1395.87":{"start":"1395.87","dur":"2.72","text":"so they&#39;re kind of\nprimed and ready to go."},"1398.59":{"start":"1398.59","dur":"1.96","text":"And so LoadControl\nmay at this point"},"1400.55":{"start":"1400.55","dur":"1.57","text":"actually start the playback."},"1402.12":{"start":"1402.12","dur":"3.16","text":"So that little red\ncircle has gone green."},"1405.28":{"start":"1405.28","dur":"3.82","text":"And of course the MediaSource\nis continuing to buffer."},"1409.10":{"start":"1409.1","dur":"3.3","text":"And at this point we&#39;ve actually\nbuffered quite a lot of media."},"1412.40":{"start":"1412.4","dur":"3.606","text":"So these buffers on the left\nhand side are quite full."},"1416.01":{"start":"1416.006","dur":"3.364","text":"Of course we don&#39;t want to\nbuffer arbitrarily far ahead."},"1419.37":{"start":"1419.37","dur":"2.659","text":"So the LoadControl may stop\nbuffering at this point."},"1422.03":{"start":"1422.029","dur":"1.791","text":"Because playbacks\ncontinuing, the renderers"},"1423.82":{"start":"1423.82","dur":"1.57","text":"are still consuming."},"1425.39":{"start":"1425.39","dur":"2.22","text":"And therefore these buffers\nare draining back down"},"1427.61":{"start":"1427.61","dur":"2.492","text":"to a lower level."},"1430.10":{"start":"1430.102","dur":"1.958","text":"Of course we don&#39;t want\nthe buffers to run out,"},"1432.06":{"start":"1432.06","dur":"3.02","text":"so the LoadControl might\ntoggle buffering on again."},"1435.08":{"start":"1435.08","dur":"1.6","text":"And so you see this\npattern emerging"},"1436.68":{"start":"1436.68","dur":"2.17","text":"of data being pulled\nthrough the DataSource"},"1438.85":{"start":"1438.85","dur":"3.53","text":"into MediaSource and\nout to the renderers."},"1442.38":{"start":"1442.38","dur":"1.94","text":"One additional complexity\nto keep in mind"},"1444.32":{"start":"1444.32","dur":"2.125","text":"when you&#39;re thinking about\nthis is, as Andrew said,"},"1446.45":{"start":"1446.445","dur":"3.405","text":"a MediaSource can actually be a\nconcatenation of, for example,"},"1449.85":{"start":"1449.85","dur":"1.855","text":"different videos."},"1451.71":{"start":"1451.705","dur":"2.375","text":"And those videos may have a\ndifferent selection of tracks"},"1454.08":{"start":"1454.08","dur":"2.05","text":"available."},"1456.13":{"start":"1456.13","dur":"1.89","text":"And so as this\nprocess is continuing,"},"1458.02":{"start":"1458.02","dur":"2.09","text":"you may actually get\nadditional track selections"},"1460.11":{"start":"1460.11","dur":"3.34","text":"taking place at the same time."},"1463.45":{"start":"1463.45","dur":"2.496","text":"And so here we have the\nplayback continuing."},"1465.95":{"start":"1465.946","dur":"1.874","text":"The buffers are filling\nup and draining down."},"1467.82":{"start":"1467.82","dur":"2.7","text":"And you see this pattern of\ndata being intermittently read"},"1470.52":{"start":"1470.52","dur":"2.73","text":"through the DataSource\nand continuously consumed"},"1473.25":{"start":"1473.25","dur":"1.205","text":"by the renderers."},"1479.68":{"start":"1479.68","dur":"3.87","text":"So now we know a bit about how\nthe important components work"},"1483.55":{"start":"1483.55","dur":"2.31","text":"during a playback."},"1485.86":{"start":"1485.86","dur":"2.775","text":"Let&#39;s talk a little bit\nabout how we might customize"},"1488.64":{"start":"1488.635","dur":"3.805","text":"those internal behaviors."},"1492.44":{"start":"1492.44","dur":"3.11","text":"So here is code snippet\nAndrew showed you earlier."},"1495.55":{"start":"1495.55","dur":"3.682","text":"We&#39;re creating an ExoPlayer\nwith ExoPlayerFactory."},"1499.23":{"start":"1499.232","dur":"1.958","text":"But there are actually\nmore complicated methods"},"1501.19":{"start":"1501.19","dur":"3.06","text":"for creating an ExoPlayer\nThis is one of them."},"1504.25":{"start":"1504.25","dur":"2.74","text":"And you can see that what we&#39;re\ninjecting into this player"},"1506.99":{"start":"1506.99","dur":"2.9","text":"instance are exactly the\ncomponents that we&#39;ve just"},"1509.89":{"start":"1509.89","dur":"2.85","text":"been talking about-- so the\nrenderers, a TrackSelector,"},"1512.74":{"start":"1512.74","dur":"0.87","text":"and a LoadControl."},"1513.61":{"start":"1513.61","dur":"4.549","text":"And here we&#39;re just inserting\ndefault implementations."},"1518.16":{"start":"1518.159","dur":"2.541","text":"So let&#39;s look at how we might\nfine tune the player by pulling"},"1520.70":{"start":"1520.7","dur":"1.17","text":"one of those out."},"1521.87":{"start":"1521.87","dur":"1.44","text":"So we&#39;ll look at\nthe LoadControl."},"1523.31":{"start":"1523.31","dur":"4.17","text":"And here we&#39;re still using\nthe default implementation."},"1527.48":{"start":"1527.48","dur":"3.63","text":"But we can actually pass some\nvariables into the constructor"},"1531.11":{"start":"1531.11","dur":"2.29","text":"to manipulate its behavior."},"1533.40":{"start":"1533.4","dur":"1.55","text":"So this default\nLoadControl is saying"},"1534.95":{"start":"1534.95","dur":"3.36","text":"that it wants between 15 and\n30 seconds in the buffer,"},"1538.31":{"start":"1538.31","dur":"1.53","text":"and it wants to\nstart playback when"},"1539.84":{"start":"1539.84","dur":"4.17","text":"there&#39;s 2.5 seconds buffered."},"1544.01":{"start":"1544.01","dur":"1.68","text":"So what does that\nlooks like in terms"},"1545.69":{"start":"1545.69","dur":"1.92","text":"of wall clock time\nversus duration"},"1547.61":{"start":"1547.61","dur":"2.009","text":"of media in the buffer?"},"1549.62":{"start":"1549.619","dur":"1.291","text":"Well the buffer starts to fill."},"1550.91":{"start":"1550.91","dur":"2.64","text":"And at 2.5 seconds we\nallow playback to start,"},"1553.55":{"start":"1553.55","dur":"3.26","text":"as indicated by the\nlittle orange dot."},"1556.81":{"start":"1556.81","dur":"2.83","text":"And the LoadControl allows\nbuffering to continue up"},"1559.64":{"start":"1559.64","dur":"2.644","text":"until 30 seconds."},"1562.28":{"start":"1562.284","dur":"1.916","text":"Buffering will then be\nturned off for a while."},"1564.20":{"start":"1564.2","dur":"1.833","text":"And the MediaSource\nbuffers would drain down"},"1566.03":{"start":"1566.033","dur":"3.053","text":"to 15 seconds, which\nis the lower limit."},"1569.09":{"start":"1569.086","dur":"1.624","text":"And buffering would\nthen turn on again."},"1570.71":{"start":"1570.71","dur":"2.16","text":"And so you get this\nkind of sawtooth pattern"},"1572.87":{"start":"1572.87","dur":"2.93","text":"in terms of buffering behavior."},"1575.80":{"start":"1575.8","dur":"1.75","text":"So at this point it&#39;s\nprobably quite clear"},"1577.55":{"start":"1577.55","dur":"2.6","text":"that you can start to really\ninfluence this behavior."},"1580.15":{"start":"1580.15","dur":"2.871","text":"So you could change this\nnumber from 15 to 25"},"1583.02":{"start":"1583.021","dur":"1.999","text":"if you&#39;re not comfortable\nwith allowing a buffer"},"1585.02":{"start":"1585.02","dur":"2.14","text":"to drain that low."},"1587.16":{"start":"1587.16","dur":"2.54","text":"And because we understand how\ndefault LoadControl works,"},"1589.70":{"start":"1589.7","dur":"2.22","text":"we can show the new graph."},"1591.92":{"start":"1591.92","dur":"3","text":"So here the buffer is kept\nmore full at all points"},"1594.92":{"start":"1594.92","dur":"1.44","text":"during the playback."},"1596.36":{"start":"1596.36","dur":"3.974","text":"And buffering is toggled on\nand off far more frequently."},"1600.33":{"start":"1600.334","dur":"1.416","text":"We could also\ndecide we might want"},"1601.75":{"start":"1601.75","dur":"3.48","text":"to be more conservative when\nwe allow playback to start."},"1605.23":{"start":"1605.23","dur":"4.65","text":"So we bump up the value from\n2.5 seconds to 10 seconds."},"1609.88":{"start":"1609.88","dur":"1.77","text":"And again we can\nunderstand the difference"},"1611.65":{"start":"1611.65","dur":"3.57","text":"in terms of this graph."},"1615.22":{"start":"1615.22","dur":"2.17","text":"We can now take our\nmodified default LoadControl"},"1617.39":{"start":"1617.39","dur":"3.51","text":"and inject it back\ninto the player."},"1620.90":{"start":"1620.9","dur":"2.1","text":"So what if\nLoadControl just isn&#39;t"},"1623.00":{"start":"1623","dur":"3.464","text":"flexible enough for the actual\nbuffering policy that you want?"},"1626.46":{"start":"1626.464","dur":"1.666","text":"Well you can go further\nand you can just"},"1628.13":{"start":"1628.13","dur":"3.342","text":"implement your own\nLoadControl from scratch."},"1631.47":{"start":"1631.472","dur":"1.458","text":"So one of the\nmethods that you have"},"1632.93":{"start":"1632.93","dur":"3.12","text":"to implement if you do this is\ncalled shouldContinueLoading."},"1636.05":{"start":"1636.05","dur":"1.05","text":"It returns a boolean."},"1637.10":{"start":"1637.1","dur":"1.9","text":"It&#39;s polled during playback."},"1639.00":{"start":"1639","dur":"1.79","text":"And this is exactly\nthe method that&#39;s"},"1640.79":{"start":"1640.79","dur":"2.85","text":"actually controlling whether\nthe MediaSource buffers or not."},"1643.64":{"start":"1643.64","dur":"3.39","text":"And you could implement all\nkinds of behaviors and logics"},"1647.03":{"start":"1647.03","dur":"4.19","text":"in your own implementation."},"1651.22":{"start":"1651.22","dur":"2.59","text":"You can do similar things with\nthe TrackSelector as well."},"1653.81":{"start":"1653.81","dur":"3.47","text":"So in this case, we can\nactually get some parameters,"},"1657.28":{"start":"1657.28","dur":"2.82","text":"and we can start manipulating\nthe way the default"},"1660.10":{"start":"1660.1","dur":"2.22","text":"TrackSelector actually\nchooses its tracks."},"1662.32":{"start":"1662.32","dur":"5.642","text":"So here we&#39;re limiting the\nvideo tracks to SD, so 480p."},"1667.96":{"start":"1667.962","dur":"2.458","text":"And you might want to do this\nif you know that your user is"},"1670.42":{"start":"1670.42","dur":"2.88","text":"on a metered mobile connection."},"1673.30":{"start":"1673.3","dur":"1.89","text":"And even if they have\nreally great bandwidth,"},"1675.19":{"start":"1675.19","dur":"2.77","text":"you probably don&#39;t want to use\nall of their data very quickly."},"1677.96":{"start":"1677.96","dur":"2.03","text":"So you might want to\nkeep a cap on the quality"},"1679.99":{"start":"1679.99","dur":"1.95","text":"that you deliver."},"1681.94":{"start":"1681.94","dur":"3.007","text":"Similarly if you know\nthat your user is German,"},"1684.95":{"start":"1684.947","dur":"2.333","text":"you might select a preferred\naudio language for the case"},"1687.28":{"start":"1687.28","dur":"1.92","text":"where there are multiple\naudio tracks exposed"},"1689.20":{"start":"1689.2","dur":"1.86","text":"by the MediaSource."},"1691.06":{"start":"1691.06","dur":"2.01","text":"And you can certainly\nmodify parameters back"},"1693.07":{"start":"1693.07","dur":"3.11","text":"on the selector to actually\nactivate this new behavior."},"1699.12":{"start":"1699.12","dur":"2.569","text":"Again if the default\nimplementation of TrackSelector"},"1701.69":{"start":"1701.689","dur":"2.291","text":"isn&#39;t suitable, you can go\na step further and implement"},"1703.98":{"start":"1703.98","dur":"1.874","text":"your own TrackSelector."},"1705.85":{"start":"1705.854","dur":"1.666","text":"One of the methods\nyou need to implement"},"1707.52":{"start":"1707.52","dur":"1.95","text":"if you do this is selectTracks."},"1709.47":{"start":"1709.47","dur":"2.82","text":"And hopefully you can map\nthe signature of this method"},"1712.29":{"start":"1712.29","dur":"2.32","text":"back to the diagram\nwe saw earlier."},"1714.61":{"start":"1714.61","dur":"2.27","text":"It&#39;s receiving the\ncapabilities from the renderers"},"1716.88":{"start":"1716.88","dur":"1.89","text":"and the TrackGroups\nfrom the MediaSource,"},"1718.77":{"start":"1718.77","dur":"4.05","text":"and it&#39;s generating a selection."},"1722.82":{"start":"1722.82","dur":"1.93","text":"And of course the same\ntricks can be applied"},"1724.75":{"start":"1724.75","dur":"2.01","text":"for the renderers as well."},"1726.76":{"start":"1726.76","dur":"2.16","text":"Implementing your own\nVideoRenderer from scratch"},"1728.92":{"start":"1728.92","dur":"2.37","text":"is a pretty advanced\ncustomization,"},"1731.29":{"start":"1731.29","dur":"1.9","text":"but you could do it if\nyou really wanted to"},"1733.19":{"start":"1733.19","dur":"3.35","text":"and you kind of have a good\nhandle on exactly what you"},"1736.54":{"start":"1736.54","dur":"2.96","text":"have to do to achieve that."},"1739.50":{"start":"1739.5","dur":"2.31","text":"And you could extend\ndefault RenderersFactory,"},"1741.81":{"start":"1741.81","dur":"2.13","text":"override the\nbuildVideoRenderers method,"},"1743.94":{"start":"1743.94","dur":"2.971","text":"and actually inject your own\nVideoRenderer into the player"},"1746.91":{"start":"1746.911","dur":"2.249","text":"instead of the default that\nwould normally be created."},"1752.52":{"start":"1752.52","dur":"2.02","text":"ANDREW LEWIS: OK, great."},"1754.54":{"start":"1754.54","dur":"2.4","text":"So hopefully you can\nsee a pattern emerging"},"1756.94":{"start":"1756.94","dur":"2.9","text":"in each of the examples\nof customization"},"1759.84":{"start":"1759.84","dur":"1.76","text":"that Ollie talked about."},"1761.60":{"start":"1761.6","dur":"2.24","text":"So the first step\nwas establishing"},"1763.84":{"start":"1763.84","dur":"2.73","text":"which component in the\nplayer we need to customize,"},"1766.57":{"start":"1766.57","dur":"4.59","text":"whether it&#39;s the TrackSelector\nor the LoadControl."},"1771.16":{"start":"1771.16","dur":"2.34","text":"Then you look at the\nAPI for that component"},"1773.50":{"start":"1773.5","dur":"4.26","text":"and see if there&#39;s a way to\ncustomize its behavior using,"},"1777.76":{"start":"1777.76","dur":"3.27","text":"say, a different parameter,\nas we did with LoadControl."},"1781.03":{"start":"1781.03","dur":"1.83","text":"If that&#39;s not a\npossibility, then you"},"1782.86":{"start":"1782.86","dur":"1.86","text":"might be able to\nextend or actually"},"1784.72":{"start":"1784.72","dur":"2.595","text":"implement your own version of\nthis component from scratch."},"1790.09":{"start":"1790.09","dur":"2.61","text":"So I&#39;m just going to do one\nmore example of customization"},"1792.70":{"start":"1792.7","dur":"2.86","text":"on the MediaSource\nside this time."},"1795.56":{"start":"1795.56","dur":"2.6","text":"So imagine that we need\nto send an authorization"},"1798.16":{"start":"1798.16","dur":"5.766","text":"header with each HTTP request\nthat a MediaSource makes."},"1803.93":{"start":"1803.926","dur":"1.374","text":"Well, we know that\nwe are passing"},"1805.30":{"start":"1805.3","dur":"3.33","text":"in a HttpDataSourceFactory."},"1808.63":{"start":"1808.63","dur":"3.15","text":"And this has a convenient method\nto get the default request"},"1811.78":{"start":"1811.78","dur":"1.95","text":"properties."},"1813.73":{"start":"1813.73","dur":"2.4","text":"And by getting the default\nrequest properties,"},"1816.13":{"start":"1816.13","dur":"3.78","text":"we can actually set a new header\nto set the authorization header"},"1819.91":{"start":"1819.91","dur":"1.83","text":"on the HTTP request."},"1821.74":{"start":"1821.74","dur":"3.21","text":"And once you&#39;ve done that, you\npass the httpDataSourceFactory"},"1824.95":{"start":"1824.95","dur":"1.23","text":"into the MediaSource."},"1826.18":{"start":"1826.18","dur":"2.55","text":"And that header will appear\non all requests that it makes."},"1831.63":{"start":"1831.63","dur":"2.31","text":"As another example,\nlet&#39;s say that you"},"1833.94":{"start":"1833.94","dur":"2.89","text":"know that users are going to\nrewind videos quite a lot,"},"1836.83":{"start":"1836.83","dur":"3.88","text":"so you want to add a cache\nin so that the player doesn&#39;t"},"1840.71":{"start":"1840.71","dur":"3.6","text":"repeatedly load the same\nmedia off the network."},"1844.31":{"start":"1844.31","dur":"3.34","text":"ExoPlayer has a simple\ncache which you can use."},"1847.65":{"start":"1847.65","dur":"1.61","text":"And in this example\nI&#39;m posting in a"},"1849.26":{"start":"1849.26","dur":"2.32","text":"LeastRecentlyUsedCacheEvictor."},"1851.58":{"start":"1851.58","dur":"1.74","text":"So the way this is\ngoing to work is"},"1853.32":{"start":"1853.32","dur":"2.08","text":"the cache has a maximum size."},"1855.40":{"start":"1855.4","dur":"2.66","text":"But if the media is\nlonger than that, then"},"1858.06":{"start":"1858.06","dur":"1.8","text":"when the media\nfinishes, if they&#39;ve"},"1859.86":{"start":"1859.86","dur":"1.23","text":"watched the media\nall the way through,"},"1861.09":{"start":"1861.09","dur":"1.374","text":"then the cache\nwill actually have"},"1862.46":{"start":"1862.464","dur":"2.046","text":"started to evict the\nvery beginning of it."},"1867.24":{"start":"1867.24","dur":"3.96","text":"So this cache gets passed\ninto a CacheDataSourceFactory."},"1871.20":{"start":"1871.2","dur":"2.88","text":"And it also needs to take\na normal DataSource which"},"1874.08":{"start":"1874.08","dur":"4.5","text":"is used if there&#39;s a cache miss\nand also to populate the cache."},"1878.58":{"start":"1878.58","dur":"1.86","text":"And then you pass the\nCacheDataSourceFactory"},"1880.44":{"start":"1880.44","dur":"1.98","text":"to the ExtractorMediaSource."},"1882.42":{"start":"1882.42","dur":"2.834","text":"So hopefully to make this\na little bit clearer,"},"1885.25":{"start":"1885.254","dur":"1.666","text":"let&#39;s see how it fits\nin with the player"},"1886.92":{"start":"1886.92","dur":"2.37","text":"architecture we saw earlier."},"1889.29":{"start":"1889.29","dur":"2.82","text":"This cache is actually going\nto sit between the MediaSource"},"1892.11":{"start":"1892.11","dur":"1.92","text":"and the HttpDataSource."},"1894.03":{"start":"1894.03","dur":"2.44","text":"And when the MediaSource\nrequests data,"},"1896.47":{"start":"1896.47","dur":"2.21","text":"it&#39;s first going to\nlook it up in the cache."},"1898.68":{"start":"1898.68","dur":"2.63","text":"If there&#39;s a cache miss, then\nit&#39;s going to go to the network"},"1901.31":{"start":"1901.31","dur":"2.11","text":"and use the HttpDataSource."},"1903.42":{"start":"1903.42","dur":"2.22","text":"Then when that\nrequest is satisfied,"},"1905.64":{"start":"1905.64","dur":"1.96","text":"it&#39;s going to come back\nand fill in the cache"},"1907.60":{"start":"1907.6","dur":"2.189","text":"so that next time the\nMediaSource requests"},"1909.79":{"start":"1909.789","dur":"2.541","text":"the same chunk, then hopefully\nit&#39;s going to be in the cache."},"1916.12":{"start":"1916.12","dur":"3.57","text":"So we talked about how\nthe kind of extreme case"},"1919.69":{"start":"1919.69","dur":"3.45","text":"of customization is\nproviding a MediaSource"},"1923.14":{"start":"1923.14","dur":"4.02","text":"or whatever that you&#39;ve\nimplemented yourself."},"1927.16":{"start":"1927.16","dur":"2.416","text":"So I&#39;m going to go through\nan example of doing that."},"1929.58":{"start":"1929.576","dur":"1.874","text":"Let&#39;s say that you&#39;ve\ngot an app where you&#39;re"},"1931.45":{"start":"1931.45","dur":"1.374","text":"showing some\ncontent, but now you"},"1932.82":{"start":"1932.824","dur":"4.986","text":"want to monetize that content\nby showing ads alongside it."},"1937.81":{"start":"1937.81","dur":"2.7","text":"Let&#39;s have a think about\nwhat the timeline is going"},"1940.51":{"start":"1940.51","dur":"1.8","text":"to look like in this case."},"1942.31":{"start":"1942.31","dur":"2.179","text":"Well, it may be very simple."},"1944.49":{"start":"1944.489","dur":"1.541","text":"In this example on\nthe screen there&#39;s"},"1946.03":{"start":"1946.03","dur":"3.42","text":"just one ad at the\nbeginning, a pre-roll ad."},"1949.45":{"start":"1949.45","dur":"2.05","text":"Or it may be more complicated."},"1951.50":{"start":"1951.5","dur":"2.57","text":"So in this case\nthere&#39;s a pre-roll ad"},"1954.07":{"start":"1954.07","dur":"2.55","text":"on a mid-roll ad\nand a post-roll ad."},"1956.62":{"start":"1956.62","dur":"4.03","text":"And they kind of\nsplit up the content."},"1960.65":{"start":"1960.65","dur":"1.98","text":"So at first glance\nyou might think"},"1962.63":{"start":"1962.63","dur":"3.15","text":"this is a place where we could\nuse ConcatenatingMediaSource."},"1965.78":{"start":"1965.78","dur":"3.21","text":"But unfortunately normally\nwhen you&#39;re loading ads,"},"1968.99":{"start":"1968.99","dur":"3.33","text":"you can&#39;t actually commit\nto a particular ad URI"},"1972.32":{"start":"1972.32","dur":"1.96","text":"until the time when\nyou&#39;re about to play it."},"1974.28":{"start":"1974.28","dur":"2.374","text":"It&#39;s not the case that we have\na list of exactly what ads"},"1976.65":{"start":"1976.654","dur":"3.006","text":"we&#39;re going to play upfront."},"1979.66":{"start":"1979.66","dur":"1.75","text":"So let&#39;s see what would\nhappen if we tried"},"1981.41":{"start":"1981.41","dur":"4.62","text":"to use just one player with\nconventional MediaSources"},"1986.03":{"start":"1986.03","dur":"2.58","text":"to play these ads."},"1988.61":{"start":"1988.61","dur":"2.44","text":"So at the beginning of\nplayback, we got the URI"},"1991.05":{"start":"1991.05","dur":"2.75","text":"for the first ad, and\nthen we can play it."},"1993.80":{"start":"1993.8","dur":"2.37","text":"But then we know that we\nneed to play the content."},"1996.17":{"start":"1996.17","dur":"2.01","text":"So the player is\nactually going to buffer"},"1998.18":{"start":"1998.18","dur":"4.22","text":"when we tell it that we want\nto play the content instead."},"2002.40":{"start":"2002.4","dur":"2.02","text":"Then the content will\nplay back and the user"},"2004.42":{"start":"2004.42","dur":"2.52","text":"is going to see buffering again."},"2006.94":{"start":"2006.94","dur":"3.09","text":"Then the ad, more\nbuffering, and I"},"2010.03":{"start":"2010.03","dur":"2.056","text":"guess you&#39;re saying how\nthis is going to work."},"2012.09":{"start":"2012.086","dur":"1.124","text":"There&#39;s a lot of buffering."},"2013.21":{"start":"2013.21","dur":"2.5","text":"And this is not a\ngood user experience."},"2015.71":{"start":"2015.71","dur":"2.72","text":"So one way that people\ntry to work around this"},"2018.43":{"start":"2018.43","dur":"2.07","text":"is they will try\nand use two players."},"2020.50":{"start":"2020.5","dur":"1.56","text":"And the idea is\nthat one player is"},"2022.06":{"start":"2022.06","dur":"2.217","text":"going to play what&#39;s on\nthe screen at the moment"},"2024.28":{"start":"2024.277","dur":"2.583","text":"while the other player is in the\nbackground buffering whatever"},"2026.86":{"start":"2026.86","dur":"1.68","text":"is coming up next."},"2028.54":{"start":"2028.54","dur":"2.257","text":"So as soon as the\nad URI arrives,"},"2030.80":{"start":"2030.797","dur":"1.583","text":"you can populate the\nbackground player"},"2032.38":{"start":"2032.38","dur":"1.83","text":"and hopefully get\nsome data buffered"},"2034.21":{"start":"2034.21","dur":"2.49","text":"before playback begins."},"2036.70":{"start":"2036.7","dur":"2.64","text":"And in this case,\nthe playback will"},"2039.34":{"start":"2039.34","dur":"2.64","text":"switch in between the\nad and the content."},"2041.98":{"start":"2041.98","dur":"3.54","text":"But this solution also\nhas its drawbacks."},"2045.52":{"start":"2045.52","dur":"2.73","text":"These two players are both going\nto use up memory for buffering,"},"2048.25":{"start":"2048.25","dur":"3.34","text":"and they may even both be\nusing codecs at the same time."},"2051.59":{"start":"2051.59","dur":"1.49","text":"So that&#39;s not very good."},"2053.08":{"start":"2053.08","dur":"1.92","text":"And also this is\njust very difficult"},"2055.00":{"start":"2055","dur":"3.73","text":"to implement correctly if\nyou&#39;ve ever tried doing this."},"2058.73":{"start":"2058.73","dur":"3.259","text":"So we thought about implementing\na MediaSource that&#39;s"},"2061.99":{"start":"2061.989","dur":"2.46","text":"specifically designed for ads."},"2064.45":{"start":"2064.449","dur":"1.561","text":"And this MediaSource\nis implemented"},"2066.01":{"start":"2066.01","dur":"3.83","text":"in a slightly similar way to\nthe concatenating media source,"},"2069.84":{"start":"2069.84","dur":"3.37","text":"except that it has these\nplaylists items which"},"2073.21":{"start":"2073.21","dur":"1.179","text":"are not populated."},"2074.39":{"start":"2074.389","dur":"2.191","text":"And those are represented\nby the question marks."},"2076.58":{"start":"2076.58","dur":"2.09","text":"Those are going to get\nfilled in with the ads"},"2078.67":{"start":"2078.67","dur":"2.67","text":"as soon as they arrive."},"2081.34":{"start":"2081.34","dur":"1.589","text":"So let&#39;s see what\nplayback would look"},"2082.93":{"start":"2082.929","dur":"3.471","text":"like with this\nhypothetical MediaSource."},"2086.40":{"start":"2086.4","dur":"2.2","text":"Playback begins and\nwe get the first ad."},"2088.60":{"start":"2088.6","dur":"1.32","text":"Then the content plays."},"2089.92":{"start":"2089.92","dur":"2.27","text":"Hopefully we get the next\nad a little bit early."},"2092.19":{"start":"2092.19","dur":"3.66","text":"And that placeholder is\nfilled in in the timeline."},"2095.85":{"start":"2095.85","dur":"2.53","text":"And if this works\nwell, then the user"},"2098.38":{"start":"2098.38","dur":"4.24","text":"is actually not going to see\nany buffering during playback."},"2102.62":{"start":"2102.62","dur":"2.36","text":"So as a real practical\nexample of this,"},"2104.98":{"start":"2104.98","dur":"2.9","text":"Google provides the\nInteractiveMediaAds SDK."},"2107.88":{"start":"2107.88","dur":"1.33","text":"You may have heard of it."},"2109.21":{"start":"2109.21","dur":"5.58","text":"And we&#39;re using that for loading\nads in this ImaAdsMediaSource."},"2114.79":{"start":"2114.79","dur":"2.7","text":"And as you can see,\nthe area kind of"},"2117.49":{"start":"2117.49","dur":"3.54","text":"highlights when the\nad is loaded from IMA."},"2121.03":{"start":"2121.03","dur":"3","text":"And the media source\nis wrapping IMA,"},"2124.03":{"start":"2124.03","dur":"2.79","text":"so the player doesn&#39;t need to\nworry about any details of how"},"2126.82":{"start":"2126.82","dur":"1.74","text":"ads are actually loaded."},"2128.56":{"start":"2128.56","dur":"2.13","text":"And in this timeline you\nget seamless transitions"},"2130.69":{"start":"2130.69","dur":"1.42","text":"between content and ads."},"2135.94":{"start":"2135.94","dur":"2.42","text":"So we actually pushed this\nto our development branch"},"2138.36":{"start":"2138.36","dur":"1.62","text":"today if you want\nan early preview,"},"2139.98":{"start":"2139.98","dur":"2.63","text":"if you want to try inserting\nads in your content."},"2142.61":{"start":"2142.61","dur":"1.31","text":"It&#39;s very easy to use."},"2143.92":{"start":"2143.92","dur":"2.03","text":"So you take your\ncontent MediaSource"},"2145.95":{"start":"2145.95","dur":"1.83","text":"and you pass it\ninto the construct"},"2147.78":{"start":"2147.78","dur":"4.14","text":"of an ImaAdsMediaSource along\nwith an adTagUri which defines"},"2151.92":{"start":"2151.92","dur":"3.28","text":"what ad playlists to load."},"2155.20":{"start":"2155.2","dur":"1.67","text":"And it also takes\nan OverlayViewGroup"},"2156.87":{"start":"2156.87","dur":"2.37","text":"which interactive\nmedia ads will use"},"2159.24":{"start":"2159.24","dur":"2.64","text":"to show any ad user interface\non top of your player"},"2161.88":{"start":"2161.88","dur":"3.71","text":"like a skip button, for example."},"2165.59":{"start":"2165.59","dur":"1.75","text":"Here&#39;s what you get\nif you try doing this."},"2167.34":{"start":"2167.34","dur":"3.3","text":"So you can see the\npre-roll ad is playing."},"2170.64":{"start":"2170.64","dur":"1.74","text":"And then when the\nad finishes we get"},"2172.38":{"start":"2172.38","dur":"2.52","text":"a pretty seamless\ntransition between the ad"},"2174.90":{"start":"2174.9","dur":"1.819","text":"into the content."},"2176.72":{"start":"2176.719","dur":"2.291","text":"And you can see that our\nplayback controls have support"},"2179.01":{"start":"2179.01","dur":"2.61","text":"for showing little ad\nmarkers so the user can"},"2181.62":{"start":"2181.62","dur":"1.626","text":"see where the mid-roll ads are."},"2183.25":{"start":"2183.246","dur":"1.374","text":"And during this\nplayback, there&#39;s"},"2184.62":{"start":"2184.62","dur":"2.8","text":"a consistent buffering policy\nbeing applied at all times."},"2190.42":{"start":"2190.42","dur":"3.555","text":"Now back to Ollie to talk\nabout some of our future plans."},"2193.98":{"start":"2193.975","dur":"1.625","text":"OLIVER WOODMAN: So\nbefore we leave you,"},"2195.60":{"start":"2195.6","dur":"2.19","text":"I just want to say a little\nbit about the direction"},"2197.79":{"start":"2197.79","dur":"2.73","text":"in which ExoPlayer is headed."},"2200.52":{"start":"2200.52","dur":"3.25","text":"Just to caveat this,\nthis is no way a promise,"},"2203.77":{"start":"2203.77","dur":"3.254","text":"and we&#39;re not going to\nput timelines on anything."},"2207.02":{"start":"2207.024","dur":"1.416","text":"But in terms of\nthe kind of things"},"2208.44":{"start":"2208.44","dur":"2.416","text":"that we&#39;re going to be looking\nat over the next six months"},"2210.86":{"start":"2210.856","dur":"2.603","text":"to a year, we&#39;re\ngoing to continue"},"2213.46":{"start":"2213.459","dur":"1.541","text":"to fill in the\nremaining feature gaps"},"2215.00":{"start":"2215","dur":"2.68","text":"that we have in terms of\nbecoming a really complete"},"2217.68":{"start":"2217.68","dur":"2.01","text":"media playback library."},"2219.69":{"start":"2219.69","dur":"3.3","text":"One specific thing here that\nwe know is causing a lot of you"},"2222.99":{"start":"2222.99","dur":"2.017","text":"problems is proper\nsupport for offline."},"2225.01":{"start":"2225.007","dur":"1.583","text":"So this is where you\nactually download"},"2226.59":{"start":"2226.59","dur":"2.47","text":"media to playback later."},"2229.06":{"start":"2229.06","dur":"1.43","text":"And so you can\nexpect us to start"},"2230.49":{"start":"2230.49","dur":"3.09","text":"building up support for offline\nduring the next six months"},"2233.58":{"start":"2233.58","dur":"1.92","text":"to a year."},"2235.50":{"start":"2235.5","dur":"1.5","text":"We&#39;re also going\nto continue to work"},"2237.00":{"start":"2237","dur":"1.99","text":"on performance enhancements."},"2238.99":{"start":"2238.99","dur":"3.77","text":"And by that I mean things like\nmaintaining decoder instances"},"2242.76":{"start":"2242.76","dur":"2.58","text":"from the platform from\none playback to the next,"},"2245.34":{"start":"2245.34","dur":"1.65","text":"because releasing\nand instantiating"},"2246.99":{"start":"2246.99","dur":"4.41","text":"those decoders as we do\nnow can be quite expensive."},"2251.40":{"start":"2251.4","dur":"2.55","text":"Another aspect of performance\nthat we intend to look at"},"2253.95":{"start":"2253.95","dur":"3.37","text":"is improved adaptive track\nselections for DASH and HLS"},"2257.32":{"start":"2257.32","dur":"3.2","text":"and SmoothStreaming\nadaptive playbacks, and also"},"2260.52":{"start":"2260.52","dur":"2.46","text":"more advanced\nbuffering policies."},"2262.98":{"start":"2262.98","dur":"2.16","text":"So the default components\nthat we currently"},"2265.14":{"start":"2265.14","dur":"2.91","text":"provide for performing\nthese tasks,"},"2268.05":{"start":"2268.05","dur":"2.28","text":"they&#39;re pretty\neffective, but they&#39;re"},"2270.33":{"start":"2270.33","dur":"2.52","text":"quite simple in terms of\nthe policies they implement."},"2272.85":{"start":"2272.85","dur":"3.866","text":"So we really want to start\nkind of diving deeper"},"2276.72":{"start":"2276.716","dur":"1.624","text":"and doing some proper\nresearch and kind"},"2278.34":{"start":"2278.34","dur":"3.1","text":"of fine tuning these to\ndeliver better performance out"},"2281.44":{"start":"2281.44","dur":"2.3","text":"of the box."},"2283.74":{"start":"2283.74","dur":"4.79","text":"And finally we know that the\nExoPlayer API is very large"},"2288.53":{"start":"2288.53","dur":"2.11","text":"and that it can be daunting\nto get started with"},"2290.64":{"start":"2290.64","dur":"2.49","text":"and to figure out exactly where\nyou need to dive in if you"},"2293.13":{"start":"2293.13","dur":"1.92","text":"want to customize something."},"2295.05":{"start":"2295.05","dur":"3.06","text":"So we&#39;re going to work on some\nbetter documentation as well,"},"2298.11":{"start":"2298.11","dur":"2.057","text":"probably starting\nwith documenting"},"2300.17":{"start":"2300.167","dur":"2.083","text":"some of the internal\ncomponents that the player is"},"2302.25":{"start":"2302.25","dur":"2.48","text":"using, as we described earlier."},"2307.44":{"start":"2307.44","dur":"2.97","text":"In terms of what you can\ndo next with ExoPlayer"},"2310.41":{"start":"2310.41","dur":"2.25","text":"whilst you&#39;re here, we\nhave office hours tomorrow"},"2312.66":{"start":"2312.66","dur":"3.237","text":"over in the office hours\nbox at 9:30 in the morning."},"2315.90":{"start":"2315.897","dur":"2.583","text":"So if you have any questions for\nus, then please do come along"},"2318.48":{"start":"2318.48","dur":"4.229","text":"and we&#39;ll be more than happy to\nhave a chat and to answer them."},"2322.71":{"start":"2322.709","dur":"2.041","text":"If you want to go and\ncheck out our source codes,"},"2324.75":{"start":"2324.75","dur":"4.632","text":"the GitHub repository is public\nand you can go and have a look."},"2329.38":{"start":"2329.382","dur":"1.458","text":"And we also have\na home page, which"},"2330.84":{"start":"2330.84","dur":"3.45","text":"includes the developer guides\nthat will help you get started."},"2334.29":{"start":"2334.29","dur":"2.43","text":"And it also has various\npiece of documentation"},"2336.72":{"start":"2336.72","dur":"3.56","text":"such as supported formats."},"2340.28":{"start":"2340.28","dur":"3.506","text":"And with that, I&#39;d like to\njust thank you all for coming."},"2343.79":{"start":"2343.786","dur":"2.124","text":"We unfortunately don&#39;t have\ntime for questions now,"},"2345.91":{"start":"2345.91","dur":"2.96","text":"but we will probably just\ndown in the corner afterwards."},"2348.87":{"start":"2348.87","dur":"2.582","text":"And as I said, if\nyou do have questions"},"2351.45":{"start":"2351.452","dur":"1.458","text":"that we can&#39;t answer\nnow, please do"},"2352.91":{"start":"2352.91","dur":"1.76","text":"you come along tomorrow\nmorning and we&#39;d"},"2354.67":{"start":"2354.67","dur":"1.129","text":"be happy to answer them."},"2355.80":{"start":"2355.799","dur":"1.541","text":"So thank you very\nmuch for your time."},"2357.34":{"start":"2357.34","dur":"2.7","text":"[APPLAUSE]"},"2360.04":{"start":"2360.04","dur":"3.65","text":"[MUSIC PLAYING]"}}