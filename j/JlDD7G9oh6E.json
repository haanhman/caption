{"0":{"dur":1,"text":"DAVID MALAN: All right, welcome back."},"2":{"dur":4,"text":"Before we dive into cloud computing,\nI thought I'd pause for a moment"},"6":{"dur":5,"text":"if there are any outstanding questions\nor topics that came up during lunch"},"11":{"dur":2,"text":"that might now be of interest."},"18":{"dur":2,"text":">> AUDIENCE: [INAUDIBLE]"},"21":{"dur":0,"text":">> DAVID MALAN: OK."},"22":{"dur":1,"text":"Oh, OK."},"23":{"dur":0,"text":"AUDIENCE: [INAUDIBLE]"},"29":{"dur":1,"text":">> DAVID MALAN: No, of course."},"31":{"dur":3,"text":"OK, well hopefully all of your\nproblems arise in the next few hours"},"35":{"dur":1,"text":"and tomorrow especially."},"36":{"dur":6,"text":"But let's take a look, then, at where\nthe last discussion about setting up"},"42":{"dur":3,"text":"a website leads, more generally\nwhen it comes to cloud computing,"},"45":{"dur":2,"text":"setting up a server architecture,\nthe kinds of decisions"},"48":{"dur":2,"text":"that engineers and\ndevelopers and managers"},"50":{"dur":2,"text":"need to make when it comes\nto doing more than just"},"53":{"dur":3,"text":"signing up for a $10 per month web host\nwhen you actually want to build out"},"56":{"dur":1,"text":"your own infrastructure."},"57":{"dur":2,"text":"And we'll try to tie this back,\nfor instance, to Dropbox and others"},"60":{"dur":0,"text":"like them."},"61":{"dur":4,"text":">> So let's start to consider\nwhat problems arise as business"},"66":{"dur":3,"text":"gets good and good problems arise."},"69":{"dur":5,"text":"So in the very simplest case of having\nsome company that has a web server,"},"74":{"dur":6,"text":"you might have, let's say, a server that\nwe'll just draw that looks like this."},"81":{"dur":4,"text":"And these days, most servers-- and let's\nactually put a picture to this just so"},"85":{"dur":2,"text":"that it's a little less nebulous."},"87":{"dur":3,"text":">> So Dell rack server--\nback in the day, there"},"91":{"dur":2,"text":"were mainframe computers\nthat took up entire rooms."},"93":{"dur":1,"text":"These days, if you were\nto get a server, it"},"95":{"dur":2,"text":"might look a little something like this."},"98":{"dur":3,"text":"Servers are measured in what\nare called rack units, or RUs."},"101":{"dur":3,"text":"And one RU is 1.5 inches,\nwhich is an industry standard."},"105":{"dur":4,"text":"So this looks like a two RU server."},"109":{"dur":1,"text":"So it's 3 inches tall."},"111":{"dur":3,"text":"And they're generally 19 inches wide,\nwhich means all of this kind of stuff"},"114":{"dur":0,"text":"is standardized."},"115":{"dur":4,"text":">> So if you look in a data center--\nnot just at one server, but let's"},"119":{"dur":2,"text":"take a look at Google's\ndata center and see if we"},"122":{"dur":2,"text":"see a nice picture in Google Images."},"124":{"dur":4,"text":"This is much better lit than you\nwould typically find, and much"},"129":{"dur":5,"text":"sexier looking as a result. But\nthis is what looks like a couple"},"134":{"dur":2,"text":"hundred servers all\nabout that same size,"},"137":{"dur":4,"text":"actually, in rack after rack after\nrack after rack in a data center."},"141":{"dur":4,"text":">> Something like this-- this may well\nbe Google's, since I googled Google's."},"146":{"dur":2,"text":"But it could be representative\nof more generally"},"148":{"dur":3,"text":"a data center in which many\ncompanies are typically co-located."},"151":{"dur":3,"text":"And co-located generally means\nthat you go to a place like Equinix"},"154":{"dur":5,"text":"or other vendors that have large\nwarehouses that have lots of power,"},"160":{"dur":2,"text":"lots of cooling, hopefully\nlots of security,"},"162":{"dur":4,"text":"and individual cages enclosing racks of\nservers, and you either rent the racks"},"167":{"dur":1,"text":"or you bring the racks in."},"169":{"dur":2,"text":">> And individual companies,\nstartups especially,"},"171":{"dur":3,"text":"will have some kind of biometrics\nto get into their cage, or a key,"},"174":{"dur":0,"text":"or a key card."},"175":{"dur":1,"text":"You open up the door."},"176":{"dur":3,"text":"And inside of there is just\na square footage footprint"},"180":{"dur":2,"text":"that you're paying for, inside of\nwhich you can put anything you want."},"183":{"dur":1,"text":">> And you typically pay for the power."},"184":{"dur":2,"text":"And you pay for the footprints."},"186":{"dur":1,"text":"And then you pay\nyourself for the servers"},"188":{"dur":1,"text":"that you're bringing into that space."},"190":{"dur":2,"text":"And what you then have the\noption to do is pay someone"},"192":{"dur":2,"text":"for your internet service connectivity."},"195":{"dur":2,"text":"You can pay any number\nof vendors, all of whom"},"197":{"dur":1,"text":"typically come into that data center."},"199":{"dur":3,"text":">> But the real interesting question is,\nwhat actually goes in those racks?"},"202":{"dur":2,"text":"They might all very well\nlook like what we just saw."},"205":{"dur":2,"text":"But they perform different functions\nand might need to do different things."},"207":{"dur":1,"text":"And let's actually\nmotivate this discussion"},"209":{"dur":5,"text":"with the question of, what problem\nstarts to arise if you're successful?"},"215":{"dur":2,"text":">> So you've got a website\nthat you've built."},"217":{"dur":2,"text":"And maybe it sells widgets\nor something like that."},"220":{"dur":3,"text":"And you've been doing very well\nwith sales of widgets online."},"223":{"dur":4,"text":"And you start to experience\nsome symptoms, your website."},"228":{"dur":2,"text":"What might be some of\nthe technical symptoms"},"231":{"dur":2,"text":"that users report as business\nis growing and booming"},"234":{"dur":5,"text":"and your website is\nbenefiting from that?"},"239":{"dur":3,"text":">> AUDIENCE: [INAUDIBLE]"},"245":{"dur":1,"text":">> DAVID MALAN: Yeah, exactly."},"247":{"dur":2,"text":"So you might have a\nslowdown of your website."},"250":{"dur":1,"text":"And why might that happen?"},"251":{"dur":1,"text":"Well, if we assume, for\nthe sake of discussion"},"252":{"dur":2,"text":"right now, that you're on one\nof these commercial web hosts"},"255":{"dur":2,"text":"that we talked about before lunch,\nthat you pay some number of dollars"},"257":{"dur":2,"text":"to per month, and you've already paid\nfor the annual cost of your domain"},"260":{"dur":4,"text":"name, that web host is probably\noverselling their resources"},"265":{"dur":0,"text":"to some extent."},"266":{"dur":2,"text":"So you might have a username\nand password on their server."},"269":{"dur":3,"text":"But so might several other, or several\ndozen other, or maybe even several"},"272":{"dur":1,"text":"hundred other, users."},"273":{"dur":3,"text":">> And websites live physically\non the same server."},"277":{"dur":1,"text":"Why is this possible?"},"278":{"dur":2,"text":"Well these days, servers\nlike this typically"},"280":{"dur":3,"text":"have multiple hard drives, maybe\nas many as six or more hard drives,"},"284":{"dur":3,"text":"each of which might be as much\nas 4 terabytes these days."},"287":{"dur":4,"text":"So you might have 24 terabytes of space\nin just one little server like this."},"292":{"dur":3,"text":">> And even if you steal some of that space\nfor redundancy, for backup purposes,"},"295":{"dur":1,"text":"it's still quite a lot of space."},"297":{"dur":2,"text":"And certainly, a typical website\ndoesn't need that much space."},"300":{"dur":3,"text":"Just registering users\nand storing logs of orders"},"303":{"dur":1,"text":"doesn't take all that much space."},"304":{"dur":2,"text":"So you can partition it quite\na bit and give every user"},"307":{"dur":1,"text":"just a little slice of that."},"308":{"dur":2,"text":">> Meanwhile, a computer\nlike this these days"},"311":{"dur":5,"text":"typically has multiple CPUs-- not just\none, maybe two, maybe four, maybe 16,"},"316":{"dur":0,"text":"or even more."},"317":{"dur":1,"text":"And each of those CPUs\nhas something called"},"318":{"dur":3,"text":"a core, which is kind of like\na brain inside of a brain."},"322":{"dur":4,"text":"So in fact most everyone here with\nmodern laptops has probably a dual core"},"326":{"dur":5,"text":"or quad core CPU-- and probably only\none CPU inside of a laptop these days."},"332":{"dur":3,"text":"But desktop computers\nand rack computers like"},"335":{"dur":3,"text":"this might have quite a few\nmore CPUs, and in turn cores."},"339":{"dur":5,"text":">> And frankly, even in our Macs and PCs of\ntoday, you don't really need dual cores"},"344":{"dur":2,"text":"or quad cores to check your email."},"346":{"dur":2,"text":"If there's any bottleneck when\nit comes to using a computer,"},"349":{"dur":2,"text":"you the human are probably the\nslowest thing about that computer."},"351":{"dur":2,"text":"And you're not going to be able to\ncheck your email any faster if you"},"354":{"dur":2,"text":"have four times as many CPUs or cores."},"357":{"dur":2,"text":">> But the same is kind\nof true of a server."},"359":{"dur":3,"text":"One single website might not\nnecessarily need more than one"},"362":{"dur":2,"text":"CPU or one core, one\nsmall brain inside doing"},"365":{"dur":1,"text":"all of the thinking and the processing."},"367":{"dur":3,"text":"So manufacturers have similarly\nstarted to slice up those resources"},"370":{"dur":2,"text":"so that maybe your website gets one\ncore, your website gets one core,"},"373":{"dur":1,"text":"or maybe we're sharing one such core."},"375":{"dur":1,"text":"We're also sharing disk space."},"376":{"dur":3,"text":"And we're also sharing RAM,\nor Random Access Memory"},"380":{"dur":2,"text":"from before, of which\nthere's also a finite amount."},"382":{"dur":0,"text":">> And that's the key."},"383":{"dur":2,"text":"No matter how expensive\nthe computer was,"},"385":{"dur":2,"text":"there's still a finite\namount of resources in it."},"388":{"dur":2,"text":"And so the more and more you\ntry to consume those resources,"},"391":{"dur":1,"text":"the slower things might become."},"392":{"dur":1,"text":"But why?"},"394":{"dur":4,"text":"Why would things slow down as a\nsymptom of a server being overloaded?"},"399":{"dur":0,"text":"What's happening?"},"402":{"dur":3,"text":">> AUDIENCE: [INAUDIBLE]"},"414":{"dur":1,"text":"DAVID MALAN: Yeah, exactly."},"415":{"dur":2,"text":"I proposed earlier that\nRAM is a type of memory."},"417":{"dur":2,"text":"It's volatile, whereby that's\nwhere apps and data are"},"420":{"dur":1,"text":"stored when they're being used."},"421":{"dur":2,"text":"And so therefore there's\nonly a finite number"},"423":{"dur":1,"text":"of things you can apparently do at once."},"425":{"dur":1,"text":"And it's also faster,\nwhich is a good thing."},"427":{"dur":2,"text":"But it's also more expensive,\nwhich is a bad thing."},"429":{"dur":5,"text":"And it's also therefore present in lower\nquantities than disk space, hard disk"},"435":{"dur":1,"text":"space, which tends to be cheaper."},"436":{"dur":2,"text":">> In other words, you\nmight have 4 terabytes"},"438":{"dur":1,"text":"of disk space in your computer."},"440":{"dur":3,"text":"But you might have 4\ngigabytes, or 64 gigabytes,"},"444":{"dur":4,"text":"in order of magnitude, a factor of\n1,000 less, of RAM in your computer."},"449":{"dur":1,"text":"So what does a computer do?"},"450":{"dur":1,"text":"Well, suppose that you\ndo have 64 gigabytes"},"452":{"dur":2,"text":"of RAM in a server like this, which\nwould be quite common, if not low"},"455":{"dur":1,"text":"these days."},"456":{"dur":3,"text":"But suppose you have so many\nusers doing so many things"},"459":{"dur":3,"text":"that you kind of sort of\nneed 65 gigabytes of memory"},"462":{"dur":2,"text":"to handle all of that\nsimultaneous usage?"},"464":{"dur":2,"text":">> Well, you could just say,\nsorry, some number of users"},"467":{"dur":1,"text":"just can't access the site."},"468":{"dur":2,"text":"And that is the measure\nof last resort, certainly."},"471":{"dur":4,"text":"Or you, as the operating\nsystem, like the Windows or Mac"},"475":{"dur":3,"text":"OS or Linux or Solaris or any\nnumber of other OSes on that server,"},"479":{"dur":1,"text":"could just decide, you know what?"},"481":{"dur":2,"text":"I only have 64 gigabytes of RAM."},"483":{"dur":1,"text":"I kind of need 65."},"485":{"dur":0,"text":"So you know what?"},"486":{"dur":3,"text":"I'm going to take 1 gigabyte\nworth of the data in RAM"},"490":{"dur":5,"text":"that was the least recently accessed\nand just move it to disk temporarily,"},"495":{"dur":3,"text":"literally copy it from the fast\nmemory to the slower memory"},"499":{"dur":4,"text":"so that I can then handle that\n65th gigabyte need for memory,"},"504":{"dur":1,"text":"do some computation on it."},"505":{"dur":2,"text":"Then when I'm done doing that,\nI'll just move that to disk,"},"508":{"dur":6,"text":"move that other RAM I temporarily put\non disk back into the actual hardware"},"515":{"dur":2,"text":"so that I'm kind of multitasking."},"517":{"dur":3,"text":">> So I'm sort of putting things\ntemporarily in this slower space"},"521":{"dur":2,"text":"so I create the illusion\nof handling everyone."},"524":{"dur":1,"text":"But there's a slowdown."},"525":{"dur":3,"text":"Well, inside of these hard\ndisks these days is what?"},"529":{"dur":2,"text":"Rather, what makes a hard\ndrive different from RAM"},"532":{"dur":1,"text":"as best you know now?"},"533":{"dur":3,"text":">> AUDIENCE: [INAUDIBLE]"},"539":{"dur":1,"text":">> DAVID MALAN: OK, true."},"541":{"dur":0,"text":"AUDIENCE: [INAUDIBLE]"},"545":{"dur":1,"text":">> DAVID MALAN: So very true."},"546":{"dur":6,"text":"And that is a side effect or feature\nof the fact that RAM is indeed faster."},"553":{"dur":2,"text":"And therefore you want to\nuse it for current use."},"555":{"dur":1,"text":"And a disk is slower."},"557":{"dur":2,"text":"But it's permanent, or nonvolatile."},"559":{"dur":1,"text":"So you use it for long term storage."},"561":{"dur":3,"text":"But in terms of\nimplementation, if I look up"},"565":{"dur":4,"text":"what's called a DIMM, Dual Inline Memory\nModule, this is what a piece of RAM"},"569":{"dur":1,"text":"might typically look like."},"570":{"dur":4,"text":">> So inside of our Mac-- that's a bug."},"575":{"dur":6,"text":"Inside of our Macs and PCs, our desktop\ncomputers would have sticks of memory,"},"581":{"dur":2,"text":"as you would call them,\nor DIMMs, or SIMMs back"},"583":{"dur":1,"text":"in the day, of memory\nthat look like this."},"584":{"dur":2,"text":"Our laptops probably have things that\nare a third the size or half the size."},"587":{"dur":2,"text":"They're a little smaller,\nbut the same idea-- little"},"590":{"dur":2,"text":"pieces of green silicon\nwafer or plastic that"},"592":{"dur":4,"text":"has little black chips on them with lots\nof wires interconnecting everything."},"596":{"dur":2,"text":"You might have a whole bunch of\nthese inside of your computer."},"598":{"dur":2,"text":"But the takeaway here is\nit's entirely electronic."},"600":{"dur":2,"text":"There's just electrons\nflowing on this device."},"603":{"dur":5,"text":"By contrast, if we look at\nthe inside of a hard drive"},"608":{"dur":2,"text":"and pull up a picture\nhere, you would instead"},"610":{"dur":5,"text":"see something like this,\nwhich does have electricity"},"616":{"dur":1,"text":"going through it ultimately."},"617":{"dur":2,"text":"But what also jumps out\nat you about this thing?"},"620":{"dur":0,"text":"AUDIENCE: [INAUDIBLE]"},"621":{"dur":1,"text":"DAVID MALAN: Yeah, there's\napparently moving parts."},"622":{"dur":2,"text":"It's kind of like an old record\nplayer or phonograph player."},"625":{"dur":0,"text":"And it pretty much is."},"626":{"dur":2,"text":"It's a little fancier than that--\nwhereas a phonograph player used"},"628":{"dur":4,"text":"grooves in the record, this actually\nuses tiny little magnetic particles"},"633":{"dur":1,"text":"that we can't quite see."},"634":{"dur":3,"text":"But if a little magnetic particle\nlooks like this, it's considered a 1."},"638":{"dur":2,"text":"And if it looks like this,\nnorth-south instead of south-north,"},"641":{"dur":1,"text":"it might be a 0."},"642":{"dur":3,"text":"And we'll see tomorrow how we can build\nfrom that to more interesting things."},"645":{"dur":2,"text":">> But anything that's\ngot to physically move"},"647":{"dur":3,"text":"is surely going to go slower\nthan the speed of light,"},"651":{"dur":2,"text":"which in theory is what\nan electron might flow at,"},"653":{"dur":1,"text":"though realistically not quite."},"654":{"dur":2,"text":"So mechanical devices-- much slower."},"656":{"dur":1,"text":"But they're cheaper."},"658":{"dur":2,"text":"And you can fit so much\nmore data inside of them."},"660":{"dur":2,"text":"So the fact that there\nexists in the world something"},"663":{"dur":3,"text":"called virtual memory,\nusing a hard disk like this"},"666":{"dur":3,"text":"as though it were RAM\ntransparent to the user,"},"670":{"dur":5,"text":"simply by moving data\nfrom RAM to the hard disk,"},"675":{"dur":3,"text":"then moving it back when you need\nit again, creates the slowdown."},"678":{"dur":2,"text":"Because you literally have to\ncopy it from one place to another."},"681":{"dur":3,"text":"And the thing you're copying it to and\nfrom is actually slower than the RAM"},"685":{"dur":1,"text":"where you want it to be."},"686":{"dur":2,"text":">> The alternative solution here--\nif you don't like that slow down,"},"689":{"dur":2,"text":"and your virtual memory is\nsort of being overtaxed,"},"692":{"dur":1,"text":"what's another solution to this problem?"},"693":{"dur":1,"text":">> AUDIENCE: [INAUDIBLE]"},"695":{"dur":2,"text":"DAVID MALAN: Well,\nincreasing the virtual memory"},"697":{"dur":1,"text":"would let us do this on\nan even bigger scale."},"699":{"dur":4,"text":"We could handle 66 gigabytes worth\nof memory needs, or 67 gigabytes."},"703":{"dur":2,"text":"But suppose I don't like\nthis slow down, in fact"},"705":{"dur":3,"text":"I want to turn off virtual\nmemory if that's even possible,"},"709":{"dur":2,"text":"what else could I throw at\nthis problem to solve it,"},"712":{"dur":4,"text":"where I want to handle more users\nand more memory requirements"},"716":{"dur":2,"text":"than I physically have at the moment?"},"719":{"dur":3,"text":">> AUDIENCE: [INAUDIBLE]"},"724":{"dur":1,"text":">> DAVID MALAN: Unfortunately no."},"726":{"dur":3,"text":"So the CPU and the cores they're\nin are a finite resource."},"729":{"dur":3,"text":"And there's no analog in that context."},"733":{"dur":1,"text":"Good question, though."},"734":{"dur":4,"text":"So just to be clear, too, if\ninside of this computer is,"},"739":{"dur":5,"text":"let's say, a stick of RAM that looks\nlike this-- and so we'll call this RAM."},"744":{"dur":2,"text":"And over here is the hard disk drive."},"747":{"dur":3,"text":"And I'll just draw this\npictorially as a little circle."},"750":{"dur":3,"text":"There are 0's and 1's in both of\nthese-- data, we'll generalize it as."},"753":{"dur":4,"text":">> And essentially, if a user is\nrunning an application like,"},"758":{"dur":8,"text":"let's say, a website that requires this\nmuch RAM per user, what I'm proposing,"},"766":{"dur":2,"text":"by way of this thing\ncalled virtual memory,"},"768":{"dur":5,"text":"is to just temporarily move\nthat over here so that now I"},"773":{"dur":3,"text":"can move someone else's memory\nrequirements over there."},"777":{"dur":2,"text":"And then when that's done,\nI can copy this back over"},"780":{"dur":4,"text":"and this goes here, thereby moving\nwhat I wanted in there somewhere else"},"784":{"dur":0,"text":"altogether."},"785":{"dur":2,"text":">> So there's just a lot of\nswitcheroo, is the takeaway here."},"787":{"dur":4,"text":"So if you don't like this, and you don't\nwant to put anything on the hard drive,"},"792":{"dur":4,"text":"what's sort of the obvious\nbusiness person's solution"},"796":{"dur":3,"text":"to the problem, or the engineer's\nsolution, for that matter, too?"},"799":{"dur":2,"text":">> AUDIENCE: [INAUDIBLE]"},"801":{"dur":2,"text":">> DAVID MALAN: Yeah, I mean literally\nthrow money at the problem."},"804":{"dur":2,"text":"And actually, this is the perfect\nsegue to some of the higher level"},"807":{"dur":1,"text":"discussions of cloud computing."},"808":{"dur":2,"text":"Because a lot of it is motivated\nby financial decisions,"},"811":{"dur":1,"text":"not even necessarily technological."},"813":{"dur":4,"text":"If 64 gigs of RAM is too little, well,\nwhy not get 128 gigabytes of RAM?"},"817":{"dur":2,"text":"Why not get 256 gigabytes of RAM?"},"820":{"dur":1,"text":"Well, why not?"},"821":{"dur":0,"text":">> AUDIENCE: [INAUDIBLE]"},"822":{"dur":1,"text":"DAVID MALAN: Well, it\ncosts more money, sure."},"824":{"dur":2,"text":"And if you already have spare\nhard disk space, effectively,"},"826":{"dur":4,"text":"or equivalently, hard disk space is so\nmuch cheaper you might as well use it."},"831":{"dur":3,"text":"So again, there's this trade off that\nwe saw even earlier on this morning,"},"834":{"dur":2,"text":"where there's really not\nnecessarily a right answer,"},"836":{"dur":4,"text":"there's just a better or worse answer\nbased on what you actually care about."},"841":{"dur":3,"text":">> So there's also technological realities."},"844":{"dur":2,"text":"I cannot buy a computer,\nto my knowledge,"},"846":{"dur":2,"text":"with a trillion gigabytes\nof RAM right now."},"849":{"dur":2,"text":"It just physically doesn't exist."},"851":{"dur":1,"text":"So there is some upper bound."},"853":{"dur":2,"text":"But if you've ever even shopped\nfor a consumer Mac or PC,"},"855":{"dur":4,"text":"too, generally there's\nthis curve of features"},"860":{"dur":3,"text":"where there might be a good,\na better, and a best computer."},"863":{"dur":2,"text":">> And the marginal returns\non your dollar buying"},"865":{"dur":4,"text":"the best computer versus\nthe better computer"},"870":{"dur":2,"text":"might not be nearly as high\nas spending a bit more money"},"872":{"dur":3,"text":"and getting the better computer\nover the good computer."},"875":{"dur":2,"text":"In other words, you're paying a\npremium to get the top of the line."},"878":{"dur":2,"text":">> And what we'll see in the\ndiscussion of cloud computing"},"880":{"dur":4,"text":"is that what's very common these\ndays, and what companies like Google"},"884":{"dur":5,"text":"early on popularized, was not paying\nfor and building really fancy, expensive"},"890":{"dur":2,"text":"souped up computers with\nlots and lots of everything,"},"893":{"dur":6,"text":"but rather buying or building pretty\nmodest computers but lots of them,"},"900":{"dur":3,"text":"and using something that's generally\ncalled horizontal scaling instead"},"903":{"dur":1,"text":"of vertical scaling."},"904":{"dur":3,"text":">> So vertical scaling would mean get more\nRAM, more disk, more of everything,"},"908":{"dur":2,"text":"and sort of invest\nvertically in your hardware"},"910":{"dur":2,"text":"so you're just getting the\nbest of the best of the best,"},"912":{"dur":1,"text":"but you're paying for it."},"913":{"dur":3,"text":"Horizontal scaling is sort of get the\nbottom tier things, the good model,"},"917":{"dur":2,"text":"or even the worse model,\nbut get lots of them."},"919":{"dur":2,"text":"But as soon as you get lots of\nthem-- for instance, in this case,"},"922":{"dur":4,"text":"web servers, if this one server\nor one web host is insufficient,"},"927":{"dur":4,"text":"then just intuitively, the\nsolution to this problem of load"},"932":{"dur":4,"text":"or overload on your servers\nis either get a bigger server"},"936":{"dur":4,"text":"or, what I'm proposing here instead\nof scaling vertically so to speak,"},"940":{"dur":1,"text":"would be, you know what?"},"941":{"dur":1,"text":"Just get a second one of these."},"943":{"dur":2,"text":"Or maybe even get a third."},"946":{"dur":2,"text":"But now we've created\nan engineering problem"},"948":{"dur":3,"text":"by nature of this business\nor financial decision."},"951":{"dur":2,"text":"What's the engineering problem now?"},"954":{"dur":1,"text":">> AUDIENCE: [INAUDIBLE]"},"956":{"dur":3,"text":">> DAVID MALAN: Yeah, how do\nyou connect them and-- sorry?"},"959":{"dur":0,"text":">> AUDIENCE: [INAUDIBLE]"},"960":{"dur":1,"text":"DAVID MALAN: Right,\nbecause I still have--"},"962":{"dur":4,"text":"if I reintroduce me into this picture,\nif this is my laptop somewhere"},"967":{"dur":5,"text":"on the internet, which is now between\nme and the company we're talking about,"},"972":{"dur":5,"text":"now I have to figure out, to which\nserver do I send this particular user?"},"977":{"dur":7,"text":"And if there's other users, like\nthis, and then this one over here,"},"985":{"dur":3,"text":"and maybe this is user A, this\nis user B, this is user C,"},"988":{"dur":5,"text":"and this is server 1, 2, and 3-- now\nan intuitive answer might here be just,"},"994":{"dur":2,"text":"we'll send user A to 1\nand B to 2 and C to 3."},"997":{"dur":2,"text":"And we can handle 3 times as many users."},"999":{"dur":1,"text":">> But that's an oversimplification."},"1001":{"dur":3,"text":"How do you decide whom to send where?"},"1004":{"dur":1,"text":"So let's try to reason through this."},"1006":{"dur":3,"text":"So suppose that computers\nA, B, and C are customers,"},"1010":{"dur":3,"text":"and servers 1, 2, and 3 are\nhorizontally scaled servers."},"1013":{"dur":1,"text":"So they're sort of identical."},"1015":{"dur":2,"text":"They're all running the same software."},"1017":{"dur":2,"text":"And they can all do the same thing."},"1019":{"dur":1,"text":"But the reason we have\nthree of them is so"},"1021":{"dur":3,"text":"that we can handle three\ntimes as many people at once."},"1024":{"dur":3,"text":">> So we know from our\ndiscussion prior to lunch"},"1027":{"dur":3,"text":"that there's hardware in between\nthe laptops and the servers."},"1031":{"dur":3,"text":"But we'll just sort of generalize\nthat now as the internet or the cloud."},"1034":{"dur":3,"text":"But we know that in my home,\nthere's probably a home router."},"1038":{"dur":2,"text":"Near the servers, there's probably\na router, DNS server, DHCP."},"1041":{"dur":3,"text":"There can be anything\nwe want in this story."},"1044":{"dur":8,"text":">> So how do we start to decide,\nwhen user A goes to something.com,"},"1053":{"dur":3,"text":"which server to route the user to?"},"1056":{"dur":2,"text":"How might we begin to tell this story?"},"1059":{"dur":1,"text":"AUDIENCE: Load balancing?"},"1060":{"dur":0,"text":"DAVID MALAN: Load balancing."},"1061":{"dur":1,"text":"What do you mean by that?"},"1062":{"dur":2,"text":">> AUDIENCE: Returning\nwhere the most usage is"},"1064":{"dur":2,"text":"and which one has the\nmost available resources."},"1067":{"dur":2,"text":"DAVID MALAN: OK, so let me\nintroduce a new type of hardware"},"1069":{"dur":3,"text":"that we haven't yet discussed, which\nis exactly that, a load balancer."},"1073":{"dur":1,"text":"This too could just be a server."},"1074":{"dur":3,"text":"It could look exactly like\nthe one we saw a moment ago."},"1078":{"dur":2,"text":"A load balancer really is\njust a piece of software"},"1081":{"dur":1,"text":"that you run on a piece of hardware."},"1082":{"dur":4,"text":">> Or you can pay a vendor, like\nCitrix or others, Cisco or others."},"1087":{"dur":3,"text":"You can pay for their own hardware,\nwhich is a hardware load balancer."},"1090":{"dur":2,"text":"But that just means they\npre-installed the load balancing"},"1092":{"dur":2,"text":"software on their hardware and\nsold it to you all together."},"1095":{"dur":3,"text":"So we'll just draw it as a\nrectangle for our purposes."},"1098":{"dur":3,"text":">> How now do I implement a load balancer?"},"1102":{"dur":6,"text":"In other words, when user A wants to\nvisit my site, their request somehow"},"1108":{"dur":2,"text":"or other, probably by way of those\nrouters we talked about earlier,"},"1111":{"dur":2,"text":"is going to eventually reach\nthis load balancer, who then"},"1113":{"dur":2,"text":"needs to make a routing-like decision."},"1116":{"dur":2,"text":"But it's routing for sort\nof a higher purpose now."},"1118":{"dur":2,"text":"It's not just about getting\nfrom point A to point"},"1120":{"dur":4,"text":"B. It's about deciding which\npoint B is the best among them--"},"1124":{"dur":1,"text":"1, 2, or 3 in this case."},"1126":{"dur":4,"text":">> So how do I decide whether\nto go to 1, to 2, to 3?"},"1131":{"dur":4,"text":"What might this black box, so to\nspeak, be doing on the inside?"},"1135":{"dur":2,"text":"This too is another example in\ncomputer science of abstraction."},"1137":{"dur":4,"text":"I have literally drawn a load balancer\nas a black box in black ink, inside"},"1142":{"dur":2,"text":"of which is some interesting\nlogic, or magic even,"},"1145":{"dur":2,"text":"out of which needs to come\na decision-- 1, 2, or 3."},"1147":{"dur":4,"text":"And the input is just A."},"1152":{"dur":1,"text":">> AUDIENCE: [INAUDIBLE]"},"1153":{"dur":0,"text":"DAVID MALAN: I'm sorry?"},"1154":{"dur":3,"text":"DAVID MALAN: All right, how might we\ncategorize the types of transactions"},"1158":{"dur":0,"text":"here?"},"1159":{"dur":4,"text":">> AUDIENCE: Viewing a webpage\nversus querying a database."},"1163":{"dur":1,"text":"DAVID MALAN: OK, that's good."},"1164":{"dur":4,"text":"So maybe this user A\nwants to view a web page."},"1169":{"dur":3,"text":"And maybe it's even static content,\nsomething that changes rarely, if ever."},"1172":{"dur":1,"text":"And that seems like a\npretty simple operation."},"1174":{"dur":3,"text":"So maybe we'll just arbitrarily,\nbut reasonably, say,"},"1178":{"dur":4,"text":"server 1, his purpose in life is\nto just serve up static content,"},"1182":{"dur":2,"text":"files that rarely, if ever, change."},"1185":{"dur":1,"text":"Maybe it's the images on the page."},"1186":{"dur":3,"text":"Maybe it's the text on the page or\nother such sort of uninteresting things,"},"1190":{"dur":2,"text":"nothing transactional, nothing dynamic."},"1192":{"dur":4,"text":">> By contrast, if user A is checking\nout of his or her shopping cart that"},"1197":{"dur":3,"text":"requires a database, someplace to store\nand remember that transaction, well"},"1200":{"dur":1,"text":"maybe that request\nshould go to server 2."},"1202":{"dur":0,"text":"So that's good."},"1203":{"dur":3,"text":"So we can load balance based\non the type of requests."},"1207":{"dur":1,"text":"How else might we do this?"},"1213":{"dur":0,"text":"What other--"},"1214":{"dur":2,"text":">> AUDIENCE: Based on the server's\nutilization and capacity."},"1217":{"dur":0,"text":"DAVID MALAN: Right, OK."},"1218":{"dur":1,"text":"So you mentioned that earlier, Kareem."},"1219":{"dur":6,"text":"So what if we provide some input\non [INAUDIBLE] among servers 1, 2,"},"1226":{"dur":5,"text":"and 3 to this load balancer so that\nthey're just constantly informing"},"1232":{"dur":4,"text":"the load balancer what their status is?"},"1236":{"dur":3,"text":"Like, hey, load balancer,\nI'm at 50% utilization."},"1239":{"dur":1,"text":"In other words, I have\nhalf as many users"},"1241":{"dur":1,"text":"as I can actually handle right now."},"1243":{"dur":1,"text":"Hey, load balancer, I'm\nat 100% utilization."},"1245":{"dur":2,"text":"Hey, load balancer, 0% utilization."},"1247":{"dur":2,"text":"The load balancer, if it's\ndesigned in a way that"},"1249":{"dur":4,"text":"can take in those comments\nas input, it can then"},"1253":{"dur":3,"text":"decide, ooh, number 2 is at 100%."},"1257":{"dur":4,"text":"Let me send no future requests to him\nother than the users already connected."},"1261":{"dur":0,"text":"This guy's at 0%."},"1262":{"dur":1,"text":"Let's send a lot of traffic to him."},"1263":{"dur":1,"text":"This guy said he's at 50%."},"1265":{"dur":2,"text":"Let's send some traffic to him."},"1268":{"dur":3,"text":">> So that would be an ingredient, that\nwe could take load into account."},"1272":{"dur":1,"text":"And it's going to change over time."},"1273":{"dur":1,"text":"So the decisions will change."},"1274":{"dur":2,"text":"So that's a really good technique,\none that's commonly used."},"1277":{"dur":1,"text":"What else could we do?"},"1278":{"dur":1,"text":"And let's actually just summarize here."},"1280":{"dur":9,"text":"So the decisions here could be\nby type of traffic, I'll call it."},"1289":{"dur":2,"text":"It can be based on load."},"1292":{"dur":2,"text":"Let's see if we can't\ncome up with a few other."},"1294":{"dur":1,"text":">> AUDIENCE: [INAUDIBLE]"},"1295":{"dur":0,"text":"DAVID MALAN: Location."},"1296":{"dur":0,"text":"So that's a good one."},"1297":{"dur":3,"text":"So location-- how might you\nleverage that information?"},"1300":{"dur":3,"text":">> AUDIENCE: [INAUDIBLE]"},"1314":{"dur":2,"text":">> DAVID MALAN: Oh, that's good."},"1317":{"dur":2,"text":"And about how many milliseconds\nwould it decrease by"},"1319":{"dur":3,"text":"based on what we saw this\nmorning, would you say?"},"1322":{"dur":1,"text":">> AUDIENCE: [INAUDIBLE]"},"1324":{"dur":2,"text":">> DAVID MALAN: Well, based\non the trace routes"},"1326":{"dur":2,"text":"we saw earlier, which is just\na rough measure of something,"},"1329":{"dur":2,"text":"at least how long it takes\nfor data to get from A to B"},"1331":{"dur":4,"text":"feels like anything local was, what,\nlike 74 milliseconds, give or take?"},"1336":{"dur":3,"text":"And then anything 100 plus,\n200 plus was probably abroad."},"1339":{"dur":2,"text":"And so based on that alone,\nit seems reasonable to assume"},"1342":{"dur":3,"text":"that for a user in the US\nto access a European server"},"1345":{"dur":3,"text":"might take twice or three times\nas long, even in milliseconds,"},"1348":{"dur":2,"text":"than it might take if that\nserver were located here"},"1351":{"dur":2,"text":"geographically, or vice versa."},"1353":{"dur":1,"text":"So when I proposed\nearlier that especially"},"1355":{"dur":2,"text":"once you cross that 200 millisecond\nthreshold, give or take,"},"1357":{"dur":1,"text":"humans do start to notice."},"1359":{"dur":3,"text":"And the trace route is just\nassuming raw, uninteresting data."},"1362":{"dur":3,"text":"When you have a website, you have to\nget the user downloading images or movie"},"1366":{"dur":2,"text":"files, lots of text,\nsubsequent requests."},"1369":{"dur":3,"text":"We saw when we visited, what was\nit, Facebook or Amazon earlier,"},"1373":{"dur":2,"text":"there's a whole lot of stuff\nthat needs to be downloaded."},"1375":{"dur":1,"text":"So that's going to add up."},"1376":{"dur":3,"text":"So multi-seconds might\nnot be unreasonable."},"1380":{"dur":1,"text":"So good, geography is one ingredient."},"1381":{"dur":4,"text":"So in fact companies like\nAkamai, if you've heard of them,"},"1385":{"dur":4,"text":"or others have long taken\ngeography into account."},"1390":{"dur":4,"text":"And it turns out that by nature of an\nIP address, my laptop's IP address,"},"1394":{"dur":4,"text":"you can infer, with some probability,\nwhere you are in the world."},"1398":{"dur":1,"text":"And in fact there's\nthird party services you"},"1400":{"dur":4,"text":"can pay who maintain databases\nof IP addresses and geographies"},"1404":{"dur":4,"text":"that with high confidence will be\ntrue when asked, where in the world"},"1408":{"dur":1,"text":"is this IP address?"},"1410":{"dur":2,"text":">> And so in fact what\nother companies use this?"},"1412":{"dur":3,"text":"If you have Hulu or Netflix, if\nyou've ever been traveling abroad,"},"1415":{"dur":2,"text":"and you try to watch something on\nHulu, and you're not in the US,"},"1418":{"dur":2,"text":"you might see a message\nsaying, not in the US."},"1421":{"dur":1,"text":"Sorry, you can't view this content."},"1423":{"dur":1,"text":">> AUDIENCE: [INAUDIBLE]"},"1424":{"dur":1,"text":">> DAVID MALAN: Oh, really?"},"1426":{"dur":2,"text":"But yes, so actually that's\na perfect application"},"1428":{"dur":2,"text":"of something very technical\nto an actual problem."},"1431":{"dur":4,"text":"If you were to VPN from\nEurope or Asia or anywhere"},"1435":{"dur":2,"text":"in the world to your corporate\nheadquarters in New York"},"1437":{"dur":2,"text":"or wherever you are, you're\ngoing to create the appearance"},"1440":{"dur":2,"text":"to outside websites that\nyou're actually in New York,"},"1443":{"dur":2,"text":"even though you're\nphysically quite far away."},"1445":{"dur":2,"text":">> Now you the user are going to\nknow you're obviously away."},"1448":{"dur":3,"text":"But you're also going to feel it because\nof those additional milliseconds."},"1451":{"dur":3,"text":"That additional distance and the\nencryption that's happening in the VPN"},"1454":{"dur":1,"text":"is going to slow things down."},"1455":{"dur":1,"text":"So it may or may not\nbe a great experience."},"1457":{"dur":3,"text":"But Hulu and Netflix are going to see\nyou as sitting somewhere in New York,"},"1461":{"dur":2,"text":"as you've clearly gleaned."},"1463":{"dur":1,"text":"What a perfect solution to that."},"1465":{"dur":3,"text":">> All right, so geography is one decision."},"1468":{"dur":3,"text":"What else might we use to decide how\nto route traffic from A, B, and C"},"1472":{"dur":4,"text":"to 1, 2, and 3, again, putting\nthe engineering hat on?"},"1477":{"dur":1,"text":"This all sounds very complicated."},"1478":{"dur":2,"text":"Uh, I don't even know where\nto begin implementing those."},"1481":{"dur":2,"text":"Give me something that's simpler."},"1484":{"dur":3,"text":"What's the simplest way\nto make this decision?"},"1488":{"dur":1,"text":">> AUDIENCE: Is the server available?"},"1489":{"dur":1,"text":">> DAVID MALAN: Is the server available?"},"1491":{"dur":2,"text":"So not bad."},"1493":{"dur":0,"text":"That's good."},"1494":{"dur":1,"text":"That's sort of a nuancing of load."},"1496":{"dur":1,"text":"So let's keep that in the load category."},"1498":{"dur":1,"text":"If you're available, I'm just\ngoing to send the data there."},"1500":{"dur":1,"text":"But that could backfire quickly."},"1501":{"dur":4,"text":"Because if I use that logic, and if I\nalways ask 1, are you on, are you on,"},"1505":{"dur":3,"text":"are you on, if the answer is always yes,\nI'm going to send 100% of the traffic"},"1508":{"dur":2,"text":"to him, 0% to everyone else."},"1511":{"dur":3,"text":"And at some point, we're going to hit\nthat slowdown or site unavailable."},"1514":{"dur":3,"text":"So what's slightly better than\nthat but still pretty simple"},"1517":{"dur":4,"text":"and not nearly as clever as taking all\nthese additional data into account?"},"1522":{"dur":1,"text":">> AUDIENCE: Cost per server."},"1523":{"dur":1,"text":"DAVID MALAN: Cost per server."},"1525":{"dur":2,"text":"OK, so let me toss that\nin the load category, too."},"1528":{"dur":2,"text":"Because what you'll find in\na company, too-- that if you"},"1530":{"dur":2,"text":"upgrade your servers\nover time or buy more,"},"1532":{"dur":3,"text":"you might not be able to get exactly\nthe same versions of hardware."},"1536":{"dur":1,"text":"Because it falls out of date."},"1537":{"dur":1,"text":"You can't buy it anymore."},"1538":{"dur":0,"text":"Prices change."},"1539":{"dur":3,"text":">> So you might have disparate servers\nin your cluster, so to speak."},"1542":{"dur":1,"text":"That's totally fine."},"1543":{"dur":3,"text":"But next year's hardware\nmight be twice as fast,"},"1547":{"dur":2,"text":"twice as capable as this year's."},"1549":{"dur":2,"text":"So we can toss that\ninto the load category."},"1551":{"dur":2,"text":"This feedback loop between 1,\n2, and 3 in the load balancer"},"1554":{"dur":3,"text":"could certainly tell it,\nhey, I'm at 50% capacity."},"1557":{"dur":2,"text":"But by the way, I also\nhave twice as many cores."},"1560":{"dur":2,"text":"Use that information."},"1562":{"dur":2,"text":"Even simpler-- and this is going\nto be a theme in computer science."},"1565":{"dur":3,"text":"When in doubt, or when you want a simple\nsolution that generally works well"},"1568":{"dur":3,"text":"over time, don't choose the same\nserver all the time, but choose--"},"1572":{"dur":1,"text":">> AUDIENCE: A random one?"},"1574":{"dur":1,"text":"DAVID MALAN: --a random server."},"1575":{"dur":1,"text":"Yeah, choose one or the other."},"1576":{"dur":4,"text":"So randomness is actually\nthis very powerful ingredient"},"1581":{"dur":2,"text":"in computer science,\nand in engineering more"},"1583":{"dur":3,"text":"generally, especially when you want\nto make a simple decision quickly"},"1587":{"dur":3,"text":"without complicating it with all\nof these very clever, but also"},"1590":{"dur":3,"text":"very clever, solutions that require\nall the more engineering, all"},"1594":{"dur":1,"text":"the more thought, when\nreally, why don't I"},"1596":{"dur":2,"text":"just kind of flip a coin, or a\nthree sided coin in this case,"},"1599":{"dur":2,"text":"and decide whether to go 1, 2, 3?"},"1601":{"dur":3,"text":">> That might backfire probabilistically,\nbut much like the odds"},"1605":{"dur":3,"text":"of flipping heads again and\nagain and again and again"},"1608":{"dur":5,"text":"and again and again is possible in\nreality-- super, super unlikely."},"1613":{"dur":4,"text":"So over time, odds are\njust sending users randomly"},"1618":{"dur":2,"text":"to 1, 2, and 3 is going to\nwork out perfectly fine."},"1620":{"dur":2,"text":"And this is a technique\ngenerally known as round robin."},"1623":{"dur":1,"text":">> Or actually, that's not round robin."},"1625":{"dur":1,"text":"This would be the random approach."},"1626":{"dur":2,"text":"And if you want to be even\na little simpler than that,"},"1629":{"dur":3,"text":"round robin would be, first person goes\nto 1, second person to 2, third person"},"1632":{"dur":3,"text":"to 3, fourth person to 1."},"1636":{"dur":1,"text":"And therein lies the round robin."},"1637":{"dur":2,"text":"You just kind of go around in a cycle."},"1639":{"dur":1,"text":">> Now, you should be smart about it."},"1641":{"dur":5,"text":"You should not blindly send the user to\nserver number one if what is the case?"},"1650":{"dur":2,"text":"If it's at max capacity, or\nit's just no longer responsive."},"1652":{"dur":2,"text":"So ideally you want some\nkind of feedback loop."},"1655":{"dur":2,"text":"Otherwise, you just send all\nof your users to a dead end."},"1658":{"dur":2,"text":"But that can be taken into account, too."},"1660":{"dur":5,"text":">> So don't under appreciate the value of\njust randomness, which is quite often"},"1666":{"dur":2,"text":"a solution to these kinds of problems."},"1668":{"dur":2,"text":"And we'll write down round robin."},"1671":{"dur":3,"text":"So how do some companies implement\nround robin or randomness"},"1675":{"dur":1,"text":"or any of these decisions?"},"1676":{"dur":5,"text":"Well unfortunately, they\ndo things like this."},"1681":{"dur":1,"text":"Let me pull up another quick screenshot."},"1693":{"dur":1,"text":">> Actually, let's do two."},"1697":{"dur":3,"text":"I don't know why we're\ngetting all of these dishes."},"1701":{"dur":0,"text":"That's very strange."},"1711":{"dur":1,"text":"All right, what I really\nwant is a screenshot."},"1716":{"dur":3,"text":"That is weird."},"1720":{"dur":2,"text":"All right, so I can spoof this."},"1722":{"dur":3,"text":"I don't know how much farther\nI want to keep scrolling."},"1726":{"dur":7,"text":">> So very commonly, you'll find yourself\nat an address like www.2.acme.com,"},"1733":{"dur":2,"text":"maybe www.3 or 4 or 5."},"1736":{"dur":1,"text":"And keep an eye for this."},"1737":{"dur":1,"text":"You don't see it that often."},"1738":{"dur":4,"text":"But when you do, it kind of tends to\nbe bigger, older, stodgier companies"},"1742":{"dur":2,"text":"that technologically don't really\nseem to know what they're doing."},"1745":{"dur":2,"text":"And you see this on tech companies\nsometimes, the older ones."},"1748":{"dur":1,"text":">> So what are they doing?"},"1749":{"dur":2,"text":"How are they implementing\nload balancing, would it seem?"},"1751":{"dur":4,"text":"If you find yourself as the\nuser typing www.something.com,"},"1755":{"dur":3,"text":"and suddenly you're at\nwww.2.something.com,"},"1759":{"dur":2,"text":"what has their load\nbalancer probably done?"},"1761":{"dur":0,"text":"AUDIENCE: [INAUDIBLE]"},"1768":{"dur":2,"text":">> DAVID MALAN: Yeah, so the\nload balancer is presumably"},"1771":{"dur":2,"text":"making a decision based on one of\nthese decision making processes--"},"1773":{"dur":1,"text":"doesn't really matter which."},"1775":{"dur":3,"text":"But much like I've drawn the\nnumbers on the board here,"},"1778":{"dur":2,"text":"the servers aren't just\ncalled 1, 2, and 3."},"1780":{"dur":3,"text":"They're probably called\nwww1, www2, www3."},"1783":{"dur":3,"text":"And it turns out that inside of\nan HTTP request is this feature."},"1787":{"dur":1,"text":"And I'm going to\nsimulate this as follows."},"1788":{"dur":4,"text":">> I'm going to open up that same\ndeveloper network tab as before just"},"1793":{"dur":2,"text":"so we can see what's going\non underneath the hood."},"1795":{"dur":1,"text":"I'm going to clear the screen."},"1797":{"dur":6,"text":"And I'm going to go to, let's\nsay, http:\/\/harvard.edu."},"1803":{"dur":3,"text":"Now for whatever\nbusiness reasons, Harvard"},"1806":{"dur":2,"text":"has decided, like many,\nmany other websites,"},"1808":{"dur":3,"text":"to standardize its\nwebsite on www.harvard.edu"},"1812":{"dur":1,"text":"for both technical\nand marketing reasons."},"1814":{"dur":1,"text":"It's just kind of in\nvogue to have the www."},"1816":{"dur":4,"text":">> So the server at Harvard has\nto somehow redirect the user,"},"1820":{"dur":3,"text":"as I keep saying, from\none URL to the other."},"1823":{"dur":0,"text":"How does that work?"},"1824":{"dur":2,"text":"Well, let me go ahead and hit Enter."},"1826":{"dur":4,"text":"And notice the URL indeed quickly\nchanged to www.harvard.edu."},"1830":{"dur":4,"text":"Let me scroll back in this\nhistory and click on this debug"},"1835":{"dur":2,"text":"diagnostic information, if you will."},"1837":{"dur":1,"text":"Let me look at my request."},"1839":{"dur":1,"text":">> So here's the request I made."},"1841":{"dur":3,"text":"And notice it's consistent with the kind\nof request I made of Facebook before."},"1844":{"dur":3,"text":"But notice the response."},"1848":{"dur":2,"text":"What's different in\nthe response this time?"},"1850":{"dur":1,"text":">> AUDIENCE: [INAUDIBLE]"},"1851":{"dur":2,"text":">> DAVID MALAN: Yeah, so it's not a 200 OK."},"1854":{"dur":1,"text":"It's not a 404 Not Found."},"1856":{"dur":4,"text":"It's a 301 Moved Permanently, which\nis kind of a funny way of saying,"},"1860":{"dur":5,"text":"Harvard has upped and moved\nelsewhere to www.harvard.edu."},"1865":{"dur":2,"text":"The 301 signifies that\nthis is a redirect."},"1868":{"dur":4,"text":"And to where should the user\napparently be redirected?"},"1872":{"dur":2,"text":"There's an additional tidbit of\ninformation inside that envelope."},"1875":{"dur":4,"text":"And each of these lines will now\nstart calling an HTTP header."},"1879":{"dur":3,"text":"Header is just a key value\npair-- something colon something."},"1883":{"dur":1,"text":"It's a piece of information."},"1884":{"dur":2,"text":"Where should the new\nlocation apparently be?"},"1891":{"dur":2,"text":"Notice the last line\namong all those headers."},"1893":{"dur":1,"text":">> AUDIENCE: [INAUDIBLE]"},"1894":{"dur":2,"text":">> DAVID MALAN: Yeah, so there's\nadditional information."},"1897":{"dur":2,"text":"The first line that I've highlighted\nsays 301 Moved Permanently."},"1900":{"dur":2,"text":"Well, where has it moved?"},"1902":{"dur":2,"text":"The last line-- and they don't\nhave to be in this order."},"1905":{"dur":1,"text":"It can be random."},"1907":{"dur":5,"text":"Location colon means, hey\nbrowser, go to this URL instead."},"1912":{"dur":3,"text":">> So browsers understand HTTP redirects."},"1915":{"dur":2,"text":"And this is a very, very\ncommon way of bouncing"},"1917":{"dur":2,"text":"the user from one place to another."},"1919":{"dur":2,"text":"For instance, if you've ever tried\nto visit a website that you're not"},"1922":{"dur":3,"text":"logged into, you might suddenly find\nyourself at a new URL altogether being"},"1926":{"dur":1,"text":"prompted to log in."},"1927":{"dur":0,"text":">> How does that work?"},"1928":{"dur":2,"text":"The server is probably sending a 301."},"1930":{"dur":3,"text":"There's also other numbers, like\n302, somewhat different in meaning,"},"1934":{"dur":1,"text":"that send you to another URL."},"1936":{"dur":2,"text":"And then the server,\nonce you've logged in,"},"1938":{"dur":3,"text":"will send you back to where\nyou actually intended."},"1942":{"dur":5,"text":">> So what, then, are poorly\nengineered websites doing?"},"1947":{"dur":3,"text":"When you visit\nwww.acme.com, and they just"},"1951":{"dur":4,"text":"happen to have named their servers\nwww1, www2, www3, and so forth,"},"1955":{"dur":3,"text":"they are very simply--\nwhich is fair, but very"},"1959":{"dur":6,"text":"sort of foolishly-- redirecting you to\nan actually differently named server."},"1966":{"dur":2,"text":"And it works perfectly fine."},"1968":{"dur":1,"text":"It's nice and easy."},"1969":{"dur":2,"text":">> We've seen how it would be\ndone underneath the hood"},"1972":{"dur":1,"text":"in the virtual envelope."},"1973":{"dur":2,"text":"But why is this arguably a\nbad engineering decision?"},"1976":{"dur":3,"text":"And why am I sort of condescending\ntoward this particular engineering"},"1980":{"dur":0,"text":"approach?"},"1986":{"dur":1,"text":"Argue why this is bad."},"1987":{"dur":1,"text":"Ben?"},"1989":{"dur":0,"text":"AUDIENCE: [INAUDIBLE]"},"1992":{"dur":3,"text":"DAVID MALAN: Each server would have to\nhave a duplicate copy of the website."},"1996":{"dur":2,"text":"And in fact, that's what I'm\nsupposing for this whole story,"},"1999":{"dur":2,"text":"since if we wanted-- well\nactually, except for Dan's earlier"},"2002":{"dur":3,"text":"suggestion, where if you have different\nservers doing different things, then"},"2005":{"dur":2,"text":"maybe they could actually be\nfunctionally doing different things."},"2007":{"dur":2,"text":">> But even then, at some point, your\ndatabase is going to get overloaded."},"2010":{"dur":2,"text":"Your static assets server\nis going to get overloaded."},"2013":{"dur":1,"text":"So at some point, we're\nback at this story, where we"},"2014":{"dur":1,"text":"need multiple copies of the same thing."},"2016":{"dur":0,"text":"So I'm OK with that."},"2017":{"dur":0,"text":"AUDIENCE: [INAUDIBLE]"},"2022":{"dur":3,"text":">> DAVID MALAN: OK, so some pages\nmight be disproportionately popular."},"2025":{"dur":5,"text":"And so fixating on one address\nisn't necessarily the best thing."},"2030":{"dur":0,"text":"[INAUDIBLE]?"},"2031":{"dur":0,"text":">> AUDIENCE: [INAUDIBLE]"},"2034":{"dur":2,"text":">> DAVID MALAN: What do you mean by that?"},"2037":{"dur":0,"text":"AUDIENCE: [INAUDIBLE]"},"2043":{"dur":1,"text":">> DAVID MALAN: Yeah, exactly."},"2045":{"dur":2,"text":"So you don't want to\nnecessarily have-- you certainly"},"2047":{"dur":4,"text":"don't want to have your users\nmanually typing in www1 or www2."},"2051":{"dur":3,"text":"From a branding perspective, it\njust looks a little ridiculous."},"2054":{"dur":2,"text":"If you just want sort of a\nclean, elegant experience,"},"2057":{"dur":3,"text":"having these sort of randomly\nnumbered URLs really isn't good."},"2060":{"dur":2,"text":"Because then users are surely\ngoing to copy and paste them"},"2062":{"dur":1,"text":"into emails or instant messages."},"2064":{"dur":1,"text":">> Now they're propagating."},"2065":{"dur":2,"text":"Now you're sort of confusing your\nless technical audience, who thinks"},"2068":{"dur":3,"text":"your web address is www2.something.com."},"2072":{"dur":3,"text":"There's no compelling semantics to that."},"2075":{"dur":2,"text":"It just happens to be an underlying\ntechnical detail that you've"},"2078":{"dur":2,"text":"numbered your servers in this way."},"2080":{"dur":5,"text":">> And worse yet, what if, for instance,\nmaybe around Christmas time when"},"2085":{"dur":4,"text":"business is really booming,\nyou've got www1 through www99,"},"2090":{"dur":3,"text":"but in January and February and\nonward, you turn off half of those"},"2093":{"dur":2,"text":"so you only have www1 through www50?"},"2096":{"dur":5,"text":"What's the implication now for that\nvery reasonable business decision?"},"2101":{"dur":0,"text":"AUDIENCE: [INAUDIBLE]"},"2105":{"dur":2,"text":"DAVID MALAN: You need to\nmanage all of those still."},"2107":{"dur":2,"text":"AUDIENCE: [INAUDIBLE]"},"2110":{"dur":0,"text":"DAVID MALAN: Exactly."},"2111":{"dur":1,"text":"That's kind of the catch there."},"2112":{"dur":4,"text":"If your customers are in the habit of\nbookmarking things, emailing them, just"},"2116":{"dur":2,"text":"saving the URL somewhere, or\nif it's just in their auto"},"2119":{"dur":2,"text":"complete in their browser so they're\nnot really intentionally typing it,"},"2122":{"dur":3,"text":"it's just happening, they might,\nfor 11 months out of the year"},"2125":{"dur":1,"text":"effectively, reach a dead end."},"2127":{"dur":2,"text":"And only the most astute of\nusers is going to realize,"},"2130":{"dur":1,"text":"maybe I should manually\nremove this number."},"2132":{"dur":3,"text":"I mean, it's just not going to happen\nwith many users, so bad for business,"},"2135":{"dur":2,"text":"bad implementation engineering wise."},"2137":{"dur":2,"text":">> So thankfully, it's not even necessary."},"2140":{"dur":2,"text":"It turns out that what\nload balancers can do"},"2143":{"dur":5,"text":"is instead of saying, when A\nmakes a request-- hey A, go to 1."},"2148":{"dur":2,"text":"In other words, instead\nof sending that redirect"},"2150":{"dur":3,"text":"such that step one in this\nprocess is the go here,"},"2153":{"dur":1,"text":"he is then told to go elsewhere."},"2155":{"dur":2,"text":"And so step three is, he goes elsewhere."},"2157":{"dur":7,"text":">> You can instead continue to route, to\nkeep using that term, all of A's data"},"2164":{"dur":5,"text":"through the load balancer so that he\nnever contacts 1, 2, or 3 directly."},"2170":{"dur":4,"text":"All of the traffic does get \"routed\"\nby the load balancer itself."},"2175":{"dur":2,"text":"And so now we're sort of\ndeliberately blurring the lines"},"2177":{"dur":1,"text":"among these various devices."},"2178":{"dur":2,"text":"A load balancer can route data."},"2180":{"dur":1,"text":"It's just a function that it has."},"2182":{"dur":2,"text":">> So a load balancer, too, it's\na piece of software, really."},"2185":{"dur":1,"text":"And a router is a piece of software."},"2187":{"dur":2,"text":"And you can absolutely have\ntwo pieces of software inside"},"2189":{"dur":4,"text":"of one physical computer so a load\nbalancer can do these multiple things."},"2194":{"dur":2,"text":">> So there's one other way\nto do this, which actually"},"2196":{"dur":3,"text":"goes back to sort of first principles\nof DNS, which we talked about"},"2199":{"dur":0,"text":"before break."},"2200":{"dur":1,"text":"DNS was Domain Name System."},"2201":{"dur":1,"text":"Remember that you can\nask a DNS server, what's"},"2203":{"dur":2,"text":"the IP address of\ngoogle.com, facebook.com?"},"2206":{"dur":1,"text":">> And we can actually do this."},"2208":{"dur":3,"text":"A tool we did not use earlier is\none that's just as accessible,"},"2211":{"dur":3,"text":"called nslookup, for name server lookup."},"2215":{"dur":1,"text":"And I'm just going to type facebook.com."},"2217":{"dur":5,"text":"And I see that Facebook's IP\naddress is apparently this."},"2222":{"dur":3,"text":"Let me go ahead and copy\nthat, go to a browser,"},"2225":{"dur":6,"text":"and go to http:\/\/ and that\nIP address and hit Enter."},"2231":{"dur":2,"text":"And sure enough, it seems to work."},"2234":{"dur":4,"text":">> Now working backwards, what was\ninside of the virtual envelope"},"2238":{"dur":6,"text":"that Facebook responded with when\nI visited that IP address directly?"},"2245":{"dur":1,"text":"Because notice, where am I now?"},"2249":{"dur":3,"text":"Where am I now, the address?"},"2252":{"dur":0,"text":">> AUDIENCE: [INAUDIBLE]"},"2253":{"dur":2,"text":">> DAVID MALAN: At the secure version,\nand at the www.facebook.com."},"2256":{"dur":2,"text":"So it's not even just\nthe secure IP address."},"2258":{"dur":4,"text":"Facebook has taken it upon itself\nto say, this is ridiculous."},"2262":{"dur":3,"text":"We're not going to keep you at this\nugly looking URL that's numeric."},"2265":{"dur":4,"text":"We're going to send you an HTTP\nredirect by way of that same header"},"2270":{"dur":2,"text":"that we saw before--\nlocation colon something."},"2273":{"dur":3,"text":">> And so this simply means that underneath\nthe hood is still this IP address."},"2276":{"dur":2,"text":"Every computer on the internet\nhas an IP address, it would seem."},"2279":{"dur":2,"text":"But you don't necessarily have\nto expose that to the user."},"2281":{"dur":5,"text":"And much like back in the day, there\nwas 1-800-COLLECT, 1-800-C-O-L-L-E-C-T,"},"2287":{"dur":4,"text":"in the US, was a way of making collect\ncalls via a very easily memorable phone"},"2291":{"dur":5,"text":"number, or 1-800-MATTRESS to buy a bed,\nand similar mnemonics that you even see"},"2297":{"dur":3,"text":"on the telephone kind of sort of\nstill, that letters map to numbers."},"2300":{"dur":1,"text":">> Now, why is that?"},"2301":{"dur":4,"text":"Well, it's a lot easier to memorize\n1-800-MATTRESS or 1-800-COLLECT instead"},"2306":{"dur":3,"text":"of 1-800 something something something\nsomething something something"},"2309":{"dur":1,"text":"something, where each\nof those is a digit."},"2311":{"dur":3,"text":"Similarly, the world learned\nquickly that we should not"},"2314":{"dur":1,"text":"have people memorize IP addresses."},"2315":{"dur":0,"text":"That would be silly."},"2316":{"dur":1,"text":"We're going to use names instead."},"2318":{"dur":2,"text":"And that's why DNS was born."},"2320":{"dur":5,"text":">> All right, so with that said, in terms\nof load balancing, let's try yahoo.com."},"2325":{"dur":1,"text":"Well, that's interesting."},"2327":{"dur":4,"text":"Yahoo seems to be returning three IPs."},"2331":{"dur":2,"text":"So infer from this,\nif you could, what is"},"2333":{"dur":4,"text":"another way that we could implement\nthis notion of load balancing"},"2338":{"dur":5,"text":"maybe without even using a physical\ndevice, this new physical device?"},"2344":{"dur":3,"text":">> In other words, can I take away the\nfunding you have for the load balancer"},"2348":{"dur":2,"text":"and tell you to use some existing\npiece of hardware to implement"},"2350":{"dur":1,"text":"this notion of load balancing?"},"2358":{"dur":3,"text":"And the spoiler is,\nyes, but what, or how?"},"2362":{"dur":5,"text":"What is Yahoo perhaps doing here?"},"2367":{"dur":1,"text":"Kareem?"},"2369":{"dur":1,"text":"OK, Chris?"},"2370":{"dur":0,"text":"AUDIENCE: [INAUDIBLE]"},"2375":{"dur":1,"text":"DAVID MALAN: Yeah, all\nthree of those work."},"2376":{"dur":2,"text":"So randomness, round robin,\nlocation-- you can just"},"2379":{"dur":4,"text":"leverage an existing piece of the puzzle\nthat we talked about earlier of the DNS"},"2384":{"dur":5,"text":"system and simply say, when the first\nuser of the day requests yahoo.com,"},"2389":{"dur":3,"text":"give them the first IP address,\nlike the one ending in 45 up there."},"2392":{"dur":2,"text":"And the next time a user requests\nthe IP address of yahoo.com"},"2395":{"dur":2,"text":"from somewhere in the world,\ngive them the second IP,"},"2397":{"dur":1,"text":"then the third IP, then the\nfirst IP, then the second."},"2399":{"dur":1,"text":"Or be smart about it\nand do it graphically."},"2401":{"dur":3,"text":"Or do it randomly and not just do\nit round robin in this fashion."},"2405":{"dur":2,"text":">> And in this case, then\nwe don't even need"},"2407":{"dur":2,"text":"to introduce this black\nbox into our picture."},"2410":{"dur":1,"text":"We don't need a new device."},"2411":{"dur":5,"text":"We're simply telling computers\nto go to the servers directly,"},"2416":{"dur":1,"text":"effectively, but not\nby way of their name."},"2418":{"dur":1,"text":"They never need to know the name."},"2420":{"dur":5,"text":"They're just being told that yahoo.com\nmaps to any one of these IP addresses."},"2425":{"dur":2,"text":">> So it sends the exact same request."},"2428":{"dur":1,"text":"But on the outside of\nthe envelope, it simply"},"2430":{"dur":2,"text":"puts the IP that it was informed of."},"2432":{"dur":2,"text":"And in this way, too, could\nwe load balance the requests"},"2435":{"dur":3,"text":"by just sending the envelope to a\ndifferent one of Yahoo's own servers?"},"2439":{"dur":3,"text":">> And if we keep digging, we'll see\nprobably other companies with more."},"2442":{"dur":1,"text":"CNN has two publicly exposed."},"2444":{"dur":5,"text":"Though actually if we do this again\nand again-- cnn.com-- you can see"},"2449":{"dur":2,"text":"they're changing order, actually."},"2451":{"dur":4,"text":"So what mechanism is\nCNN using, apparently?"},"2456":{"dur":0,"text":">> AUDIENCE: Random."},"2457":{"dur":2,"text":"DAVID MALAN: Well, it\ncould be random, though it"},"2459":{"dur":1,"text":"seems to be cycling back and forth."},"2461":{"dur":3,"text":"So it's probably round robin where\nthey're just switching the order so"},"2464":{"dur":1,"text":"that I'll presumably take the first."},"2465":{"dur":2,"text":"My computer will take\nthe first each time."},"2468":{"dur":1,"text":"So that's load balancing."},"2470":{"dur":7,"text":"And that allows us, ultimately,\nto map data, or map requests,"},"2478":{"dur":2,"text":"across multiple servers."},"2481":{"dur":2,"text":"So what kinds of\nproblems now still exist?"},"2484":{"dur":2,"text":"It feels like we just really\nsolved a good problem."},"2486":{"dur":2,"text":"We got users to different servers."},"2488":{"dur":2,"text":"But-- oh, and Chris, did\nyou have a question before?"},"2491":{"dur":2,"text":">> AUDIENCE: [INAUDIBLE]"},"2503":{"dur":1,"text":">> DAVID MALAN: Totally depends."},"2505":{"dur":1,"text":"So what is happening here?"},"2507":{"dur":1,"text":"And we can actually see this."},"2508":{"dur":3,"text":"So let's try Yahoo's."},"2511":{"dur":1,"text":"Actually, let's go to Facebook."},"2512":{"dur":1,"text":"Because we know that one works."},"2514":{"dur":2,"text":"So I'm going to copy\nthat IP address again."},"2516":{"dur":2,"text":"I'm going to close all these tabs."},"2518":{"dur":4,"text":"I'm going to go open that\nspecial network tab down here."},"2523":{"dur":4,"text":"And I'm going to visit only http:\/\/."},"2527":{"dur":2,"text":"And now I'm going to hit Enter."},"2530":{"dur":1,"text":"And let's see what happened."},"2531":{"dur":8,"text":">> If I look at that request, notice\nthat my-- Facebook is a bad example."},"2540":{"dur":1,"text":"Because they have a\nsuper fancy technique"},"2542":{"dur":3,"text":"that hides that detail from us."},"2545":{"dur":4,"text":"Let me use Yahoo\ninstead-- http:\/\/ that IP."},"2550":{"dur":5,"text":"Let's open our network\ntab, preserve log."},"2556":{"dur":1,"text":"And here we go, Enter."},"2560":{"dur":0,"text":"That's funny."},"2561":{"dur":3,"text":"OK, so here is the famed 404 message."},"2564":{"dur":4,"text":"What's funny here is that they\nprobably never will be back."},"2568":{"dur":2,"text":"Because there's probably\nnot something wrong per se."},"2571":{"dur":2,"text":"They have just deliberately\ndecided not to support"},"2574":{"dur":2,"text":"the numeric form of their address."},"2576":{"dur":4,"text":">> So what we're actually seeing in the\nNetwork tab, if I pull this up here,"},"2580":{"dur":5,"text":"is, as I say, the famed 404, where\nif I look at the response headers,"},"2586":{"dur":2,"text":"this is what I got here-- 404 Not Found."},"2589":{"dur":2,"text":"So let's try one other."},"2591":{"dur":1,"text":"Let's see if CNN cooperates with us."},"2593":{"dur":6,"text":"I'll grab one of CNN's IP addresses,\nclear this, http, dah, dah, dah, dah."},"2599":{"dur":2,"text":"So in answer to Chris's\nquestion, that one worked."},"2604":{"dur":2,"text":">> And let's go to response headers."},"2610":{"dur":2,"text":"Actually no, all right, I am\nstruggling to find a working example."},"2613":{"dur":4,"text":"So CNN has decided, we'll just leave you\nat whatever address you actually visit,"},"2618":{"dur":2,"text":"branding issues aside."},"2620":{"dur":2,"text":"But what wouldn't be happening, if\nwe could see it in Facebook's case,"},"2623":{"dur":3,"text":"is we would get a 301 Moved\nPermanently, most likely,"},"2626":{"dur":7,"text":"inside of which is\nlocation:https:\/\/www.facebook.com."},"2634":{"dur":6,"text":"And odds are www.facebook.com is an\nalias for the exact same server we just"},"2641":{"dur":1,"text":">> So it's a little counterproductive."},"2643":{"dur":1,"text":"We're literally visiting the server."},"2645":{"dur":1,"text":"The server is then telling us, go away."},"2647":{"dur":1,"text":"Go to this other address."},"2648":{"dur":2,"text":"But we just so happen to be\ngoing back to that same server."},"2650":{"dur":3,"text":"But presumably we now stay on that\nserver without this back and forth."},"2654":{"dur":4,"text":"Because now we're using the named\nversion of the site, not the numeric."},"2658":{"dur":1,"text":"Good question."},"2660":{"dur":3,"text":">> OK, so if we now assume-- we\nhave solved load balancing."},"2663":{"dur":2,"text":"We now have a mechanism,\nwhether it's via DNS,"},"2665":{"dur":3,"text":"whether it's via this black box, whether\nit's using any of these techniques."},"2669":{"dur":4,"text":"We can take a user's request in and\nfigure out to which server, 1, 2, or 3,"},"2673":{"dur":1,"text":"to send him or her."},"2675":{"dur":3,"text":">> What starts to break about our website?"},"2679":{"dur":1,"text":"In other words, we have\nbuilt a business that"},"2681":{"dur":2,"text":"was previously on one single server."},"2683":{"dur":3,"text":"Now that business is running\nacross multiple servers."},"2686":{"dur":4,"text":"What kinds of assumptions,\nwhat kinds of design decisions,"},"2691":{"dur":3,"text":"might now be breaking?"},"2694":{"dur":0,"text":">> This is less obvious."},"2695":{"dur":2,"text":"But let's see if we can't put our\nfinger on some of the problem we've"},"2698":{"dur":1,"text":"created for ourselves."},"2699":{"dur":2,"text":"Again, it's kind of like holding\ndown the leak in the hose."},"2702":{"dur":2,"text":"And now some new issue\nhas popped up over here."},"2707":{"dur":3,"text":">> AUDIENCE: [INAUDIBLE]"},"2716":{"dur":2,"text":"DAVID MALAN: OK, so we have to\nkeep growing our hard disk space."},"2719":{"dur":1,"text":"I'm OK with that right now."},"2720":{"dur":2,"text":"Because I think I can\nhorizontally scale."},"2723":{"dur":3,"text":"Like if I'm running low, I'll just get\na fourth server, maybe a fifth server,"},"2726":{"dur":4,"text":"and then increase our capacity\nby another 30% or 50% or whatnot."},"2730":{"dur":1,"text":"So I'm OK with that, at least for now."},"2732":{"dur":0,"text":"AUDIENCE: [INAUDIBLE]"},"2737":{"dur":1,"text":"DAVID MALAN: OK, so that's a good point."},"2738":{"dur":3,"text":"So suppose the servers\nare not identical."},"2742":{"dur":2,"text":"And customer service\nor the email equivalent"},"2745":{"dur":3,"text":"is getting some message from a user\nsaying, this isn't working right."},"2748":{"dur":3,"text":"It's very possible, sometimes,\nthat maybe one or more servers"},"2752":{"dur":2,"text":"is acting a bit awry, but not\nthe others, which can certainly"},"2755":{"dur":2,"text":"make it harder to chase down the issue."},"2757":{"dur":1,"text":"You might have to look multiple places."},"2758":{"dur":2,"text":">> That is manifestation\nof another kind of bug,"},"2760":{"dur":2,"text":"which is that you probably should\nhave designed your infrastructure so"},"2763":{"dur":2,"text":"that everything is truly identical."},"2766":{"dur":4,"text":"But it does reveal a new problem\nthat we didn't have before."},"2770":{"dur":1,"text":"What else?"},"2771":{"dur":0,"text":"AUDIENCE: [INAUDIBLE]"},"2776":{"dur":3,"text":">> DAVID MALAN: Yeah,\nthere's more complexity."},"2779":{"dur":1,"text":"There's physically more wires."},"2780":{"dur":0,"text":"There's another device."},"2781":{"dur":4,"text":"In fact, I've introduced a fundamental\nconcept and a fundamental problem here"},"2786":{"dur":1,"text":"known as a single point\nof failure, which,"},"2788":{"dur":1,"text":"even if you've never heard\nthe phrase, you can probably"},"2790":{"dur":1,"text":"now work backwards and figure it out."},"2791":{"dur":3,"text":"What does it mean that I have a single\npoint of failure in my architecture?"},"2795":{"dur":4,"text":"And by architecture, I just\nmean the topology of it."},"2799":{"dur":0,"text":">> AUDIENCE: [INAUDIBLE]"},"2800":{"dur":2,"text":">> DAVID MALAN: Yeah, what if\nthe load balancer goes down?"},"2802":{"dur":3,"text":"I've inserted this middle man whose\npurpose in life is to solve a problem."},"2806":{"dur":1,"text":"But I've introduced a new problem."},"2807":{"dur":1,"text":"A new leak has sprung in the hose."},"2809":{"dur":4,"text":"Because now if the load balancer\ndies or breaks or misfunctions,"},"2813":{"dur":2,"text":"now I lose access to\nall three of my servers."},"2816":{"dur":2,"text":"And before, I didn't\nhave this middleman."},"2818":{"dur":4,"text":"And so this is a new problem, arguably."},"2823":{"dur":2,"text":"We'll come back to\nhow we might fix that."},"2825":{"dur":1,"text":">> AUDIENCE: [INAUDIBLE]"},"2826":{"dur":1,"text":"DAVID MALAN: That would be one approach."},"2828":{"dur":5,"text":"Yeah, and so this is going to be quite\nthe rat's hole we start to go down."},"2833":{"dur":1,"text":"But let's come back to\nthat in just a moment."},"2835":{"dur":1,"text":"What other problems have we created?"},"2845":{"dur":1,"text":">> So Dan mentioned database before."},"2847":{"dur":2,"text":"And even if you're not\ntoo familiar technically,"},"2849":{"dur":3,"text":"a database is just a server where\nchanging data is typically stored,"},"2853":{"dur":3,"text":"maybe an order someone has placed,\nyour user profile, your name,"},"2856":{"dur":4,"text":"your email address, things that might\nbe inputted or changed over time."},"2860":{"dur":3,"text":">> Previously, my database was on\nthe same server as my web server."},"2864":{"dur":1,"text":"Because I just had one\nweb hosting account."},"2866":{"dur":2,"text":"Everything was all in the same place."},"2868":{"dur":5,"text":"Where should I put my database\nnow, on server 1, 2, or 3?"},"2874":{"dur":0,"text":">> AUDIENCE: 4."},"2875":{"dur":2,"text":">> DAVID MALAN: 4, OK, all\nright, so let's go there."},"2878":{"dur":3,"text":"So I'm going to put my\ndatabase-- and let's"},"2881":{"dur":4,"text":"start labeling these www, www, www."},"2886":{"dur":2,"text":"And I'm going to say,\nthis is number four."},"2888":{"dur":2,"text":"And I'll say db for database."},"2891":{"dur":1,"text":"OK, I like this."},"2892":{"dur":4,"text":"What line should I\npresumably be drawing here?"},"2897":{"dur":1,"text":">> AUDIENCE: [INAUDIBLE]"},"2898":{"dur":3,"text":">> DAVID MALAN: Yeah, so the code,\nas we'll discuss tomorrow,"},"2902":{"dur":2,"text":"presumably is the same\non all three servers."},"2904":{"dur":3,"text":"But it now needs to connect not to a\ndatabase running locally but elsewhere."},"2908":{"dur":0,"text":"And that's fine."},"2909":{"dur":2,"text":"We can just give the database a\nname, as we have, or a number."},"2911":{"dur":2,"text":"And that all works fine."},"2913":{"dur":1,"text":"But what have we done?"},"2915":{"dur":4,"text":"We've horizontally scaled by having\nthree servers instead of one, which"},"2920":{"dur":0,"text":"is good."},"2921":{"dur":3,"text":"Because now we can handle\nthree times as much load."},"2924":{"dur":3,"text":">> And better yet, if one or two\nof those servers goes down,"},"2927":{"dur":1,"text":"my business can continue to operate."},"2929":{"dur":4,"text":"Because I still have one, even if I'm\nkind of limping along performance-wise."},"2933":{"dur":7,"text":"But what new problem have I\nintroduced by moving the database"},"2941":{"dur":3,"text":"to this separate server\ninstead of on 1, 2, and 3?"},"2944":{"dur":1,"text":">> AUDIENCE: [INAUDIBLE]"},"2945":{"dur":2,"text":"DAVID MALAN: Yeah, so now I have\nanother single point of failure."},"2948":{"dur":4,"text":"If my database dies, or needs to\nbe upgraded, or whatever, now sure,"},"2952":{"dur":1,"text":"my website is online."},"2953":{"dur":2,"text":"And I can serve static,\nunchanging content."},"2956":{"dur":4,"text":"But I can't let users log in or change\nanything or order anything, worse yet."},"2961":{"dur":2,"text":"Because if 4 is offline,\nthen 1, 2, and 3"},"2964":{"dur":3,"text":"really can't talk to it by definition."},"2967":{"dur":3,"text":">> OK so yeah, and so this is why\nI'm hesitating to draw this."},"2971":{"dur":1,"text":"So let's come back to that."},"2972":{"dur":1,"text":"I don't mean to keep pushing you off."},"2973":{"dur":2,"text":"But the picture is very\nquickly going to get stressful."},"2976":{"dur":2,"text":"Because you need to start\nhaving two of everything."},"2978":{"dur":3,"text":"In fact, if you've ever seen the\nmovie Contact a few years ago"},"2981":{"dur":3,"text":"with Jodie Foster-- no?"},"2985":{"dur":2,"text":">> OK, so for the two of\nus who've seen Contact,"},"2987":{"dur":3,"text":"there's a relationship there where they\nessentially bought two of something"},"2990":{"dur":2,"text":"rather than one, albeit\nat twice the price."},"2993":{"dur":2,"text":"So it was sort of a playful\ncomment in the movie."},"2995":{"dur":1,"text":"It's kind of related to this."},"2997":{"dur":1,"text":"We could absolutely do that."},"2998":{"dur":1,"text":"And you've just cost\nus twice as much money."},"3000":{"dur":1,"text":"But we'll come back to that."},"3001":{"dur":1,"text":">> So we've solved this."},"3002":{"dur":0,"text":"So you know what?"},"3003":{"dur":1,"text":"This is like a slippery slope."},"3004":{"dur":2,"text":"I don't want to deal with having\nto have a duplicate database."},"3007":{"dur":1,"text":"It's too much money."},"3008":{"dur":4,"text":"I want to have my database\njust like in version one"},"3012":{"dur":4,"text":"where each server has\nits own local database."},"3017":{"dur":2,"text":"So I'm just going to\ndraw db on each of these."},"3019":{"dur":2,"text":">> So now each web server\nis identical in so far"},"3022":{"dur":3,"text":"as it has the same code, the same\nstatic assets, same pictures and text"},"3025":{"dur":1,"text":"and so forth."},"3026":{"dur":2,"text":"And each has its own database."},"3029":{"dur":1,"text":"I fixed the single point\nof failure problem."},"3031":{"dur":1,"text":"Now I have a database."},"3032":{"dur":3,"text":"No matter which two or one of these\nthings die, there's always one left."},"3036":{"dur":4,"text":"But what new problem have I created\nthat Dan's solution avoided?"},"3041":{"dur":1,"text":">> AUDIENCE: [INAUDIBLE]"},"3042":{"dur":1,"text":">> DAVID MALAN: Yeah, I\nhave to sync them, right?"},"3044":{"dur":3,"text":"Because either I need to sync\nwho's going where-- in other words,"},"3047":{"dur":2,"text":"if Alice visits my\nsite, and she happened"},"3050":{"dur":4,"text":"to get randomly or round robined\nor whatever, to server number one,"},"3055":{"dur":3,"text":"thereafter I have to always\nsend her to server 1."},"3058":{"dur":0,"text":"Why?"},"3059":{"dur":2,"text":"Because if I send her\nto server 2, it's going"},"3061":{"dur":1,"text":"to look like she doesn't exist there."},"3063":{"dur":1,"text":">> I'm not going to have her order history."},"3064":{"dur":1,"text":"I'm not going to have her profile there."},"3066":{"dur":3,"text":"And that just feels like\nit's inviting problems."},"3069":{"dur":2,"text":"And when Bob visits, I\nhave to send him always"},"3071":{"dur":3,"text":"to the same server, 2, or whichever\none, and Charlie to a third one,"},"3074":{"dur":0,"text":"and consistently."},"3075":{"dur":1,"text":"This isn't unreasonable, though."},"3077":{"dur":2,"text":"This is called\npartitioning your database."},"3079":{"dur":2,"text":"And in fact this was what\nFacebook did early on."},"3081":{"dur":2,"text":">> If you followed the history of\nFacebook, it started here at campus"},"3084":{"dur":1,"text":"as www.thefacebook.com."},"3085":{"dur":3,"text":"Then it evolved once Mark started\nspreading into other campuses"},"3089":{"dur":5,"text":"to be harvard.thefacebook.com and\nmit.thefacebook.com, and probably"},"3094":{"dur":2,"text":"bu.thefacebook.com, and the like."},"3097":{"dur":1,"text":"And that was because\nearly on, I don't think"},"3098":{"dur":1,"text":"you could have friends across campuses."},"3100":{"dur":0,"text":"But that's fine."},"3101":{"dur":2,"text":"Because anyone from Harvard\ngot sent to this server."},"3103":{"dur":1,"text":"Anyone from BU got sent to this server."},"3105":{"dur":2,"text":"Anyone from MIT got sent\nto this server-- in theory."},"3107":{"dur":2,"text":"I don't quite know all the\nunderlying implementation details."},"3110":{"dur":5,"text":"But he presumably partitioned people by\ntheir campus, where their network was."},"3115":{"dur":3,"text":">> So that's good up until the point\nwhere you need two servers for Harvard,"},"3118":{"dur":1,"text":"or three servers for Harvard."},"3119":{"dur":1,"text":"And then that simplicity\nkind of breaks down."},"3121":{"dur":1,"text":"But that's a reasonable approach."},"3123":{"dur":1,"text":"Let's always send Alice\nto the same place,"},"3124":{"dur":1,"text":"always send Bob to the same place."},"3126":{"dur":3,"text":"But what happens if Alice's\nserver goes offline?"},"3129":{"dur":2,"text":"Bob and Charlie can still buy\nthings and log into the site."},"3132":{"dur":1,"text":"But Alice can't."},"3133":{"dur":1,"text":"So you've lost a third\nof your user base."},"3135":{"dur":1,"text":"Maybe that's better than 100%?"},"3136":{"dur":3,"text":"But maybe it'd be nice if we could\nstill support 100% of our users"},"3140":{"dur":2,"text":"even when a third of our\nservers goes offline."},"3143":{"dur":1,"text":">> So we could sync what?"},"3144":{"dur":4,"text":"Not the users, per se, but the\ndatabase across all these servers."},"3149":{"dur":4,"text":"So now we kind of need some\nkind of interconnection"},"3153":{"dur":4,"text":"here so that the servers themselves\ncan sync-- not unreasonable."},"3157":{"dur":2,"text":"And in fact, this technology exists."},"3160":{"dur":5,"text":"In the world of databases, there's\nthe notion of master-slave databases,"},"3165":{"dur":2,"text":"or primary-secondary,\nwhere among the features"},"3168":{"dur":2,"text":"is not only to store data\nand respond with data,"},"3171":{"dur":2,"text":"but also just to constantly\nsync with each other."},"3173":{"dur":3,"text":"So any time you write or save\nsomething to this database,"},"3176":{"dur":3,"text":"it immediately gets \"replicated\"\nto the other databases as well."},"3180":{"dur":2,"text":">> And any time you read from it,\nit doesn't matter where you are."},"3182":{"dur":2,"text":"Because if in theory\nthey've all synced, you're"},"3185":{"dur":2,"text":"going to get the same view of the data."},"3187":{"dur":3,"text":"So this sounds perfect."},"3190":{"dur":1,"text":"There's got to be a catch."},"3195":{"dur":3,"text":"What might the catch be?"},"3198":{"dur":2,"text":">> AUDIENCE: [INAUDIBLE]"},"3201":{"dur":4,"text":">> DAVID MALAN: Yeah, so three times\nas much stuff could go wrong."},"3205":{"dur":1,"text":"That's a reality."},"3206":{"dur":1,"text":"It might all be the same in spirit."},"3208":{"dur":1,"text":"But someone needs to configure these."},"3210":{"dur":2,"text":"There's a higher probability that\nsomething's going to go wrong."},"3213":{"dur":5,"text":"Just combinatorially you have\nmore stuff prone to errors."},"3218":{"dur":2,"text":"What else is bad potentially?"},"3220":{"dur":0,"text":"AUDIENCE: [INAUDIBLE]"},"3224":{"dur":2,"text":">> DAVID MALAN: Yeah, so\nsyncing can be bad."},"3226":{"dur":1,"text":"Even as you might know\nfrom backups and such,"},"3228":{"dur":2,"text":"if you just are blindly making\nbackups, what if something does"},"3230":{"dur":1,"text":"go wrong on one database?"},"3231":{"dur":1,"text":"You delete something you shouldn't."},"3233":{"dur":3,"text":"You've immediately replicated\nthat problem everywhere else."},"3236":{"dur":2,"text":"So Victoria was talking-- backups\nwould be a good thing here."},"3238":{"dur":1,"text":"And so we'll get back to that."},"3240":{"dur":2,"text":"And to be clear, we're talking\nnot about backups here per se."},"3243":{"dur":5,"text":"We're talking about true replication\nor synchronization across servers."},"3248":{"dur":0,"text":"They're all live."},"3249":{"dur":2,"text":"They're not meant to\nbe used for backups."},"3252":{"dur":1,"text":">> AUDIENCE: [INAUDIBLE]"},"3253":{"dur":1,"text":"DAVID MALAN: What's that?"},"3254":{"dur":1,"text":"DAVID MALAN: Higher cost."},"3255":{"dur":4,"text":"We've tripled the cost for\nsure, although at least in terms"},"3260":{"dur":0,"text":"of the hardware."},"3261":{"dur":2,"text":"Because a database is\njust a piece of software."},"3263":{"dur":1,"text":"And a web server is a piece of software."},"3265":{"dur":2,"text":"It's probably free if we're using\nany number of open source things."},"3267":{"dur":2,"text":"But if we are using\nsomething like Oracle,"},"3270":{"dur":6,"text":"we're paying Oracle more money per\nlicenses, or Microsoft for access."},"3276":{"dur":1,"text":"There's got to be some other catch here."},"3278":{"dur":1,"text":"It can't be this simple."},"3282":{"dur":4,"text":">> So to your point, I think it was\nKareem, for geography earlier-- or no,"},"3287":{"dur":3,"text":"Roman, was it, for geography-- suppose\nthat we're being smart about this,"},"3290":{"dur":3,"text":"and we're putting one of our servers,\nand in turn our databases, in the US,"},"3294":{"dur":2,"text":"and another in Europe, another in\nSouth America, another in Africa,"},"3296":{"dur":3,"text":"another in Asia, anywhere we\nmight want around the world."},"3300":{"dur":3,"text":"We already know from our trace\nroutes that point A and point"},"3304":{"dur":2,"text":"B, if they're farther apart,\nare going to take more time."},"3306":{"dur":3,"text":">> And if some of you have used\ntools, like Facebook or Twitter"},"3310":{"dur":3,"text":"or any of these sites these days that\nare constantly changing because of user"},"3313":{"dur":3,"text":"created data, sometimes if you\nhit Reload or open the same page"},"3316":{"dur":3,"text":"in another browser, you see\ndifferent versions, almost."},"3320":{"dur":2,"text":"You might see someone's status\nupdate here but not here,"},"3322":{"dur":2,"text":"and then you reload, and then it\nappears, and you reload again,"},"3325":{"dur":1,"text":"and it disappears."},"3326":{"dur":2,"text":"In other words, keep an\neye out for this, at least"},"3329":{"dur":1,"text":"if you're using social\nnetworking especially."},"3330":{"dur":2,"text":">> Again, just because the\ndata is changing so quickly,"},"3333":{"dur":2,"text":"sometimes servers do get out of sync."},"3335":{"dur":1,"text":"And maybe it's a super small window."},"3337":{"dur":2,"text":"But 200 milliseconds, maybe\neven more than that-- it's"},"3339":{"dur":3,"text":"going to take some non-zero amount\nof time for these databases to sync."},"3343":{"dur":1,"text":"And we're not just\ntalking about one request."},"3345":{"dur":3,"text":"If a company has thousands of\nusers using it simultaneously,"},"3348":{"dur":0,"text":"they might buffer."},"3349":{"dur":2,"text":"In other words, there might\nbe a queue or a wait line"},"3352":{"dur":2,"text":"before all of those database\nqueries can get synchronized."},"3354":{"dur":1,"text":"So maybe it's actually a few seconds."},"3356":{"dur":3,"text":">> And indeed this is true I think even\nto this day with Facebook, whereby"},"3359":{"dur":2,"text":"when they synchronize from\nEast Coast to West Coast,"},"3362":{"dur":4,"text":"it has a non-trivial\npropagation delay, so to speak,"},"3366":{"dur":1,"text":"that you just kind of have to tolerate."},"3367":{"dur":3,"text":"And so it's not so much\na bug as it is a reality"},"3371":{"dur":3,"text":"that your users might not see\nthe correct data for at least"},"3374":{"dur":2,"text":">> I see this on Twitter a lot\nactually where sometimes I'll"},"3377":{"dur":3,"text":"tweet in one window, open another to\nthen see it to confirm that it indeed"},"3381":{"dur":1,"text":"went up, and it's not there yet."},"3382":{"dur":2,"text":"And I have to kind of reload,\nreload, reload-- oh, there it is."},"3385":{"dur":1,"text":"And that's not because it wasn't saved."},"3387":{"dur":2,"text":"It just hasn't propagated\nto other servers."},"3389":{"dur":3,"text":">> So this trade-off, too-- do you really\nwant to expose yourself to the risk"},"3393":{"dur":4,"text":"that if the user goes to their order\nhistory, it's not actually there yet?"},"3397":{"dur":1,"text":"I see this on certain banks."},"3398":{"dur":3,"text":"It always annoys me when, well, for one,\nyou can only go like six months back"},"3402":{"dur":3,"text":"in your bank statements in some banks,\neven though in theory they should"},"3405":{"dur":1,"text":"be able to have everything online."},"3406":{"dur":2,"text":"They just take stuff offline sometimes."},"3408":{"dur":2,"text":"Sometimes, too-- what website is it?"},"3411":{"dur":2,"text":"There's one-- oh, it's GoDaddy, I think."},"3413":{"dur":3,"text":"GoDaddy, when you check out\nbuying a domain name or something,"},"3416":{"dur":2,"text":"they'll often give you\na link to your receipt."},"3418":{"dur":2,"text":"And if you click that link right\naway, it often doesn't work."},"3421":{"dur":1,"text":"It just says, dead end, nothing here."},"3423":{"dur":2,"text":">> And that's too because of\nthese propagation delays."},"3425":{"dur":2,"text":"Because for whatever reason, they\nare taking a little bit of time"},"3428":{"dur":1,"text":"to actually generate that."},"3429":{"dur":2,"text":"So this is sort of like you want to\npull your hair out at some point."},"3432":{"dur":2,"text":"Because all you're trying to\ndo is solve a simple problem."},"3434":{"dur":2,"text":"And we keep creating new\nproblems for ourselves."},"3436":{"dur":2,"text":"So let's see if we\ncan kind of undo this."},"3438":{"dur":3,"text":">> It turns out that combining\ndatabases on all of your web servers"},"3442":{"dur":2,"text":"is not really best practice."},"3445":{"dur":2,"text":"Generally, what an engineer\nwould do, or systems architect,"},"3447":{"dur":2,"text":"would be to have different\ntiers of servers."},"3450":{"dur":2,"text":"And just for space's sake, I'll\ndraw their database up here."},"3453":{"dur":4,"text":">> We might have database and\nserver number four here"},"3458":{"dur":4,"text":"that does have connections to\neach of these servers here."},"3462":{"dur":2,"text":"So this might be our front\nend tier, as people would say."},"3465":{"dur":2,"text":"And this would be our back end tier."},"3467":{"dur":2,"text":"And that just means that\nthese face the user."},"3470":{"dur":2,"text":"And the databases don't face the user."},"3473":{"dur":2,"text":"No user can directly\naccess the database."},"3475":{"dur":3,"text":">> So let's now maybe go down\nthe route Victoria proposed."},"3479":{"dur":1,"text":"This is a single point of failure."},"3480":{"dur":1,"text":"That makes me uncomfortable."},"3482":{"dur":3,"text":"So what's perhaps the\nmost obvious solution?"},"3485":{"dur":0,"text":"AUDIENCE: [INAUDIBLE]"},"3489":{"dur":1,"text":"DAVID MALAN: Sorry, say that again."},"3491":{"dur":0,"text":"AUDIENCE: [INAUDIBLE]"},"3492":{"dur":1,"text":"DAVID MALAN: Non-production server."},"3493":{"dur":1,"text":"What do you mean?"},"3495":{"dur":1,"text":">> AUDIENCE: [INAUDIBLE]"},"3497":{"dur":2,"text":">> DAVID MALAN: Oh, OK, so backups."},"3499":{"dur":1,"text":"OK, so we could do that, certainly."},"3501":{"dur":2,"text":"And actually this is very commonly done."},"3503":{"dur":2,"text":"This might be database number five."},"3506":{"dur":2,"text":"But that's only\nconnected to number four."},"3508":{"dur":2,"text":"And you might call it a hot spare."},"3511":{"dur":3,"text":"These two databases could be configured\nto just constantly synchronize"},"3515":{"dur":3,"text":"And so if this machine dies, for\nwhatever stupid reason-- the hard drive"},"3519":{"dur":3,"text":"dies, someone trips over the\ncord, some software is flawed"},"3522":{"dur":4,"text":"and the machine hangs or crashes--\nyou could have a human literally"},"3526":{"dur":4,"text":"unplug this one from the wall\nand instead plug this one in."},"3531":{"dur":5,"text":"And then within, let's say, a\nfew minutes, maybe half an hour,"},"3536":{"dur":0,"text":"you're back online."},"3537":{"dur":2,"text":">> It's not great, but\nit's also not horrible."},"3539":{"dur":2,"text":"And you don't have to worry\nabout any synchronization issues."},"3541":{"dur":1,"text":"Because everything is already there."},"3543":{"dur":1,"text":"Because you had a perfect\nbackup ready to go."},"3545":{"dur":2,"text":">> You could be a little\nfancier about this,"},"3547":{"dur":5,"text":"as some people often do, where you\nmight have database number four here,"},"3552":{"dur":4,"text":"database number five here,\nthat are talking to each other."},"3557":{"dur":6,"text":"But you also have this\nkind of arrangement--"},"3564":{"dur":3,"text":"and it deliberately\nlooks messy, because it"},"3567":{"dur":2,"text":"is-- where all of the\nfront end servers can"},"3570":{"dur":2,"text":"talk to all of the back end servers."},"3572":{"dur":5,"text":"And so if this database doesn't\nrespond, these front end servers have"},"3578":{"dur":2,"text":"to have programming\ncode in them that says,"},"3580":{"dur":1,"text":"if you don't get a\nconnection to this database,"},"3582":{"dur":3,"text":"the primary immediately starts\ntalking to the secondary."},"3585":{"dur":2,"text":">> But this now pushes the\ncomplexity to the code."},"3588":{"dur":3,"text":"And now your developers, your software\ndevelopers, have to know about this."},"3592":{"dur":4,"text":"And you're kind of tying the code that\nyou're writing to your actual back end"},"3596":{"dur":1,"text":"implementation details,\nwhich makes it harder,"},"3598":{"dur":2,"text":"especially in a bigger\ncompany or a bigger website,"},"3600":{"dur":4,"text":"where you don't necessarily\nwant the programmers to have"},"3605":{"dur":5,"text":"to know how the database\nengineers are doing their jobs."},"3610":{"dur":2,"text":"You might want to keep those roles\nsort of functionally distinct so"},"3613":{"dur":3,"text":"that there's this layer of\nabstraction between the two."},"3616":{"dur":1,"text":">> So how might we fix this?"},"3617":{"dur":2,"text":"Well, we kind of solved\nthis problem once before."},"3620":{"dur":5,"text":"Why don't we put one of\nthese things here where"},"3625":{"dur":5,"text":"it talks in turn to number four and\nfive, all of the front end web servers"},"3630":{"dur":2,"text":"talk to this middleman, and the\nmiddleman in turn routes their data?"},"3633":{"dur":4,"text":"In fact, what might be a\ngood name for this thing?"},"3638":{"dur":1,"text":">> AUDIENCE: [INAUDIBLE]"},"3639":{"dur":1,"text":"DAVID MALAN: OK, database manager."},"3641":{"dur":6,"text":"But what might a term be that\nwe could reuse for this device?"},"3648":{"dur":1,"text":"We're balancing."},"3649":{"dur":2,"text":"Yeah, so actually, I'm\nnot being fair here."},"3652":{"dur":4,"text":"So a load balancer would imply that\nwe're toggling back and forth here,"},"3656":{"dur":2,"text":"which needn't actually be the case."},"3658":{"dur":1,"text":"So there's a few ways we could do this."},"3660":{"dur":3,"text":">> If this is in fact a load balancer, the\nstory is exactly the same as before."},"3663":{"dur":1,"text":"Some of the requests go to 4."},"3665":{"dur":0,"text":"Some of them go to 5."},"3666":{"dur":2,"text":"Because now we can handle\ntwice as much throughput."},"3668":{"dur":2,"text":"But this connection\nhere is super important."},"3671":{"dur":2,"text":"They have to stay constantly\nsynchronized and hopefully"},"3674":{"dur":3,"text":"are not geographically too far apart so\nthat the synchronization is essentially"},"3677":{"dur":0,"text":"instantaneous."},"3678":{"dur":1,"text":"Otherwise we might have a problem."},"3680":{"dur":0,"text":">> So that's not bad."},"3681":{"dur":3,"text":"But again, we've\nintroduced a new problem."},"3685":{"dur":1,"text":"What problem have I just recreated?"},"3690":{"dur":1,"text":"Single point of failure."},"3691":{"dur":1,"text":"So what's the solution to that?"},"3692":{"dur":6,"text":"So as Victoria's fond to spend money,\nwe can take this guy out and do this."},"3699":{"dur":2,"text":"And I'm just going to\nmove here enough room."},"3701":{"dur":1,"text":"And it's going to be a little messy."},"3703":{"dur":1,"text":"I'm going to keep drawing lines."},"3704":{"dur":2,"text":"Suppose that all of\nthose lines go into both?"},"3707":{"dur":5,"text":">> A very common technique here would be\nto use a technique called heartbeat"},"3712":{"dur":4,"text":"whereby each of these devices,\nleft and right load balancers,"},"3717":{"dur":3,"text":"or whatever we want to call them,\nis constantly saying, I'm alive,"},"3720":{"dur":2,"text":"I'm alive, I'm alive, I'm alive."},"3723":{"dur":2,"text":"One of them by default\nacts as the primary."},"3725":{"dur":3,"text":"So all traffic is being routed through\nthe one on the left, for instance,"},"3729":{"dur":1,"text":"by default, arbitrarily."},"3731":{"dur":5,"text":">> But as soon as the guy on the right\ndoesn't hear from the left guy anymore,"},"3736":{"dur":3,"text":"the one on the right is programmed\nto automatically, for instance,"},"3740":{"dur":3,"text":"take over the IP address\nof the one on the left,"},"3744":{"dur":4,"text":"and therefore become the primary, and\nmaybe send an email or a text message"},"3748":{"dur":3,"text":"to the humans to say, hey,\nthe left primary is offline."},"3751":{"dur":1,"text":"I will become primary for now."},"3753":{"dur":2,"text":"So vice president becomes\npresident, so to speak."},"3755":{"dur":2,"text":"And someone has to go save\nthe president, if you want."},"3758":{"dur":2,"text":"Because now we have a temporary\nsingle point of failure."},"3761":{"dur":3,"text":">> So as complicated or stressful as\nthis might seem to start being,"},"3765":{"dur":1,"text":"this is how you solve these problems."},"3766":{"dur":1,"text":"You do throw money at it."},"3768":{"dur":1,"text":"You throw hardware at it."},"3769":{"dur":2,"text":"But unfortunately you\nadd complexity for it."},"3772":{"dur":4,"text":"But the result, ultimately, is that\nyou have a much more, in theory,"},"3776":{"dur":1,"text":"robust architecture."},"3777":{"dur":1,"text":"It's still not perfect."},"3778":{"dur":3,"text":"Because even when we have-- we might\nnot have a single point of failure."},"3782":{"dur":2,"text":"We now have dual points of failure."},"3785":{"dur":2,"text":"But if two things go wrong,\nwhich absolutely could,"},"3787":{"dur":1,"text":"we're still going to be offline."},"3789":{"dur":2,"text":">> And so very common in the\nindustry is to describe"},"3791":{"dur":2,"text":"your up time in terms of nines."},"3794":{"dur":4,"text":"And sort of the goal\nto aspire to is 99.999%"},"3798":{"dur":2,"text":"of the time your site is online."},"3801":{"dur":2,"text":"Or even better, add a\nfew more nines to that."},"3804":{"dur":3,"text":"Unfortunately, these\nnines are very expensive."},"3808":{"dur":1,"text":"And let's actually do this out."},"3809":{"dur":6,"text":"So if I open up my big calculator again,\n365 days in a year, 24 hours in a day,"},"3815":{"dur":9,"text":"60 minutes in an hour, and\n60 seconds in a minute,"},"3824":{"dur":3,"text":"that's how many seconds there are\nin a year if I did this correctly."},"3828":{"dur":7,"text":"So if we times this by .99999, that's\nhow much time we want to aspire to."},"3835":{"dur":4,"text":"So that means we should be up\nthis many seconds during the year."},"3840":{"dur":3,"text":"So if I now subtract the\noriginal value, or rather"},"3843":{"dur":3,"text":"this new value from the\nfirst-- 316 seconds,"},"3847":{"dur":2,"text":"which of course is five minutes."},"3849":{"dur":4,"text":">> So if your website or your company is\nclaiming \"five nines,\" whereby you're"},"3853":{"dur":3,"text":"up 99.99% of the time,\nthat means you better"},"3857":{"dur":6,"text":"have been smart enough and quick\nenough and flush enough with resources"},"3863":{"dur":4,"text":"that your servers are only offline\nfive minutes out of the year."},"3867":{"dur":2,"text":"It's an expensive and\nhard thing to aspire to."},"3869":{"dur":1,"text":">> So it's a trade off, too."},"3871":{"dur":4,"text":"99.999% of the time is pretty\ndarn hard and expensive."},"3875":{"dur":2,"text":"Five minutes-- you can barely get\nto the server to physically replace"},"3878":{"dur":1,"text":"something that's gone wrong."},"3880":{"dur":2,"text":"And that's why we start wiring\nthings together more complicated"},"3882":{"dur":5,"text":"apriori so that the computers\ncan sort of fix themselves."},"3888":{"dur":1,"text":"Yeah."},"3889":{"dur":2,"text":">> AUDIENCE: [INAUDIBLE]"},"3902":{"dur":2,"text":"DAVID MALAN: The problem could\nbe in any number of places."},"3904":{"dur":0,"text":"And in fact--"},"3905":{"dur":2,"text":">> AUDIENCE: [INAUDIBLE]"},"3907":{"dur":1,"text":"DAVID MALAN: Absolutely, absolutely."},"3908":{"dur":2,"text":"And as the picture is\ngetting more complicated,"},"3910":{"dur":1,"text":"it could be the web servers."},"3912":{"dur":2,"text":"It could be the power to the building."},"3914":{"dur":3,"text":"It could be something physical, like\nthe cables got frayed or kicked out."},"3917":{"dur":1,"text":"It could be the database\nisn't responding."},"3919":{"dur":3,"text":"It could be they updated their operating\nsystem and something is hanging."},"3922":{"dur":1,"text":"So there are so many other moving parts."},"3924":{"dur":2,"text":"And so a lot of the engineering\nthat has to go behind this"},"3927":{"dur":3,"text":"is really just trade offs, like how\nmuch time, how much money is it actually"},"3930":{"dur":2,"text":"worth, and what are the threats\nyou're really worried about?"},"3932":{"dur":2,"text":"For instance, in the\ncourses I teach at Harvard,"},"3935":{"dur":2,"text":"we use a lot of cloud computing, which\nwe'll start taking a look at now,"},"3938":{"dur":2,"text":"in fact, where we use\nAmazon Web Services."},"3941":{"dur":1,"text":"Just because that's the\none we started with."},"3942":{"dur":2,"text":"But there's ever more these days\nfrom Google and Microsoft and others."},"3945":{"dur":4,"text":"And we consciously choose to put all\nof our courses' virtual machines,"},"3950":{"dur":5,"text":"as they're called, in the I think\nit's Western Virginia data center."},"3955":{"dur":2,"text":"Most of our students\nhappen to be from the US,"},"3957":{"dur":2,"text":"though there are certainly\nsome internationally."},"3959":{"dur":2,"text":">> But the reality is it's just\nsimpler and it's cheaper for us"},"3962":{"dur":2,"text":"to put all of our eggs\nin the Virginia basket,"},"3965":{"dur":2,"text":"even though I know if something\ngoes wrong in Virginia,"},"3968":{"dur":4,"text":"as has occasionally happened-- like\nif there's a hurricane or some weather"},"3972":{"dur":3,"text":"event like that, if there's some\npower grid issue or the like-- all"},"3975":{"dur":4,"text":"of our courses' data might go offline\nfor some number of minutes or hours"},"3980":{"dur":1,"text":"or even longer."},"3981":{"dur":2,"text":">> But the amount of complexity\nthat would be required,"},"3984":{"dur":2,"text":"and the amount of money that would\nbe required, to operate everything"},"3986":{"dur":4,"text":"in parallel in Europe or in California\njust doesn't make so much sense."},"3991":{"dur":3,"text":"So it's a rational trade\noff, but a painful one"},"3995":{"dur":2,"text":"when you're actually\nhaving that downtime."},"3997":{"dur":4,"text":">> Well, let's transition right now to\nsome of the cloud-based solutions"},"4001":{"dur":1,"text":"to some of these problems."},"4003":{"dur":1,"text":"Everything we've been\ndiscussing thus far"},"4005":{"dur":2,"text":"is kind of problems that have\nbeen with us for some time,"},"4007":{"dur":2,"text":"whether you have your own\nservers in your company,"},"4009":{"dur":3,"text":"whether you go to a co-location\nplace like a data center and share"},"4012":{"dur":2,"text":"space with someone else,\nor nowadays in the cloud."},"4015":{"dur":1,"text":">> And what's nice about\nthe cloud is that all"},"4017":{"dur":2,"text":"of these things I'm\ndrawing as physical objects"},"4019":{"dur":2,"text":"can now be thought of as\nsort of virtual objects"},"4022":{"dur":2,"text":"in the cloud that are\nsimulated with software."},"4024":{"dur":3,"text":"In other words, the computers today,\nservers today, like the Dell picture"},"4027":{"dur":4,"text":"I showed earlier, are so fast, have\nso much RAM, so much CPU, so much disk"},"4031":{"dur":4,"text":"space, that people have written\nsoftware to virtually partition"},"4036":{"dur":4,"text":"one server up into the illusion of it\nbeing two servers, or 200 servers, so"},"4041":{"dur":3,"text":"that each of us customers\nhas the illusion of having"},"4044":{"dur":4,"text":"not just an account on some web\nhost, but our own machine that we're"},"4049":{"dur":1,"text":"renting from someone else."},"4050":{"dur":3,"text":">> But it's a virtual machine in\nso far as on one Dell server,"},"4054":{"dur":5,"text":"it again might be partitioned up into\ntwo or 200 or more virtual machines,"},"4059":{"dur":4,"text":"all of which give someone administrative\naccess, but in a way where none of us"},"4063":{"dur":4,"text":"knows or can access other virtual\nmachines on the same hardware."},"4068":{"dur":5,"text":"So to paint a picture in today's slides,\nI have this shot here from a website"},"4073":{"dur":0,"text":"called Docker."},"4074":{"dur":2,"text":">> So this is a little more\ndetail than we actually need."},"4076":{"dur":2,"text":"But if you view this as\nyour infrastructure--"},"4079":{"dur":3,"text":"so just the hardware your own,\nyour servers, the racks, the data"},"4082":{"dur":3,"text":"center, and all of that-- you would\ntypically run a host operating system."},"4086":{"dur":1,"text":"So something like-- it could be Windows."},"4088":{"dur":1,"text":"It wouldn't be Mac OS."},"4089":{"dur":2,"text":"Because that's not really\nenterprise these days."},"4091":{"dur":4,"text":"So it would be Linux or Solaris\nor Unix or BSD or FreeBSD"},"4095":{"dur":4,"text":"or any number of other operating systems\nthat are either free or commercial."},"4099":{"dur":2,"text":">> And then you run a\nprogram, special program,"},"4102":{"dur":4,"text":"called a hypervisor, or\nvirtual machine monitor, VMM."},"4106":{"dur":5,"text":"And these are products, if you're\nfamiliar, like VMware or VirtualBox"},"4111":{"dur":2,"text":"or Virtual PC or others."},"4114":{"dur":4,"text":"And what those programs do is exactly\nthat feature I described earlier."},"4118":{"dur":3,"text":"It creates the illusion\nthat one physical machine"},"4121":{"dur":2,"text":"can be multiple virtual machines."},"4124":{"dur":3,"text":">> And so these colorful boxes up top is\npainting a picture of the following."},"4128":{"dur":2,"text":"This hypervisor, this\npiece of software, call it"},"4130":{"dur":3,"text":"VMware, running on some other\noperating system, call it Linux,"},"4134":{"dur":2,"text":"is creating the illusion that\nthis physical computer is actually"},"4136":{"dur":3,"text":"one, two, three virtual computers."},"4140":{"dur":4,"text":"So I've now bought, as the owner of\nthis hardware, one physical computer."},"4144":{"dur":1,"text":"And now I'm renting\nit to three customers."},"4146":{"dur":3,"text":">> And those three customers all think\nthey have a dedicated virtual machine."},"4149":{"dur":1,"text":"And it's not bait and switch."},"4150":{"dur":2,"text":"It's more disclosure that\nyou're using a virtual machine."},"4153":{"dur":3,"text":"But technologically, we all\nhave full administrative control"},"4157":{"dur":2,"text":"over each of those guest\noperating systems, which could"},"4159":{"dur":1,"text":"be any number of operating systems."},"4161":{"dur":1,"text":">> I can install anything I want."},"4163":{"dur":1,"text":"I can upgrade it as I want."},"4164":{"dur":2,"text":"And I don't even have to know or\ncare about the other operating"},"4167":{"dur":2,"text":"systems on that computer,\nthe other virtual machines,"},"4169":{"dur":5,"text":"unless the owner of all this gray\nstuff is being a little greedy"},"4175":{"dur":2,"text":"and is overselling his or her resources."},"4177":{"dur":3,"text":">> So if you're taking one\nphysical machine and selling it"},"4180":{"dur":3,"text":"to not 200 but 400\ncustomers, at some point"},"4184":{"dur":2,"text":"we're going to trip into those\nsame performance issues as before."},"4187":{"dur":3,"text":"Because you only have a finite\namount of disk and RAM and so forth."},"4190":{"dur":2,"text":"And a virtual machine\nis just a program that's"},"4193":{"dur":2,"text":"pretending to be a\nfull fledged computer."},"4196":{"dur":1,"text":"So you get what you pay for here."},"4198":{"dur":4,"text":">> So you'll find online you might pay a\nreputable company maybe $100 a month"},"4202":{"dur":3,"text":"for your own virtual machine, or\nyour own virtual private server,"},"4205":{"dur":1,"text":"which is another term for it."},"4207":{"dur":3,"text":"Or you might find some fly by\nnight where you pay $5.99 a month"},"4210":{"dur":1,"text":"for your own virtual machine."},"4212":{"dur":3,"text":"But odds are you don't have nearly\nas much performance available to you,"},"4215":{"dur":2,"text":"because they've been overselling it\nso, than you would with the higher"},"4218":{"dur":3,"text":"tier of service or the better vendor."},"4222":{"dur":2,"text":">> So what does this actually mean for us?"},"4224":{"dur":1,"text":"So let me go to this."},"4226":{"dur":3,"text":"I'm going to go to aws.amazon.com."},"4229":{"dur":2,"text":"Just because they have\na nice menu of options."},"4231":{"dur":3,"text":"But these same lessons apply to a\nwhole bunch of other cloud vendors."},"4234":{"dur":3,"text":"Unfortunately, it's often more\nmarketing speak than anything."},"4238":{"dur":0,"text":"And this keeps changing."},"4239":{"dur":2,"text":"So you go to a website like this."},"4241":{"dur":2,"text":"And this really doesn't\ntell you much of anything."},"4244":{"dur":3,"text":">> And even I, as I look at this, don't\nreally know what any of these things"},"4247":{"dur":1,"text":"necessarily do until I dive in."},"4249":{"dur":1,"text":"But let's start on the left, Compute."},"4250":{"dur":2,"text":"And I'm going to click this."},"4252":{"dur":3,"text":"And now Amazon has frankly an\noverwhelming number of services"},"4256":{"dur":1,"text":"these days."},"4257":{"dur":3,"text":"But Amazon EC2 is perhaps the simplest."},"4261":{"dur":4,"text":">> Amazon EC2 will create for us exactly\nthe picture we saw a moment ago."},"4265":{"dur":4,"text":"It's how they make a lot of\ntheir money in the cloud."},"4270":{"dur":2,"text":"Apparently Netflix and others\nare in the cloud with them."},"4272":{"dur":3,"text":"This is all typically\nfluffy marketing speak."},"4276":{"dur":3,"text":"So what I want to do is go to Pricing--\nor rather let's go to Instances"},"4279":{"dur":4,"text":"first just to paint a picture of this."},"4283":{"dur":2,"text":">> So this will vary by vendor."},"4285":{"dur":3,"text":"And we don't need to get too deep into\nthe weeds here of how this all works."},"4289":{"dur":5,"text":"But the way Amazon, for instance,\nrents you a virtual machine or a server"},"4294":{"dur":2,"text":"in the cloud is they've got\nthese sort of funny names,"},"4297":{"dur":3,"text":"like t2.nano, which means small,\nor t2.large, which means big."},"4301":{"dur":2,"text":"Each of them gives you either\none or two virtual CPUs."},"4303":{"dur":1,"text":">> Why is it a virtual CPU?"},"4305":{"dur":3,"text":"Well, the physical machine might\nhave 64 or more actual CPUs."},"4309":{"dur":2,"text":"But again, through software,\nthey create the illusion"},"4312":{"dur":3,"text":"that that one machine can be\ndivvied up to multiple users."},"4315":{"dur":3,"text":"So we can think of this as\nhaving one Intel CPU or two."},"4318":{"dur":2,"text":"CPU credits per hour-- I would\nhave to read the fine print"},"4321":{"dur":1,"text":"as to what this actually means."},"4322":{"dur":3,"text":"It means how much of the machine\nyou can use per hour vis-a-vis"},"4325":{"dur":1,"text":"other customers on that hardware."},"4327":{"dur":3,"text":">> Here's how much RAM or memory you\nget-- either half a gigabyte, or 500"},"4331":{"dur":2,"text":"megabytes, or 1 gigabyte, or 2."},"4334":{"dur":3,"text":"And then the storage just refers to\nwhat kind of disks they give you."},"4337":{"dur":2,"text":"There's different storage\ntechnologies that they offer."},"4339":{"dur":2,"text":"But more interesting than this\nthen might be the pricing."},"4342":{"dur":2,"text":">> So if you are the CTO or\nan engineer who doesn't"},"4345":{"dur":2,"text":"want to run a server in your\noffice, for whatever reason,"},"4348":{"dur":1,"text":"and it's way too\ncomplicated or expensive"},"4350":{"dur":3,"text":"to buy servers and co-locate them and\npay rent in some physical cage space"},"4353":{"dur":2,"text":"somewhere-- you just want to sit\nat your laptop late at night,"},"4356":{"dur":3,"text":"type in your credit card information,\nand rent servers in the cloud-- well,"},"4360":{"dur":1,"text":"we can do it here."},"4361":{"dur":3,"text":"I'm going to go down to-- Linux\nis a popular operating system."},"4365":{"dur":1,"text":"And let's just get a sense of things."},"4367":{"dur":1,"text":"Whoops-- too big."},"4368":{"dur":4,"text":">> So let's look at their tiniest\nvirtual machine, which seems to have,"},"4373":{"dur":3,"text":"for our purposes, one CPU\nand 500 megabytes of RAM."},"4377":{"dur":1,"text":"That's pretty small."},"4378":{"dur":2,"text":"But frankly, web servers don't\nneed to do all that much."},"4380":{"dur":1,"text":"You have better specs in your laptop."},"4382":{"dur":2,"text":"But you don't need those\nspecs these days for things."},"4384":{"dur":6,"text":"You're going to pay $0.0065 per hour."},"4391":{"dur":0,"text":">> So let's see."},"4392":{"dur":3,"text":"If there are 24 hours in a day, and\nwe're paying this much per hour,"},"4395":{"dur":4,"text":"it will cost you $0.15 to rent that\nparticular server in the cloud."},"4400":{"dur":1,"text":"And that's just for a day."},"4402":{"dur":4,"text":"If we do this 365-- $57 to\nrent that particular server."},"4407":{"dur":1,"text":"So it sounds super cheap."},"4408":{"dur":2,"text":">> That's also super low performance."},"4411":{"dur":6,"text":"So we, for courses I teach here, tend\nto use I think t2.smalls or t2.mediums."},"4417":{"dur":2,"text":"And we might have a few hundred\nusers, a few thousand users, total."},"4419":{"dur":0,"text":"It's pretty modest."},"4420":{"dur":1,"text":"So let's see what this would cost."},"4422":{"dur":6,"text":"So if I do this cost times 24\nhours times 365, this one's $225."},"4429":{"dur":1,"text":"And for the courses\nI teach, we generally"},"4431":{"dur":3,"text":"run two of everything, for\nredundancy and also for performance."},"4434":{"dur":4,"text":"So we might spend, therefore,\n$500 for the servers"},"4439":{"dur":1,"text":"that we might need per year."},"4440":{"dur":4,"text":">> Now, if you need more performance--\nlet's take a look at memory."},"4445":{"dur":1,"text":"We've talked about memory quite a bit."},"4446":{"dur":2,"text":"And if you do need more\nmemory-- and 64 gigabytes"},"4449":{"dur":2,"text":"is the number I kept mentioning--\nthis is almost $1 per hour."},"4452":{"dur":3,"text":"And you can pretty quickly see where\nthis goes-- so 24 hours times 365."},"4456":{"dur":4,"text":"So now it's $8,000 per year\nfor a pretty decent server."},"4460":{"dur":2,"text":">> So at some point, there's\nthis inflection point"},"4463":{"dur":6,"text":"where now we could spend $6,000\nprobably and buy a machine like that"},"4469":{"dur":4,"text":"and amortize its cost over maybe two,\nthree years, the life of the machine."},"4473":{"dur":5,"text":"But what might push you in\nfavor or disfavor of renting"},"4478":{"dur":2,"text":"a machine in the cloud like this?"},"4481":{"dur":2,"text":"Again, this is comparable, probably,\nto one of those Dell servers"},"4484":{"dur":3,"text":"we saw pictured a bit ago."},"4487":{"dur":3,"text":">> AUDIENCE: [INAUDIBLE]"},"4494":{"dur":1,"text":">> DAVID MALAN: Yeah, that's a huge upside."},"4496":{"dur":2,"text":"Because we're not buying the\nmachine, we don't have to unbox it."},"4498":{"dur":0,"text":"We don't have to lift it."},"4499":{"dur":1,"text":"We don't have to plug it into our rack."},"4501":{"dur":0,"text":"We don't have to plug it in."},"4502":{"dur":1,"text":"We don't have to pay\nthe electrical bill."},"4503":{"dur":1,"text":">> We don't have to turn\nthe air conditioning on."},"4505":{"dur":2,"text":"When a hard drive dies, we don't have\nto drive in in the middle of the night"},"4507":{"dur":0,"text":"to fix it."},"4508":{"dur":1,"text":"We don't have to set up monitoring."},"4509":{"dur":4,"text":"We don't have to-- the list goes on\nand on of all of the physical things"},"4513":{"dur":2,"text":"you don't need to do\nbecause of \"the cloud.\""},"4515":{"dur":2,"text":">> And to be clear, cloud computing\nis this very overused term."},"4518":{"dur":4,"text":"It really just means paying someone\nelse to run servers for you,"},"4522":{"dur":2,"text":"or renting space on\nsomeone else's servers."},"4525":{"dur":1,"text":"So the term \"cloud computing\" is new."},"4527":{"dur":3,"text":"The idea is decades old."},"4530":{"dur":1,"text":"So that's pretty compelling."},"4532":{"dur":1,"text":">> And what more do you get?"},"4533":{"dur":4,"text":"Well, you also get the ability to\ndo everything on a laptop at home."},"4538":{"dur":2,"text":"In other words, all of the\npictures I was just drawing--"},"4540":{"dur":3,"text":"and it wasn't that long ago that even\nI was crawling around on a server floor"},"4544":{"dur":2,"text":"plugging the cables in for\neach of the lines that you see,"},"4546":{"dur":2,"text":"and upgrading the operating\nsystems, and changing drives around."},"4549":{"dur":2,"text":"There's a lot of\nphysicality to all of that."},"4551":{"dur":3,"text":">> But what's beautiful about virtual\nmachines, as the name kind of suggests,"},"4555":{"dur":2,"text":"now there are web-based\ninterfaces whereby"},"4557":{"dur":2,"text":"if you want the equivalent\nof a line from this server"},"4559":{"dur":4,"text":"to another, just type, type, type,\nclick and drag, click Submit, and voila,"},"4563":{"dur":1,"text":"you have it wired up virtually."},"4565":{"dur":1,"text":"Because it's all done in software."},"4567":{"dur":1,"text":"And the reason it's done\nin software is again"},"4569":{"dur":3,"text":"because we have so much RAM and so\nmuch CPU available to us these days,"},"4572":{"dur":2,"text":"even though all of\nthat stuff takes time,"},"4574":{"dur":3,"text":"it is slower to run things\nin software than hardware,"},"4578":{"dur":5,"text":"just as it's slower to use a mechanical\ndevice like a hard drive than RAM,"},"4583":{"dur":1,"text":"something purely electronic."},"4585":{"dur":2,"text":"We have so many resources\navailable to us."},"4587":{"dur":2,"text":"We humans are sort of invariantly slow."},"4589":{"dur":3,"text":"And so now the machines can do\nso much more per unit of time."},"4593":{"dur":2,"text":"We have these abilities\nto do things virtually."},"4596":{"dur":2,"text":">> And I will say for courses\nI teach, for instance, here,"},"4599":{"dur":4,"text":"we have about maybe a dozen or\nso total of virtual machines"},"4603":{"dur":2,"text":"like that running at any given\ntime doing front end stuff,"},"4605":{"dur":1,"text":"doing back end stuff."},"4607":{"dur":2,"text":"We have all of our storage."},"4610":{"dur":2,"text":"So any videos, including things\nlike this that we're shooting,"},"4612":{"dur":1,"text":"we end up putting into the cloud."},"4614":{"dur":4,"text":"Amazon has services called Amazon S3,\ntheir simple storage service, which"},"4618":{"dur":1,"text":"is just like disk space in the cloud."},"4620":{"dur":1,"text":"They have something\ncalled CloudFront, which"},"4622":{"dur":3,"text":"is a CDN service, Content\nDelivery Network service, which"},"4626":{"dur":4,"text":"means they take all of your files and\nfor you automagically replicate it"},"4630":{"dur":1,"text":"around the world."},"4631":{"dur":1,"text":">> So they don't do it preemptively."},"4632":{"dur":2,"text":"But the first time someone\nin India requests your file,"},"4635":{"dur":1,"text":"they'll potentially cache it locally."},"4636":{"dur":2,"text":"The first time in China, the\nfirst time in Brazil that happens,"},"4639":{"dur":1,"text":"they'll start caching it locally."},"4640":{"dur":1,"text":"And you don't have to do any of that."},"4642":{"dur":3,"text":"And so it is so incredibly\ncompelling these days to move things"},"4646":{"dur":1,"text":"into the cloud."},"4647":{"dur":4,"text":"Because you have this ability literally\nto not have humans doing nearly as much"},"4651":{"dur":0,"text":"work."},"4652":{"dur":3,"text":"And you literally don't need as many\nhumans doing these jobs anymore--"},"4655":{"dur":2,"text":"\"ops,\" or operational roles, anymore."},"4658":{"dur":4,"text":"You really just need\ndevelopers and fewer engineers"},"4663":{"dur":1,"text":"who can just do things virtually."},"4664":{"dur":1,"text":"In fact, just to give\nyou a sense of this,"},"4666":{"dur":5,"text":"let me go to pricing for\none other product here."},"4671":{"dur":6,"text":"Let's see something like CDN S3."},"4678":{"dur":2,"text":"So this is essentially a\nvirtual hard drive in the cloud."},"4681":{"dur":13,"text":"And if we scroll down to pricing--\nso it's $0.007 per gigabyte."},"4694":{"dur":1,"text":"And that's-- how do we do this?"},"4696":{"dur":1,"text":"I think that's per month."},"4697":{"dur":4,"text":">> So if that's per month-- or per day?"},"4701":{"dur":1,"text":"Dan, is this per day?"},"4703":{"dur":1,"text":"This is per month, OK."},"4704":{"dur":3,"text":"So if this is per month--\nsorry, it's the $0.03 per month."},"4708":{"dur":1,"text":"There's 12 months out of the year."},"4709":{"dur":2,"text":"So how much data might\nyou store in the cloud?"},"4712":{"dur":5,"text":"A gigabyte isn't huge, but I\ndon't know, like 1 terabyte,"},"4717":{"dur":1,"text":"so like 1,000 of those."},"4718":{"dur":1,"text":"That's not all that much."},"4719":{"dur":4,"text":"It's $368 to store a terabyte\nof data in Amazon's cloud."},"4724":{"dur":1,"text":"So what are some of\nthe trade offs, then?"},"4726":{"dur":1,"text":"It can't all be good."},"4727":{"dur":4,"text":"Nothing we've talked about today is\nsort of without a catch or a cost."},"4732":{"dur":3,"text":"So what's bad about moving\neverything into the cloud?"},"4735":{"dur":0,"text":"AUDIENCE: Security."},"4736":{"dur":1,"text":"DAVID MALAN: OK, what do you mean?"},"4737":{"dur":0,"text":"AUDIENCE: [INAUDIBLE]"},"4741":{"dur":1,"text":"DAVID MALAN: Yeah, right."},"4742":{"dur":2,"text":"And do you really want\nsome random engineers"},"4745":{"dur":3,"text":"at Amazon that you'll never meet having\nphysical access to those computers,"},"4748":{"dur":2,"text":"and if they really\nwanted, virtual access?"},"4751":{"dur":4,"text":"And even though in\ntheory software-- well,"},"4755":{"dur":2,"text":"encryption can absolutely\nprotect you against this."},"4757":{"dur":1,"text":"So if what you're\nstoring on your servers"},"4759":{"dur":2,"text":"is encrypted-- less of a concern."},"4761":{"dur":3,"text":">> But as soon as a human has physical\naccess to a machine, encryption aside,"},"4765":{"dur":1,"text":"all bets are sort of off."},"4766":{"dur":2,"text":"You might know from yesteryear\nthat PCs especially,"},"4768":{"dur":2,"text":"even if you had those things\ncalled \"BIOS passwords,\""},"4770":{"dur":3,"text":"were when your desktop booted up,\nyou'd be prompted with a password that"},"4773":{"dur":2,"text":"has nothing to do with\nWindows, you can typically"},"4775":{"dur":3,"text":"just open the chassis of the\nmachine, find tiny little pins,"},"4779":{"dur":2,"text":"and use something called\na jumper and just connect"},"4782":{"dur":3,"text":"those two wires for about a second,\nthereby completing a circuit."},"4785":{"dur":1,"text":"And that would eliminate the password."},"4787":{"dur":2,"text":">> So when you have physical access to a\ndevice, you can do things like that."},"4789":{"dur":1,"text":"You can remove the hard drive."},"4791":{"dur":1,"text":"You can gain access to it that way."},"4793":{"dur":2,"text":"And so this is why, in\nthe case of Dropbox,"},"4795":{"dur":2,"text":"for instance, it's a little\nworrisome that not only do they"},"4797":{"dur":4,"text":"have the data, even though it's\nencrypted, they also have the key."},"4802":{"dur":2,"text":"Other worries?"},"4804":{"dur":3,"text":">> AUDIENCE: [INAUDIBLE]"},"4827":{"dur":2,"text":"DAVID MALAN: Yeah, it's very\ntrue-- the Googles, the Apples,"},"4830":{"dur":1,"text":"the Microsofts of the world."},"4831":{"dur":2,"text":"And in fact, how long have\nyou had your iPhone for?"},"4834":{"dur":1,"text":"Yeah, give or take."},"4835":{"dur":0,"text":"AUDIENCE: [INAUDIBLE]"},"4836":{"dur":1,"text":"DAVID MALAN: I'm sorry?"},"4837":{"dur":1,"text":"You're among those who\nhas an iPhone, right?"},"4839":{"dur":0,"text":"AUDIENCE: Yes."},"4840":{"dur":1,"text":"DAVID MALAN: How long\nhave you had your iPhone?"},"4842":{"dur":1,"text":"AUDIENCE: [INAUDIBLE]"},"4843":{"dur":1,"text":"DAVID MALAN: OK, so\nApple literally knows"},"4845":{"dur":3,"text":"where you've been every hour of\nthe day for the last five years."},"4849":{"dur":2,"text":">> AUDIENCE: [INAUDIBLE]"},"4854":{"dur":1,"text":"DAVID MALAN: Which is\na wonderful feature."},"4856":{"dur":1,"text":"AUDIENCE: [INAUDIBLE]"},"4857":{"dur":3,"text":"DAVID MALAN: Yeah, but\ntrade off for sure."},"4860":{"dur":0,"text":"AUDIENCE: [INAUDIBLE]"},"4864":{"dur":3,"text":">> DAVID MALAN: Yeah, it's very easy to."},"4867":{"dur":0,"text":"AUDIENCE: [INAUDIBLE]"},"4872":{"dur":1,"text":"DAVID MALAN: Other downsides?"},"4873":{"dur":3,"text":"AUDIENCE: [INAUDIBLE]"},"4886":{"dur":1,"text":"DAVID MALAN: Absolutely--\ntechnologically,"},"4887":{"dur":3,"text":"economically, it's pretty compelling to\nsort of gain these economies of scale"},"4891":{"dur":2,"text":"and move everything into\nthe so-called cloud."},"4893":{"dur":2,"text":"But you probably do want to\ngo with some of the biggest"},"4895":{"dur":3,"text":"fish, the Amazons, the Googles, the\nMicrosofts-- Rackspace is pretty big--"},"4899":{"dur":2,"text":"and a few others, and not\nnecessarily fly by night folks"},"4902":{"dur":3,"text":"for whom it's very easy to do\nthis kind of technique nowadays."},"4905":{"dur":3,"text":"And that's whom you can\npay $5.99 per month to."},"4909":{"dur":1,"text":"But you'll certainly\nget what you pay for."},"4910":{"dur":3,"text":">> When you say [INAUDIBLE], that's when\nthings like these five nines come up,"},"4914":{"dur":4,"text":"whereby even if technologically\nwe can't really guarantee 99.999,"},"4918":{"dur":2,"text":"we'll just build in some kind\nof penalty to the contract"},"4920":{"dur":3,"text":"so that if that does happen, at least\nthere's some cost to us, the vendor."},"4923":{"dur":4,"text":"And that's what you would typically\nbe getting them to agree to."},"4927":{"dur":1,"text":">> AUDIENCE: [INAUDIBLE]"},"4929":{"dur":2,"text":">> DAVID MALAN: And the\none sort of blessing"},"4932":{"dur":3,"text":"is that even when we go down, for\ninstance, or even certain companies,"},"4935":{"dur":2,"text":"the reality is Amazon,\nfor instance, has so many"},"4937":{"dur":3,"text":"darn customers, well-known customers,\noperating out of certain data centers"},"4941":{"dur":4,"text":"that when something really goes wrong,\nlike acts of God and weather and such,"},"4946":{"dur":3,"text":"if there's any sort of silver lining,\nit's that you're in very good company."},"4949":{"dur":1,"text":"Your website might be offline."},"4950":{"dur":2,"text":"But so is like half of\nthe popular internet."},"4952":{"dur":3,"text":"And so it's arguably a little\nmore palatable to your customers"},"4956":{"dur":2,"text":"if it's more of an internet\nthing than an acme.com thing."},"4958":{"dur":3,"text":"But that's a bit of a cheat."},"4961":{"dur":4,"text":">> So in terms of other things to look at,\njust so that we don't rule out others,"},"4966":{"dur":4,"text":"if you go to Microsoft Azure, they\nhave both Linux and Windows stuff"},"4971":{"dur":1,"text":"that's comparable to Amazon's."},"4973":{"dur":4,"text":"If you go to Google Compute Engine,\nthey have something similar as well."},"4977":{"dur":2,"text":"And just to round out\nthese cloud offerings,"},"4980":{"dur":2,"text":"I'll make mention of one other thing."},"4982":{"dur":1,"text":"This is a popular website\nthat's representative"},"4984":{"dur":3,"text":"of a class of technologies."},"4988":{"dur":3,"text":"The ones we just talked\nabout, Amazon, would be IAAS,"},"4992":{"dur":4,"text":"Infrastructure As A Service, where you\nsort of physical hardware as a service."},"4997":{"dur":1,"text":"There's SAAS."},"4998":{"dur":1,"text":"Actually, let me jot these down."},"5003":{"dur":4,"text":">> IAAS-- Infrastructure\nAs A Service, SAAS,"},"5008":{"dur":3,"text":"and PAAS, which are\nremarkably confusing acronyms"},"5011":{"dur":2,"text":"that do describe three\ndifferent types of things."},"5014":{"dur":2,"text":"And the acronyms themselves\ndon't really matter."},"5016":{"dur":1,"text":"This is all of the cloud stuff\nwe've just been talking about,"},"5018":{"dur":3,"text":"the lower level stuff, the\nvirtualization of hardware and storage"},"5021":{"dur":3,"text":"in the so-called cloud, whether it's\nAmazon, Microsoft, Google, or other."},"5024":{"dur":2,"text":">> Software as a service--\nall of us kind of use this."},"5027":{"dur":2,"text":"If you use Google Apps\nfor Gmail or calendaring,"},"5029":{"dur":2,"text":"any of these web-based\napplications that 10 years ago we"},"5032":{"dur":3,"text":"would have double clicked icons on\nour desktop, software as a service"},"5035":{"dur":1,"text":"is now really web application."},"5037":{"dur":2,"text":"And platform as a\nservice kind of depends."},"5040":{"dur":3,"text":">> And one example I'll give you here\nin the context of cloud computing--"},"5043":{"dur":3,"text":"there's one company that's quite\npopular these days, Heroku."},"5046":{"dur":2,"text":"And they are a service,\na platform, if you will,"},"5048":{"dur":2,"text":"that runs on top of\nAmazon's infrastructure."},"5051":{"dur":4,"text":"And they just make it even easier\nfor developers and engineers"},"5055":{"dur":2,"text":"to get web-based applications online."},"5058":{"dur":3,"text":">> It is a pain, initially, to use\nAmazon Web Services and other things."},"5062":{"dur":2,"text":"Because you actually have\nto know and understand"},"5064":{"dur":3,"text":"about databases and web servers and\nload balancers and all the stuff"},"5067":{"dur":0,"text":"I just talked about."},"5068":{"dur":4,"text":"Because all Amazon has done is not\nhidden those design challenges."},"5072":{"dur":3,"text":"They've just virtualized them\nand move them into a browser,"},"5075":{"dur":1,"text":"into software instead of hardware."},"5077":{"dur":5,"text":">> But companies like Heroku and other\nPAAS providers, Platform As A Service,"},"5083":{"dur":3,"text":"they use those barebone fundamentals\nthat we just talked about,"},"5086":{"dur":3,"text":"and they build easier to\nuse software on top of it"},"5090":{"dur":3,"text":"so that if you want to get a web-based\napplication online these days,"},"5094":{"dur":1,"text":"you certainly have to\nknow how to program."},"5095":{"dur":4,"text":"You need to know Java or Python or PHP\nor Ruby or a bunch of other languages."},"5100":{"dur":1,"text":">> But you also need a place to put it."},"5102":{"dur":2,"text":"And we talked earlier about\ngetting a web hosting company."},"5104":{"dur":3,"text":"That's sort of the like mid-2000s\napproach to getting something online."},"5108":{"dur":3,"text":"Nowadays you might instead pay someone\nlike Heroku a few dollars a month."},"5112":{"dur":3,"text":"And essentially, once you've\ndone some initial configuration,"},"5115":{"dur":3,"text":"to update your website, you\njust type a command in a window."},"5118":{"dur":2,"text":"And whatever code you've written\nhere on your laptop immediately"},"5121":{"dur":2,"text":"gets distributed to any number\nof servers in the cloud."},"5124":{"dur":2,"text":">> And Heroku takes care of\nall of the complexity."},"5126":{"dur":2,"text":"They figure all the database\nstuff, all the load balancing,"},"5128":{"dur":2,"text":"all of the headaches that we've\njust written on the board,"},"5131":{"dur":1,"text":"and hide all of that for you."},"5133":{"dur":2,"text":"And in return, you just\npay them a bit more."},"5136":{"dur":3,"text":"So you have these infrastructures as\na service, platforms as a service,"},"5139":{"dur":1,"text":"and then software as a service."},"5141":{"dur":3,"text":"It's, again, this\nabstraction or layering."},"5145":{"dur":5,"text":">> Any questions on the cloud or\nbuilding one's own infrastructure?"},"5151":{"dur":1,"text":"All right, that was a lot."},"5152":{"dur":1,"text":"Why don't we go ahead and\ntake our 15 minute break here."},"5154":{"dur":3,"text":"We'll come back with a few new concepts\nand a bit of hands-on opportunity"},"5157":{"dur":1,"text":"before the evening is over."}}