{"0.33":{"start":"0.33","dur":"2.375","text":"COLT MCANLIS: In this episode\nof Cloud Performance Atlas,"},"2.71":{"start":"2.705","dur":"1.705","text":"I help some leaping\nlizards track down"},"4.41":{"start":"4.41","dur":"2.13","text":"why their bandwidth\nwas off in the weeds."},"6.54":{"start":"6.54","dur":"1.47","text":"Will we catch\nwhat&#39;s bugging them?"},"8.01":{"start":"8.01","dur":"1.21","text":"Stay tuned to find out."},"9.22":{"start":"9.22","dur":"2.05","text":"[MUSIC PLAYING]"},"11.77":{"start":"11.77","dur":"3.68","text":"I got a nice call from the Gecko\nProtocol team, a B2B company"},"15.45":{"start":"15.45","dur":"2.85","text":"offering a custom, lightweight\nnetworking protocol, built"},"18.30":{"start":"18.3","dur":"2.334","text":"for gaming and other\nreal-time graphics systems."},"20.63":{"start":"20.634","dur":"2.166","text":"Their team was seeing lower\nthan expected throughput"},"22.80":{"start":"22.8","dur":"1.43","text":"for their back-end\nmachines, which"},"24.23":{"start":"24.23","dur":"2.11","text":"are responsible for\ntransferring and transcoding"},"26.34":{"start":"26.34","dur":"2.19","text":"large video and graphics files."},"28.53":{"start":"28.53","dur":"2.4","text":"Their architecture worked a\nlittle something like this."},"30.93":{"start":"30.93","dur":"2.04","text":"A client will push about\ntwo terabytes of data"},"32.97":{"start":"32.97","dur":"1.029","text":"to cloud storage."},"34.00":{"start":"33.999","dur":"1.791","text":"At the same time, it\nkicks off work request"},"35.79":{"start":"35.79","dur":"3.3","text":"to a front end, which leverages\na TCP load balancer to spin up"},"39.09":{"start":"39.09","dur":"2.91","text":"a bunch of compute and engine\ninstances in a single region"},"42.00":{"start":"42","dur":"2.28","text":"to feed on that data,\ntalk between each other,"},"44.28":{"start":"44.28","dur":"1.74","text":"and get the work done."},"46.02":{"start":"46.02","dur":"1.9","text":"Most of this was\nworking as expected."},"47.92":{"start":"47.92","dur":"1.61","text":"However, the Gecko\nProtocol group"},"49.53":{"start":"49.53","dur":"2.4","text":"was concerned about VM\nto VM throughput, where"},"51.93":{"start":"51.93","dur":"3.6","text":"they were only seeing about\n1.5 gigabit per second max"},"55.53":{"start":"55.53","dur":"0.96","text":"connections."},"56.49":{"start":"56.49","dur":"1.62","text":"I duplicated their\nsetup on my side,"},"58.11":{"start":"58.11","dur":"2.16","text":"which involved a bunch\nof one-CPU machines"},"60.27":{"start":"60.27","dur":"2.53","text":"in a single region\nand ran iPerf on them."},"62.80":{"start":"62.8","dur":"1.829","text":"The result was\nabout 1.95 gigabits"},"64.63":{"start":"64.629","dur":"1.791","text":"per second, which was\nmuch higher than what"},"66.42":{"start":"66.42","dur":"1.44","text":"Gecko Protocol was seeing."},"67.86":{"start":"67.86","dur":"2.64","text":"Now, I knew from experience\nthat for high bandwidth systems,"},"70.50":{"start":"70.5","dur":"1.89","text":"they were obviously\nusing too small a machine"},"72.39":{"start":"72.39","dur":"2.07","text":"for those efforts, since\nnetworking throughput"},"74.46":{"start":"74.46","dur":"1.47","text":"is related to core count."},"75.93":{"start":"75.93","dur":"3.48","text":"Bumping it up to about 16 CPU\nmachines in the US central one"},"79.41":{"start":"79.41","dur":"3","text":"region, I was able to\nget about 15.9 gigabits"},"82.41":{"start":"82.41","dur":"1.96","text":"per second--\nobviously, much better."},"84.37":{"start":"84.37","dur":"2.125","text":"However, when the Gecko\nProtocol team switched over"},"86.50":{"start":"86.495","dur":"2.935","text":"to this configuration, they\ndidn&#39;t see the same results."},"89.43":{"start":"89.43","dur":"3.09","text":"They only ended up at about\n1.6 gigabits per second."},"92.52":{"start":"92.52","dur":"1.92","text":"After about 20 minutes\nof a video chat trying"},"94.44":{"start":"94.44","dur":"1.74","text":"to get our\nconfigurations identical,"},"96.18":{"start":"96.18","dur":"1.994","text":"the solution smacked\nus right in the face."},"98.17":{"start":"98.174","dur":"2.416","text":"The problem was that their\nteam was testing the connection"},"100.59":{"start":"100.59","dur":"2.04","text":"to the external\nIP of the server,"},"102.63":{"start":"102.63","dur":"2.917","text":"while I was testing\non the internal IP."},"105.55":{"start":"105.547","dur":"1.583","text":"See, if two machines\nare communicating"},"107.13":{"start":"107.13","dur":"1.98","text":"using their internal\nIPs, then they"},"109.11":{"start":"109.11","dur":"2.19","text":"can send traffic on\nGoogle&#39;s private internet,"},"111.30":{"start":"111.3","dur":"1.41","text":"which is super fast."},"112.71":{"start":"112.71","dur":"2.55","text":"Using the public IP, however,\nforces the data packet"},"115.26":{"start":"115.26","dur":"1.62","text":"to get pushed to\nthe public internet"},"116.88":{"start":"116.88","dur":"2.28","text":"before coming back to\nthe machine, a.k.a."},"119.16":{"start":"119.16","dur":"1.052","text":"not the fastest."},"120.21":{"start":"120.212","dur":"1.708","text":"When we switched over\ntheir configuration"},"121.92":{"start":"121.92","dur":"2.79","text":"to use the internal IPs with\nthe larger machine setup,"},"124.71":{"start":"124.71","dur":"1.59","text":"the bandwidth went\nthrough the roof--"},"126.30":{"start":"126.3","dur":"2.25","text":"15.9 gigabits per second."},"128.55":{"start":"128.55","dur":"2.13","text":"For Gecko Protocol, this\nsmall debugging session"},"130.68":{"start":"130.68","dur":"1.95","text":"resulted in their\nvideo and graphics data"},"132.63":{"start":"132.63","dur":"2.64","text":"transfer rate\nimproving by about 14x."},"135.27":{"start":"135.27","dur":"2.67","text":"For more great Cloud content,\nsubscribe to the Google Cloud"},"137.94":{"start":"137.94","dur":"1.62","text":"YouTube channel,\nand stay up to date"},"139.56":{"start":"139.56","dur":"2.759","text":"with other Cloud Performance\nAtlas video content."},"142.32":{"start":"142.319","dur":"1.541","text":"Because when it\ncomes to performance,"},"143.86":{"start":"143.86","dur":"1.041","text":"every millisecond counts."},"144.90":{"start":"144.901","dur":"3.289","text":"[MUSIC PLAYING]"}}