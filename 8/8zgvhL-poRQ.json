{"0":{"dur":0,"text":"TIM HANSON: Cool."},"1":{"dur":1,"text":"I'm Tim Hanson."},"2":{"dur":1,"text":"I'm the CTO at Pipe."},"4":{"dur":3,"text":"And this is a\nlittle bit different"},"7":{"dur":5,"text":"in that everybody else\nhas been super techie."},"13":{"dur":5,"text":"This is a little bit more user\nfocused and maybe a tiny bit"},"18":{"dur":1,"text":"more aspirational."},"19":{"dur":0,"text":"I don't know."},"20":{"dur":2,"text":"Anyway, I'm going\nto show you how"},"22":{"dur":4,"text":"to build a simple, secure,\nprivate webcam with WebRTC"},"27":{"dur":2,"text":"on a cheap device."},"30":{"dur":2,"text":"Because why not?"},"33":{"dur":4,"text":"But first, congratulations."},"37":{"dur":3,"text":"WebRTC is five."},"41":{"dur":1,"text":"I don't say this enough,\nI always get up here"},"43":{"dur":1,"text":"and grumble about\nthings that I'm missing."},"44":{"dur":2,"text":"But actually, really\nit is fantastic."},"47":{"dur":2,"text":"We've achieved a big success."},"50":{"dur":3,"text":"Billions of endpoints, high\nquality, good security."},"53":{"dur":1,"text":"Standards are nearly there."},"55":{"dur":3,"text":"So it's something\nto be pleased about."},"58":{"dur":2,"text":"But there are things\nthat could be easier,"},"61":{"dur":1,"text":"and they're working on them."},"62":{"dur":3,"text":"But there are still things\nthat could be easier."},"66":{"dur":4,"text":"Anyway, the feature of the\nstory today for those of you"},"70":{"dur":5,"text":"who want a little nap\nbefore the recession"},"76":{"dur":4,"text":"is-- and you'll read this and\nyou'll know what I'm doing."},"80":{"dur":3,"text":"I'm just going use WebRTC to\nbuild a webcam on a Raspberry"},"84":{"dur":1,"text":"Pi."},"85":{"dur":2,"text":"And the net result will\nbe that there will be"},"87":{"dur":1,"text":"no open ports on this webcam."},"89":{"dur":2,"text":"I say webcam, actually,\nit's an IP camera."},"92":{"dur":2,"text":"It's like a classic\nmistake everybody makes,"},"94":{"dur":1,"text":"but I'm just going\nto keep making it"},"95":{"dur":2,"text":"because everyone does."},"98":{"dur":1,"text":"So there are no open ports."},"99":{"dur":1,"text":"There will be minimal\ncentral service,"},"101":{"dur":1,"text":"and they will use no passwords."},"103":{"dur":2,"text":"And I will do a brief\ncode walkthrough"},"105":{"dur":1,"text":"that you can sleep through."},"106":{"dur":1,"text":"So it's fine."},"107":{"dur":3,"text":"AUDIENCE: How do you\ndo a DDoS within that?"},"110":{"dur":1,"text":"TIM HANSON: You're\ngoing to DDoS it for me?"},"112":{"dur":2,"text":"AUDIENCE: No, how are you\ngoing to do a DDoS within it"},"115":{"dur":3,"text":"if it has no open ports?"},"118":{"dur":2,"text":"TIM HANSON: It can still DDoS\nyou, but not the other way"},"120":{"dur":0,"text":"around."},"121":{"dur":4,"text":"Anyway, so how did I\nget started on this?"},"125":{"dur":2,"text":"Well, like a lot of my life,\nit's kind of accidental."},"131":{"dur":2,"text":"There was a hackathon\nchallenge a couple of years"},"133":{"dur":4,"text":"ago in Paris, which\nthe Parrot were"},"137":{"dur":1,"text":"offering quite a nice prize."},"138":{"dur":4,"text":"It was like 600 euros worth\nof drones for the first person"},"143":{"dur":6,"text":"who could control one of\ntheir Roly drones with WebRTC."},"150":{"dur":4,"text":"And Neil and I talked about\nit, and we didn't do it"},"154":{"dur":2,"text":"because we were busy."},"156":{"dur":1,"text":"And then didn't\nnobody else did it."},"158":{"dur":2,"text":"So they re-ran the\ncompetition two months later."},"160":{"dur":1,"text":"And Neil and I looked\nat each other and said,"},"162":{"dur":1,"text":"we've got to do this."},"163":{"dur":1,"text":"So we sat down and\nspent about a week"},"165":{"dur":4,"text":"and we wrote this thing that\ncontrolled one of their Roly"},"169":{"dur":2,"text":"drones over WebRTC."},"172":{"dur":1,"text":"And it looked like this."},"174":{"dur":1,"text":"I don't know if you\ncan see that diagram."},"176":{"dur":1,"text":"Yeah, probably."},"177":{"dur":3,"text":"So we took the\nmeetecho janus gateway,"},"181":{"dur":5,"text":"and we took that plug-in that\nthey had already the handle"},"187":{"dur":4,"text":"GStreamer and we did stuff to\nit so that instead of talking"},"191":{"dur":9,"text":"to file, it talked to the ARSDK,\nwhich comes from Parrot, that"},"200":{"dur":1,"text":"lets you control the drone."},"202":{"dur":2,"text":"But it also generates\na MJPEG stream,"},"204":{"dur":2,"text":"which we then fed\ninto GStreamer,"},"206":{"dur":5,"text":"pushed up, out into VP8, pushed\nthat back up into the Janus"},"212":{"dur":3,"text":"gateway, and then communicated\nthat out over the web"},"215":{"dur":1,"text":"to a WebRTC browser."},"217":{"dur":3,"text":"And it actually worked\nsurprisingly well."},"220":{"dur":3,"text":"I mean, it wasn't desperately\nstable, but anyway, we won."},"223":{"dur":2,"text":"And I now have a drone\nat home which I actually"},"225":{"dur":2,"text":"don't know what to do\nwith, but there you go."},"227":{"dur":4,"text":"So the thing there\nis, we did this"},"232":{"dur":2,"text":"and I published a\nblog about it, which"},"234":{"dur":2,"text":"you can see the link to there."},"237":{"dur":2,"text":"And I got a bunch of\npeople who would e-mail me"},"239":{"dur":2,"text":"on a fairly regular\nbasis saying,"},"241":{"dur":2,"text":"we're building something\na bit like that."},"244":{"dur":2,"text":"How about we use your code?"},"246":{"dur":0,"text":"How does this work?"},"247":{"dur":1,"text":"Can you help us?"},"248":{"dur":2,"text":"And I had very interesting\nconversations with them"},"251":{"dur":2,"text":"over e-mail and voice\nand video and whatever."},"253":{"dur":3,"text":"And I realized\nthat actually what"},"257":{"dur":3,"text":"we built was totally\natypical of what you"},"260":{"dur":2,"text":"would expect in a real device."},"262":{"dur":2,"text":"And the big thing is\nto do with the fact"},"265":{"dur":3,"text":"that I'm an old guy\nwho's old enough to have"},"269":{"dur":2,"text":"a slash 24 rooted to his house."},"272":{"dur":2,"text":"So I have IP addresses to\nspare-- I have public IP"},"274":{"dur":1,"text":"addresses to spare."},"275":{"dur":2,"text":"And I have a bunch of\nold stuff lying around."},"277":{"dur":3,"text":"So it's not difficult\nfor me to scare up"},"280":{"dur":5,"text":"a machine with enough CPU\nto do the transcoding."},"286":{"dur":3,"text":"And yes, certificates,\nthat's kind of thing I do."},"289":{"dur":2,"text":"And setting up a web\nservice, no big deal."},"292":{"dur":2,"text":"And another Wi-Fi\ncard, no big deal."},"294":{"dur":1,"text":"But when you look\nat that and you say,"},"296":{"dur":3,"text":"that's the bill of materials\nfor my IoT gateway,"},"300":{"dur":2,"text":"it stops making any sense."},"302":{"dur":4,"text":"You can't expect any of those\nattributes for the gateway"},"306":{"dur":3,"text":"to your washing machine, your\nwebcam, any of those things."},"310":{"dur":1,"text":"It's just not going to happen."},"312":{"dur":2,"text":"So what you find\nis the people who"},"314":{"dur":2,"text":"are building these things who\ntalk to me go away and say,"},"316":{"dur":2,"text":"we can't build\nthat architecture."},"319":{"dur":4,"text":"That's just not something\nthat's practical, which is fine."},"323":{"dur":2,"text":"So what you find is the\ncurrent best practice"},"326":{"dur":1,"text":"looks a lot like this."},"330":{"dur":1,"text":"You root everything\nthrough the cloud."},"332":{"dur":2,"text":"You take your device, you root\neverything up to the cloud,"},"335":{"dur":2,"text":"you have a cloud service\nthat does all this,"},"337":{"dur":1,"text":"and then it roots it\nback down to the user."},"339":{"dur":1,"text":"And there's a variant\nof that where the cloud"},"341":{"dur":1,"text":"service is actually just a VPN."},"342":{"dur":1,"text":"It doesn't have a huge\namount of intelligence,"},"344":{"dur":4,"text":"it just does some validation\nin terms of authentication"},"349":{"dur":1,"text":"with keys or whatever."},"350":{"dur":2,"text":"But basically, that's\nthe kind of classic."},"352":{"dur":3,"text":"And this actually\nis best practice."},"356":{"dur":3,"text":"And the thing is, it's\nhugely costly for the vendor."},"359":{"dur":2,"text":"Because particularly for\nsomething like a webcam,"},"361":{"dur":3,"text":"they've got to support five\nyears worth of video streaming."},"364":{"dur":1,"text":"They've got to build\nthat into their budget--"},"366":{"dur":3,"text":"the bandwidth for five years\nworth of video streaming."},"369":{"dur":2,"text":"And they're going to run this\ncloud service for five years"},"372":{"dur":2,"text":"or however long they think\nthe life of this device is."},"375":{"dur":1,"text":"And you've got to\nbudget for that,"},"376":{"dur":1,"text":"so it's kind of a\nscary thing to do."},"378":{"dur":2,"text":"And then the vendor has\nto hold all the auth keys."},"381":{"dur":1,"text":"Now, that doesn't sound\nlike a big burden,"},"383":{"dur":1,"text":"except that particularly\nin Europe, there"},"385":{"dur":3,"text":"are privacy regulations, which\nmeans that when they lose them,"},"388":{"dur":1,"text":"they get slapped with fines."},"390":{"dur":3,"text":"So they actually have to have\nan ongoing defensive strategy"},"393":{"dur":2,"text":"to try and protect\nthe auth keys."},"395":{"dur":1,"text":"What what's more,\nall the traffic"},"396":{"dur":1,"text":"is going through their\nservice it's probably"},"398":{"dur":1,"text":"not encrypted end to end."},"400":{"dur":5,"text":"So they've effectively got a\nwebcam into your kid's bedroom"},"405":{"dur":2,"text":"or whatever."},"407":{"dur":3,"text":"And that's an expensive\nthing to protect yourself."},"411":{"dur":2,"text":"The lawsuits that you might\nget if that went wrong, quite"},"414":{"dur":1,"text":"expensive."},"416":{"dur":2,"text":"And the whole thing\nis completely useless"},"418":{"dur":1,"text":"if the cloud service goes down."},"420":{"dur":2,"text":"Cloud service goes\ndown, you're done."},"422":{"dur":2,"text":"And you end up\nwith a high latency"},"424":{"dur":3,"text":"because it's going through the\ncloud and it may not need to."},"428":{"dur":5,"text":"And this is arguable-- I had\na long argument with a guy"},"433":{"dur":1,"text":"from Azure about this."},"434":{"dur":2,"text":"But there's an\nargument particularly"},"437":{"dur":2,"text":"with the VPN version\nof this architecture"},"439":{"dur":2,"text":"that once you've broken\none of these devices,"},"441":{"dur":2,"text":"you're actually on the inside\nof the VPN to some extent."},"444":{"dur":2,"text":"And you've probably\ngot an inside track"},"446":{"dur":2,"text":"into breaking the rest of them."},"449":{"dur":2,"text":"So it's a scary architecture."},"451":{"dur":3,"text":"It's expensive to\nmaintain, basically."},"454":{"dur":4,"text":"So what you find that\nthe IP webcams do"},"458":{"dur":3,"text":"is they go the other way."},"461":{"dur":3,"text":"They have a local service\nthat runs on the device,"},"465":{"dur":3,"text":"and then they use\nthe router-- they"},"469":{"dur":2,"text":"either put the\ndevice onto the DMZ"},"471":{"dur":5,"text":"or use UPNP or somehow\nexpose that to the IP."},"476":{"dur":2,"text":"They push the IP address\nup to DNS or somewhere"},"479":{"dur":3,"text":"like that so it's findable."},"482":{"dur":1,"text":"There can be no\ncertificate on that"},"483":{"dur":4,"text":"because it's probably\ndoesn't have a domain name."},"488":{"dur":2,"text":"Or if it does-- well, there\ncould be a certificate,"},"491":{"dur":2,"text":"possibly even with something\nlike [INAUDIBLE] encrypt"},"493":{"dur":0,"text":"you could do it."},"494":{"dur":3,"text":"But generally, they don't."},"498":{"dur":2,"text":"It has a local authentication\nrunning on the device."},"501":{"dur":3,"text":"So your password is\nstored on the device."},"504":{"dur":1,"text":"And it works quite\nwell in the LAN."},"506":{"dur":1,"text":"I mean, if you're\non the same LAN,"},"507":{"dur":3,"text":"you get the best\npossible performance."},"510":{"dur":2,"text":"But-- and this is the\nbig but-- the ports"},"513":{"dur":1,"text":"are available to hackers."},"514":{"dur":4,"text":"So you then have a device that\nhas to be reasonably secure."},"519":{"dur":6,"text":"And there's also the\nproblem that the user"},"525":{"dur":4,"text":"has put the password in or\nhasn't actually, quite often."},"530":{"dur":3,"text":"So you end up with something\nthat has got a weak password"},"533":{"dur":1,"text":"or default password."},"537":{"dur":1,"text":"How typical?"},"539":{"dur":3,"text":"So this thing, and we actually\nare on the wrong coast"},"542":{"dur":1,"text":"to have actually felt\nthe pain of this,"},"543":{"dur":6,"text":"but these webcams, allegedly,\nwere sufficiently involved"},"550":{"dur":2,"text":"in the attack-- the DDoS attack."},"553":{"dur":2,"text":"The firm was shamed\ninto recalling them."},"556":{"dur":2,"text":"Now, that's a big moment because\nthat's actual serious money."},"559":{"dur":1,"text":"That's money."},"560":{"dur":1,"text":"It's not just\nembarrassment, it's"},"561":{"dur":2,"text":"actual money when\nyou recall stuff."},"564":{"dur":4,"text":"Because your supplies\nexpect you to pay something."},"568":{"dur":2,"text":"The people who are\nselling your devices"},"570":{"dur":4,"text":"expect you to repay them the\nstuff that you've taken back."},"575":{"dur":2,"text":"So this is starting to become\na commercial issue and not"},"578":{"dur":4,"text":"just an embarrassment\nor a security issue."},"582":{"dur":2,"text":"So what you actually\nwant is a combination."},"585":{"dur":1,"text":"You want a combination\nsuch that you've"},"586":{"dur":7,"text":"got service on the device\nthat's cheap for the vendor."},"594":{"dur":2,"text":"So what you do is you run\na little WebRTC service"},"597":{"dur":0,"text":"on the device."},"598":{"dur":2,"text":"But it's reachable,\nit's findable."},"601":{"dur":3,"text":"There's a rendezvous server\nout in the big wide world"},"604":{"dur":1,"text":"sitting in a cloud."},"605":{"dur":2,"text":"And you want to trust that\nas little as possible."},"607":{"dur":1,"text":"So you don't want\nit to do the auth,"},"609":{"dur":2,"text":"but you do want it to\ndo just the finding"},"612":{"dur":1,"text":"and joining things up."},"613":{"dur":2,"text":"And you want to make\nit so that you're"},"616":{"dur":3,"text":"using ICE to get through the\nrouter instead of the UPMP"},"620":{"dur":3,"text":"because it's a much\nmore one-way thing."},"623":{"dur":3,"text":"And then you want to use\nDCLS SRTP because you've got"},"627":{"dur":3,"text":"end-to-end encrypted thing and\nthe vendor doesn't have to care"},"630":{"dur":2,"text":"about where they've got your\nsecrets or not because they"},"632":{"dur":0,"text":"haven't."},"633":{"dur":5,"text":"And ideally, you want both\nthe passwords and the ports"},"638":{"dur":4,"text":"to be closed so that they're\nless hackable, at least."},"642":{"dur":3,"text":"You'll never get perfect,\nbut you can get better."},"646":{"dur":3,"text":"So a little history lesson here."},"650":{"dur":6,"text":"I was involved-- I did a\nstartup 16 years ago doing"},"657":{"dur":0,"text":"web security."},"658":{"dur":1,"text":"And it's actually\njust been sold."},"659":{"dur":2,"text":"I got out a while\nback, but it's just"},"661":{"dur":2,"text":"been sold to a big UK company."},"664":{"dur":1,"text":"And what we learned\nin that space"},"666":{"dur":3,"text":"was very similar that\nthe original websites"},"669":{"dur":3,"text":"were all hand crafted and they\nwere fantastically insecure."},"673":{"dur":3,"text":"And then slowly, because there\naren't enough security-trained"},"676":{"dur":3,"text":"engineers and there\nnever will be,"},"679":{"dur":1,"text":"and then slowly\nwhat happened was"},"681":{"dur":5,"text":"that people published solutions\nin the form of frameworks."},"687":{"dur":2,"text":"So there would be a framework\nthat had the right security"},"690":{"dur":1,"text":"behaviors."},"691":{"dur":3,"text":"And if you use the framework,\nthen most of the common errors"},"694":{"dur":2,"text":"wouldn't happen because you're\nusing the framework that"},"697":{"dur":1,"text":"was reasonably well-designed."},"698":{"dur":2,"text":"And then you'd have things\nlike best practice guidance"},"700":{"dur":2,"text":"and then you'd have\ntesting on the other side."},"703":{"dur":2,"text":"So some of the\nvendors would have--"},"705":{"dur":3,"text":"you couldn't, for example,\nuse credit cards on your site"},"709":{"dur":2,"text":"unless you passed a PCI\ntest, that kind of stuff."},"711":{"dur":2,"text":"So you have a level of testing."},"714":{"dur":2,"text":"And then what you end up with\nis you no longer need a security"},"717":{"dur":1,"text":"engineer to build this stuff."},"718":{"dur":2,"text":"You can use\nJavaScript engineers."},"720":{"dur":2,"text":"And there are many more\nJavaScript engineers,"},"723":{"dur":4,"text":"and they actually tend to build\nbetter, more usable products"},"727":{"dur":2,"text":"in the sense that they're much\ncloser to the users mindset"},"730":{"dur":2,"text":"than the security\nengineers often are."},"732":{"dur":3,"text":"So it's a win all around."},"736":{"dur":3,"text":"So that informs where I\nended up with at Pipe."},"739":{"dur":2,"text":"So we mooched through\nall this, and I"},"741":{"dur":2,"text":"realized that actually there was\na thing here that needed doing"},"744":{"dur":1,"text":"and that actually\nsomebody might pay for."},"748":{"dur":2,"text":"So as an example\nof that, I'm going"},"751":{"dur":10,"text":"to show you the\ncode to build a--"},"761":{"dur":1,"text":"see if we can get\nthis into a mode"},"762":{"dur":1,"text":"where you can actually\nsee what it's doing."},"769":{"dur":5,"text":"Presentation mode,\ngone completely."},"774":{"dur":1,"text":"There we go."},"775":{"dur":8,"text":"Right, so this is 60 lines\nof HTML and JavaScript,"},"784":{"dur":2,"text":"which is a complete webcam."},"786":{"dur":4,"text":"So we start off with\nyou need a canvas."},"790":{"dur":2,"text":"You need somewhere to put\nthis image at the end."},"792":{"dur":2,"text":"So we create a\ncanvas of some size,"},"795":{"dur":2,"text":"and we also create an\nimage because we're"},"797":{"dur":1,"text":"going to store an\nimage somewhere"},"799":{"dur":2,"text":"and do some manipulation on it."},"801":{"dur":3,"text":"And then once the\npage is loaded,"},"805":{"dur":1,"text":"we need to find out who we are."},"807":{"dur":4,"text":"So we go and ask what actually\nwill become called the Pipe"},"811":{"dur":2,"text":"SDK, but at the moment,\nit's called [INAUDIBLE]"},"814":{"dur":2,"text":"for historical reasons."},"816":{"dur":2,"text":"And once you know\nwho you are, you then"},"819":{"dur":1,"text":"go off and do something."},"820":{"dur":2,"text":"And what we do is do a\nlittle bit of setting up."},"823":{"dur":4,"text":"We go and find a\ngraphics context"},"828":{"dur":2,"text":"that's associated with\nthis camera element"},"830":{"dur":1,"text":"we created down here."},"832":{"dur":4,"text":"And we store it, and we\nassociate also with the image"},"836":{"dur":1,"text":"when the onload comes."},"838":{"dur":4,"text":"We'll draw into that context--\nthat graphics context."},"842":{"dur":1,"text":"So we've done that."},"843":{"dur":2,"text":"Now, we'll go off and talk\nto the rendezvous server--"},"846":{"dur":2,"text":"just open a web socket\nto the rendezvous server."},"848":{"dur":2,"text":"And once we've got\na rendezvous server,"},"851":{"dur":4,"text":"we go and talk to the\nlet's say Pipe API"},"855":{"dur":3,"text":"and say, hey, here's your\nconnection to the rendezvous"},"858":{"dur":3,"text":"server and this is my identity."},"862":{"dur":2,"text":"And then you ask it,\nwho are my friends?"},"864":{"dur":2,"text":"Now, the nice thing is that\nmy friends are stored locally."},"867":{"dur":2,"text":"I'm not asking the rendezvous\nserver who my friends are."},"870":{"dur":4,"text":"I have stored them\nlocally in the local DB."},"875":{"dur":3,"text":"So I can ask them privately\nwho my friends are."},"878":{"dur":1,"text":"Having found this\nlist, I'm going"},"880":{"dur":2,"text":"to actually-- simplification."},"883":{"dur":3,"text":"I'm going to say that I'm\ngoing to speak to the last one"},"886":{"dur":2,"text":"So end of the list."},"889":{"dur":2,"text":"Because that's a nice example."},"892":{"dur":2,"text":"So I've done that."},"894":{"dur":1,"text":"And this is actually the\nmost interesting line"},"895":{"dur":1,"text":"in the whole thing."},"896":{"dur":2,"text":"Having done that, we\nask the Pipe service"},"899":{"dur":6,"text":"to create me a link between\nhere and the other guy"},"905":{"dur":1,"text":"with the attribute of a camera."},"907":{"dur":1,"text":"So what I'm saying\nis, I want to talk"},"908":{"dur":3,"text":"to the camera on\nmy Raspberry Pi."},"911":{"dur":2,"text":"And having done that, I'm\njust going to send you"},"914":{"dur":1,"text":"a command, which says read."},"915":{"dur":1,"text":"So I send a read command."},"917":{"dur":5,"text":"When I get a message\nback, I'll pause it,"},"922":{"dur":2,"text":"add a little bit of\nmagic on the front which"},"924":{"dur":5,"text":"says that it's a JPEG,\nand set it on the image."},"930":{"dur":2,"text":"And then I'll go and\nask for another one."},"932":{"dur":0,"text":"And that's it."},"933":{"dur":2,"text":"That is the webcam."},"936":{"dur":3,"text":"So with any luck, we\ncan show you that."},"939":{"dur":1,"text":"If I can remember how\nto get out of this mood."},"951":{"dur":3,"text":"So this is it running that\npage, and with any luck,"},"954":{"dur":3,"text":"we are going-- yes, we're\ngoing to go through."},"958":{"dur":1,"text":"And there we go,\nwe have a webcam."},"959":{"dur":3,"text":"So this is a very\ndark webcam somewhere."},"969":{"dur":1,"text":"Am I on the right network?"},"970":{"dur":1,"text":"Yeah, I'm on the right network."},"972":{"dur":1,"text":"Let's do that again."},"973":{"dur":1,"text":"Let's move this webcam\nso that it's not actually"},"975":{"dur":0,"text":"facing the lights."},"983":{"dur":0,"text":"I'm the wrong way up."},"984":{"dur":4,"text":"Anyway, so we now\nhave a Raspberry Pi."},"989":{"dur":2,"text":"It should be doing about\nfour or five frames a second,"},"991":{"dur":2,"text":"but they seem to be\non different networks."},"994":{"dur":1,"text":"So we're getting a bit\nof roundtrip-ing there."},"996":{"dur":7,"text":"But anyway, so we have\nthat on the webcam."},"1003":{"dur":2,"text":"So what next?"},"1005":{"dur":0,"text":"Oh, yes."},"1006":{"dur":2,"text":"A little clean up."},"1009":{"dur":2,"text":"And I can show you what it\nlooks like on the device"},"1011":{"dur":0,"text":"as well, I think."},"1025":{"dur":2,"text":"So there's the\nRaspberry Pi in focus,"},"1027":{"dur":2,"text":"and I'm just resetting it there."},"1030":{"dur":8,"text":"OK so back to me,\nwhich I am on that one."},"1039":{"dur":0,"text":"There we go."},"1047":{"dur":3,"text":"So you can see that actually\nthere wasn't very much of that."},"1051":{"dur":2,"text":"It wasn't a hugely\ncomplicated piece"},"1053":{"dur":2,"text":"of code, something you could get\na JavaScript to build and build"},"1056":{"dur":2,"text":"a much better user interface\naround it, much better user"},"1058":{"dur":0,"text":"experience."},"1059":{"dur":3,"text":"But actually entirely doable."},"1063":{"dur":1,"text":"So what was at the other end?"},"1064":{"dur":5,"text":"As I said, Raspberry Pi,\nPi Cam, the Pipe software,"},"1069":{"dur":4,"text":"which is our own lightweight\ndata channel stack--"},"1074":{"dur":4,"text":"data channel-only stack,\nwhich is less than a quarter"},"1078":{"dur":4,"text":"of the size of the build\nthat would be on ARM."},"1086":{"dur":5,"text":"And some scripts to generate\nthe MJPEGs, which are just"},"1092":{"dur":2,"text":"basically either\nAVCOM if you're using"},"1094":{"dur":2,"text":"a classic webcam\nor Raspberry Pi Vid"},"1097":{"dur":3,"text":"if you're using the Raspberry\nPi webcam, which I am here."},"1100":{"dur":1,"text":"Now, a little side thing."},"1102":{"dur":5,"text":"The Pi is capable of doing\nH264, but in the run up to this,"},"1107":{"dur":2,"text":"I could not get the STP right."},"1110":{"dur":2,"text":"I got the whole of the\nrest of the stack right."},"1112":{"dur":0,"text":"No problem."},"1113":{"dur":1,"text":"Got all that fine."},"1114":{"dur":3,"text":"I could not get the right\nSTP incantation last week."},"1118":{"dur":1,"text":"So it's not working yet."},"1119":{"dur":1,"text":"There's no reason why\nit shouldn't on the Pi."},"1121":{"dur":3,"text":"Some devices won't have\nH264 encoders on them."},"1125":{"dur":1,"text":"This one actually does."},"1126":{"dur":4,"text":"So in theory, it should do H264,\nbut for the moment, it doesn't."},"1131":{"dur":1,"text":"So I thought this\nwas a secure thing,"},"1133":{"dur":3,"text":"but there wasn't any\nsecurity in that bit at all."},"1136":{"dur":1,"text":"I didn't mention it."},"1137":{"dur":1,"text":"And there's a reason for that."},"1139":{"dur":4,"text":"I mean, our users\nactually, they generate"},"1144":{"dur":8,"text":"two x.509 RSA 2048 bit SHA256\nself-signed certificates."},"1152":{"dur":4,"text":"They exchange them securely, and\nthey verify them by proximity."},"1156":{"dur":3,"text":"And they create a persistent\ndistributed web-of-trust PKI,"},"1160":{"dur":2,"text":"which is kind of like\nthe resurrected duckling"},"1162":{"dur":3,"text":"paper, which was written\nby Ross Anderson."},"1166":{"dur":2,"text":"And that sounds like a\nreally tedious thing to do,"},"1168":{"dur":1,"text":"but actually, turns out\nyou can do all of that"},"1170":{"dur":1,"text":"just by scanning a\nsingle QR code when you"},"1172":{"dur":2,"text":"take the device out of the box."},"1175":{"dur":2,"text":"So I'll show you that."},"1177":{"dur":5,"text":"I should add, though, at\nthis point that this actually"},"1183":{"dur":2,"text":"works much better\non a mobile device"},"1185":{"dur":8,"text":"than it does on--\nthan it does on here."},"1193":{"dur":2,"text":"That's not good."},"1196":{"dur":2,"text":"My camera has not come on."},"1198":{"dur":0,"text":"What was that bug?"},"1201":{"dur":1,"text":"I'm not going to be\nable to show you this."},"1203":{"dur":1,"text":"My camera has not come on."},"1205":{"dur":2,"text":"Let me just do that\njust one more time."},"1210":{"dur":1,"text":"No, I have a locked camera."},"1220":{"dur":1,"text":"Yeah, well, I'll\ndo that at the end."},"1222":{"dur":1,"text":"I will reboot it and\ndo it at the end."},"1224":{"dur":3,"text":"But I'm not rebooting in the\nmiddle of a presentation."},"1228":{"dur":2,"text":"Even I'm not that brave."},"1230":{"dur":1,"text":"So anyway, it turns\nout you can just"},"1232":{"dur":3,"text":"do it by scanning this QR\ncode and it immediately"},"1235":{"dur":1,"text":"connects you."},"1237":{"dur":2,"text":"I will do that in a minute."},"1240":{"dur":7,"text":"So actually, yes-- I'm going\nto do this on a mobile."},"1251":{"dur":2,"text":"We like a little\nperil, don't we."},"1253":{"dur":1,"text":"A little mild peril."},"1257":{"dur":2,"text":"So you see that's the\nQR code and here is"},"1259":{"dur":1,"text":"my-- can you read that?"},"1261":{"dur":2,"text":"Yeah, that's my phone."},"1263":{"dur":4,"text":"So we do claim a new device."},"1268":{"dur":3,"text":"We show them to each\nother like that."},"1274":{"dur":1,"text":"And we're connected."},"1276":{"dur":2,"text":"That was doing the full PKI\nexchange-- the whole thing."},"1279":{"dur":1,"text":"These two now\nexchanged certificates"},"1281":{"dur":2,"text":"and they know irretrievably\nabout each other."},"1286":{"dur":2,"text":"So what that's done\nis it's created"},"1289":{"dur":4,"text":"a simple secure private IT\npairing and transport, which"},"1293":{"dur":0,"text":"isn't just for webcams."},"1294":{"dur":2,"text":"You can do other things with it."},"1297":{"dur":3,"text":"The connections are\nend to end encrypted."},"1300":{"dur":1,"text":"The auth is distributed."},"1301":{"dur":3,"text":"So each of these devices\nis it's own auth server."},"1304":{"dur":4,"text":"So you're not trusting\nsomething in the center."},"1309":{"dur":5,"text":"And it only just\nconnects with its owners."},"1314":{"dur":1,"text":"It's using standard WebRTC."},"1315":{"dur":2,"text":"There's no magic here."},"1318":{"dur":2,"text":"That was in Chrome."},"1321":{"dur":2,"text":"There's a minimal\nuntrusted cloud server."},"1323":{"dur":2,"text":"The cloud server, you\ndon't have to trust it."},"1325":{"dur":1,"text":"It doesn't how hold\nyour auth keys."},"1327":{"dur":3,"text":"It doesn't have a picture\nof your child's bedroom."},"1331":{"dur":2,"text":"The traffic is direct where\npossible, because it's WebRTC"},"1333":{"dur":2,"text":"and this is stuff WebRTC does."},"1336":{"dur":2,"text":"There are no passwords\nthat all of the auth"},"1339":{"dur":1,"text":"is done with that key exchange."},"1340":{"dur":1,"text":"There's no passwords to set."},"1341":{"dur":6,"text":"It's a strong auth based around\nX509 certificate exchange."},"1348":{"dur":1,"text":"I say, there are no open ports."},"1349":{"dur":1,"text":"It's ICE."},"1351":{"dur":2,"text":"There are only open\nports when it's necessary"},"1354":{"dur":1,"text":"and they're created through ICE."},"1358":{"dur":2,"text":"And the code for\nthis, that webcam demo"},"1361":{"dur":3,"text":"is on GitHub and Pipe\/webcam."},"1364":{"dur":7,"text":"Let me put myself\nback to that one."},"1372":{"dur":0,"text":"Here we go."},"1373":{"dur":2,"text":"So that's where the code is."},"1380":{"dur":2,"text":"So the API-- the\nmagic of the API--"},"1382":{"dur":3,"text":"is only that it creates\na pipe from one end"},"1386":{"dur":4,"text":"to the other with a\nreally simple API."},"1390":{"dur":3,"text":"And the semantics of the\npipes depends on the label"},"1393":{"dur":1,"text":"that you give it."},"1394":{"dur":3,"text":"So this particular one was\njust like a camera with MJPEG,"},"1398":{"dur":2,"text":"but it could analog\ndigital inputs and outputs"},"1400":{"dur":1,"text":"from an IoT device."},"1402":{"dur":1,"text":"Or it could be a local socket."},"1404":{"dur":1,"text":"So you could run some\nservice on the device"},"1406":{"dur":5,"text":"like a node.js agent or a link\nto a Bluetooth LE or something."},"1411":{"dur":3,"text":"And then it can proxy that\nup to your web browser."},"1415":{"dur":1,"text":"You can access local data."},"1417":{"dur":2,"text":"You can write stuff\nto the screen."},"1419":{"dur":2,"text":"And you can add\ncustom extensions,"},"1422":{"dur":2,"text":"and it works on the\nBeagleBone, it works on the Pi,"},"1424":{"dur":2,"text":"it works on the Arctic,\nit works on Edison."},"1427":{"dur":2,"text":"And I hope it will work on this."},"1429":{"dur":2,"text":"I haven't tried it on the\nchip yet, but I now have one."},"1431":{"dur":1,"text":"So I can try it."},"1433":{"dur":2,"text":"Instant closed beta, anyone\nwants to play with it,"},"1435":{"dur":3,"text":"be really happy to, particularly\nif you've got a Raspberry Pi."},"1438":{"dur":1,"text":"You can just work\nthrough the instructions,"},"1440":{"dur":2,"text":"try it out, see what you think."},"1443":{"dur":5,"text":"Now, I have one more thing I\nneed to do this instant-- two"},"1448":{"dur":3,"text":"things, actually."},"1451":{"dur":3,"text":"First one is to turn that\noff, and the other one"},"1455":{"dur":2,"text":"is to warn my friend that\nhe's about to get a call."},"1461":{"dur":5,"text":"So that's all cute, but\nit's a little bit small."},"1466":{"dur":4,"text":"So this thing was developed by\na friend of mine, Davy Davis."},"1471":{"dur":3,"text":"It's a 15 foot star\nwith 700 LEDs in it,"},"1475":{"dur":3,"text":"which are all individually\ncontrollable by a BeagleBone"},"1478":{"dur":2,"text":"And we put the pipe\nWebRTC software in it,"},"1481":{"dur":3,"text":"mostly because you can."},"1484":{"dur":2,"text":"But actually practically,\nit was kind of interesting,"},"1486":{"dur":3,"text":"because it gets to\ndo remote monitoring."},"1490":{"dur":2,"text":"I can monitor that\nthing from my home."},"1492":{"dur":2,"text":"I don't have to trug\nout to Reno to find out"},"1495":{"dur":1,"text":"how it's getting on."},"1496":{"dur":5,"text":"And in fact, we had it\nin Burning Man as well."},"1502":{"dur":4,"text":"I can remotely control it, which\nhopefully-- touch something--"},"1506":{"dur":0,"text":"we'll do in a minute."},"1507":{"dur":1,"text":"And I can do remote updates."},"1508":{"dur":3,"text":"So when they built the\nsecond one of these,"},"1512":{"dur":2,"text":"they put the stars in\nslightly different places"},"1515":{"dur":2,"text":"and there were slightly\ndifferent numbers of them."},"1517":{"dur":5,"text":"So the software was wrong,\nso I just remotely updated it"},"1522":{"dur":5,"text":"from 5,500 miles away,\nwhich is kind of fun."},"1527":{"dur":16,"text":"So let me show you the ability\nto do-- let's see which one."},"1544":{"dur":2,"text":"So this guy, that\none there, that"},"1547":{"dur":2,"text":"was the one that went\nout to Burning Man."},"1549":{"dur":1,"text":"And it's been\nsitting in my garden,"},"1551":{"dur":2,"text":"actually, most of the\nsummer collecting data"},"1553":{"dur":2,"text":"from my solar panels."},"1555":{"dur":1,"text":"So I'm going to connect to it."},"1557":{"dur":4,"text":"It's currently sitting\nat home on my desk, which"},"1561":{"dur":2,"text":"is 5 plus thousand miles away."},"1563":{"dur":4,"text":"And I'm doing about\n300 database queries"},"1567":{"dur":3,"text":"against a local\nregister database that"},"1571":{"dur":2,"text":"stores the historical\ndata for [INAUDIBLE]"},"1573":{"dur":4,"text":"masking for the whole\nof the month of July."},"1577":{"dur":2,"text":"So in a second, it will finish\nthat and it will draw a graph."},"1580":{"dur":2,"text":"And the point being\nthat you don't"},"1582":{"dur":2,"text":"have to know what it is you're\ngoing to ask the IoT devise."},"1585":{"dur":1,"text":"If you get the API\nright, you can just"},"1586":{"dur":1,"text":"ask it random questions."},"1588":{"dur":2,"text":"In this case, 300\nrandom questions"},"1590":{"dur":2,"text":"about what the voltage\nwas on a given day."},"1593":{"dur":3,"text":"And as you can see, there\nwere days where it basically"},"1596":{"dur":3,"text":"wasn't sunny in England, which\nis no surprise to anyone."},"1605":{"dur":3,"text":"But that that actually turns\nout to be really useful."},"1608":{"dur":3,"text":"I can monitor that thing from\nwherever I am in the world,"},"1612":{"dur":1,"text":"and it's secure."},"1613":{"dur":2,"text":"It's only going to talk to me."},"1615":{"dur":1,"text":"I don't have to\nlog in and use it."},"1617":{"dur":1,"text":"It just knows."},"1619":{"dur":6,"text":"So now we're going to try\nand do something dangerous."},"1632":{"dur":7,"text":"Let us see whether the man\nin Reno is in the cold."},"1643":{"dur":2,"text":"I need to be on Google's\nWi-Fi for this to work."},"1667":{"dur":0,"text":"This is nerve wracking."},"1682":{"dur":2,"text":"Right, well, once\nhe doesn't answer,"},"1684":{"dur":5,"text":"we'll talk to the device\nthat's sitting on my wall."},"1694":{"dur":4,"text":"So I have the prototype\nsitting at home."},"1698":{"dur":2,"text":"So let's look at that."},"1701":{"dur":1,"text":"It's nothing like as\npretty as the real thing,"},"1703":{"dur":3,"text":"but it lets me\ntest the software."},"1706":{"dur":1,"text":"So there we go."},"1708":{"dur":3,"text":"So this is the device that's\nsitting on my wall at home"},"1712":{"dur":2,"text":"twinkling quietly."},"1714":{"dur":3,"text":"It has about a tenth as many\nstars as the real device."},"1717":{"dur":1,"text":"And what we're\ngoing to do is I'm"},"1718":{"dur":4,"text":"going to talk to it\nfrom here, and I'm"},"1722":{"dur":6,"text":"going to ask it to change."},"1729":{"dur":5,"text":"So I can send it a command from\nhere to do its little dance."},"1735":{"dur":1,"text":"Oh no, that's not the one."},"1737":{"dur":2,"text":"I didn't mean that."},"1739":{"dur":18,"text":"I meant-- so if we click on\nthat, I think we're getting."},"1758":{"dur":2,"text":"OK, so we made a\nsingle star light up."},"1761":{"dur":2,"text":"And it'll go back\ninto it's dance mode."},"1763":{"dur":2,"text":"And again, that's\nfrom 6,000 miles away."},"1765":{"dur":2,"text":"So let's see if\nthat's Andrew calling."},"1768":{"dur":0,"text":"Yes."},"1779":{"dur":2,"text":"Where is the video?"},"1782":{"dur":1,"text":"Why have I not got video?"},"1790":{"dur":1,"text":"That isn't doing what I wanted."},"1796":{"dur":2,"text":"How frustrating."},"1798":{"dur":0,"text":"One more time."},"1809":{"dur":1,"text":"There we go."},"1810":{"dur":2,"text":"Hey, we don't have audio."},"1812":{"dur":4,"text":"You're just going to have to--\nif you can turn us around."},"1817":{"dur":2,"text":"There we go."},"1820":{"dur":1,"text":"Up a bit."},"1821":{"dur":0,"text":"Yes."},"1822":{"dur":2,"text":"Excellent."},"1824":{"dur":12,"text":"So if we move him over\nhere, and I redo this,"},"1837":{"dur":6,"text":"so let's connect to the\ncorrect one, which is that one."},"1843":{"dur":2,"text":"So this thing is 15 foot high."},"1846":{"dur":3,"text":"And this has 700 LEDs,\nand it's sitting in Reno."},"1849":{"dur":3,"text":"What's that-- a couple\nhundred miles away?"},"1852":{"dur":2,"text":"And I'm controlling\nit from here."},"1855":{"dur":3,"text":"With any luck, so one of them,\nit's just stopped twinkling"},"1859":{"dur":2,"text":"and one of those is lit pink,\nand I cannot see which one it"},"1862":{"dur":2,"text":"is."},"1864":{"dur":0,"text":"Let's try that again."},"1870":{"dur":2,"text":"Anyone see the pink star?"},"1872":{"dur":1,"text":"No, I can't either."},"1877":{"dur":2,"text":"Let's do that one more\ntime because we're"},"1879":{"dur":1,"text":"supposed to be able\nto make it-- you"},"1880":{"dur":1,"text":"see that it's\ndefinitely flashing."},"1882":{"dur":0,"text":"There we go."},"1883":{"dur":0,"text":"There it has."},"1884":{"dur":1,"text":"Got it."},"1885":{"dur":3,"text":"So I'm controlling this\nthing from 400 miles away."},"1888":{"dur":0,"text":"Yay, me."},"1894":{"dur":2,"text":"So one more thing."},"1897":{"dur":1,"text":"One more thing."},"1898":{"dur":4,"text":"If we have a volunteer who\nwould like to make a wish"},"1903":{"dur":3,"text":"and has an Android\nphone, if they"},"1906":{"dur":5,"text":"would like to come up\nand browse to that URL,"},"1911":{"dur":2,"text":"I can give them access to it."},"1913":{"dur":2,"text":"So we've got lend\nborrow semantics."},"1916":{"dur":4,"text":"So I need a foolish\nvolunteer who"},"1920":{"dur":4,"text":"will come and borrow a device."},"1927":{"dur":1,"text":"Android phone?"},"1929":{"dur":4,"text":"OK, so if you browse\nto that, I did actually"},"1934":{"dur":2,"text":"think about bringing\na physical web beacon"},"1936":{"dur":3,"text":"so you could just waft\nnear it, but that's hard."},"1944":{"dur":3,"text":"OK, sorry, we have\na winner here."},"1948":{"dur":8,"text":"So with any luck, I just need\nto hold it steady enough."},"1956":{"dur":4,"text":"Actually, let people see what's\ngoing on because otherwise it's"},"1961":{"dur":1,"text":"a bit confusing."},"1962":{"dur":6,"text":"So we'll do this and\nwe'll do that one."},"1969":{"dur":7,"text":"Right, so he's got a QR code,\nwhich I'm scanning on my phone"},"1977":{"dur":0,"text":"or trying to."},"1981":{"dur":0,"text":"That's interesting."},"1982":{"dur":2,"text":"That's an interesting bug."},"1984":{"dur":2,"text":"Huh, that's actually\nnot going to work"},"1987":{"dur":2,"text":"because the edges are black."},"1989":{"dur":1,"text":"There's not enough\nbevel on that."},"1993":{"dur":3,"text":"That's funny."},"1996":{"dur":1,"text":"AUDIENCE: The\nrotation is blocked"},"1998":{"dur":1,"text":"because I don't like this."},"2002":{"dur":1,"text":"TIM HANSON: Did you get it?"},"2003":{"dur":4,"text":"AUDIENCE: You can\nunblock the rotation,"},"2008":{"dur":2,"text":"but it's not a bug of my phone."},"2010":{"dur":1,"text":"TIM HANSON: No, it's my bug."},"2012":{"dur":1,"text":"It's my bug."},"2013":{"dur":1,"text":"Whoa, that's interesting."},"2014":{"dur":1,"text":"That's a good bug."},"2016":{"dur":1,"text":"So that didn't work."},"2017":{"dur":2,"text":"But that's annoying."},"2020":{"dur":1,"text":"AUDIENCE: How I\ncan help you, I can"},"2021":{"dur":2,"text":"make a photo of this QR code and\nshow you on the bigger screen."},"2024":{"dur":1,"text":"TIM HANSON: It's not\nthe size of the screen."},"2025":{"dur":1,"text":"The problem is that\nthe black edges,"},"2027":{"dur":1,"text":"it's not reading the\nQR because it's not"},"2029":{"dur":2,"text":"seeing that black edge."},"2031":{"dur":2,"text":"AUDIENCE: Take a screen image\nand then reduce it down."},"2038":{"dur":0,"text":"TIM HANSON: That'll do."},"2039":{"dur":0,"text":"That would have done."},"2046":{"dur":3,"text":"AUDIENCE: It's not\nreducing really."},"2049":{"dur":4,"text":"TIM HANSON: Nevermind,\nanyway, in theory the"},"2053":{"dur":1,"text":"lend borrow semantics work."},"2055":{"dur":4,"text":"But if I built the right web\npage, which actually-- no,"},"2059":{"dur":1,"text":"nevermind."},"2061":{"dur":2,"text":"I'm going to hang up\non Andrew because he's"},"2063":{"dur":1,"text":"sitting in the cold there."},"2069":{"dur":0,"text":"And thank him."},"2073":{"dur":0,"text":"So there we go."},"2077":{"dur":1,"text":"So thank you for putting\nup with all that."},"2086":{"dur":1,"text":"Thank you."}}