{"0.00":{"start":"0","dur":"2.892","text":"[MUSIC PLAYING]"},"6.76":{"start":"6.76","dur":"1.815","text":"JAKE: It&#39;s December,\nChristmas time."},"8.58":{"start":"8.575","dur":"2.125","text":"I thought we&#39;d talk about\nsome of the features that"},"10.70":{"start":"10.7","dur":"3.16","text":"are coming in 2018, and\nI&#39;ll try and describe it"},"13.86":{"start":"13.86","dur":"1.6","text":"to you in two minutes."},"15.46":{"start":"15.46","dur":"1.25","text":"But you can ask the questions."},"16.71":{"start":"16.71","dur":"0.78","text":"SURMA: OK."},"17.49":{"start":"17.49","dur":"2.463","text":"JAKE: I want to talk\nabout the Web Locks API."},"19.95":{"start":"19.953","dur":"0.499","text":"Go."},"20.45":{"start":"20.452","dur":"1.888","text":"SURMA: Is that like warlocks?"},"22.34":{"start":"22.34","dur":"0.79","text":"JAKE: No."},"23.13":{"start":"23.13","dur":"1.16","text":"SURMA: So it&#39;s like--"},"24.29":{"start":"24.29","dur":"2.68","text":"like mutex locks and stuff?"},"26.97":{"start":"26.97","dur":"1.682","text":"JAKE: Yes, correct."},"28.65":{"start":"28.652","dur":"0.958","text":"SURMA: What-- what is--"},"29.61":{"start":"29.61","dur":"1.17","text":"what-- how?"},"30.78":{"start":"30.78","dur":"0.87","text":"JAKE: Right, OK."},"31.65":{"start":"31.65","dur":"3.9","text":"So the idea is in a page or\nin worker, you would say,"},"35.55":{"start":"35.55","dur":"1.925","text":"I want a lock named bluh."},"37.48":{"start":"37.475","dur":"1.125","text":"And you can give it a name."},"38.60":{"start":"38.6","dur":"1.583","text":"Any name you want,\nit&#39;s just a string."},"40.18":{"start":"40.183","dur":"3.047","text":"All right, and then it will\nwait until nothing else"},"43.23":{"start":"43.23","dur":"2.78","text":"has a lock of that name open."},"46.01":{"start":"46.01","dur":"3.157","text":"And then once it&#39;s open,\nyou get a call back."},"49.17":{"start":"49.167","dur":"1.833","text":"And you&#39;d usually use\nan async function here"},"51.00":{"start":"51","dur":"2.07","text":"because it&#39;s expected\nto return a promise."},"53.07":{"start":"53.07","dur":"2.39","text":"And you, like,\nreturn the promise--"},"55.46":{"start":"55.46","dur":"2.5","text":"resolve the promise, like\nreturn from the async function"},"57.96":{"start":"57.96","dur":"3.69","text":"once you have done the work that\nyou were wanting to look for."},"61.65":{"start":"61.65","dur":"1.29","text":"SURMA: OK."},"62.94":{"start":"62.94","dur":"3.174","text":"And so that lock is\nshared across the origin,"},"66.11":{"start":"66.114","dur":"0.666","text":"I would presume?"},"66.78":{"start":"66.78","dur":"0.499","text":"JAKE: Yes."},"67.28":{"start":"67.279","dur":"0.801","text":"The whole origin."},"68.08":{"start":"68.08","dur":"0.69","text":"Yeah."},"68.77":{"start":"68.77","dur":"3.24","text":"SURMA: OK, so I mean, we have\nlocks on shared [INAUDIBLE],,"},"72.01":{"start":"72.01","dur":"1.17","text":"right?"},"73.18":{"start":"73.18","dur":"1.737","text":"JAKE: We have atomics."},"74.92":{"start":"74.917","dur":"1.083","text":"SURMA: The atomic things--"},"76.48":{"start":"76.48","dur":"0.5","text":"JAKE: Right."},"76.98":{"start":"76.98","dur":"2.891","text":"SURMA: --which you can wait and\nlock-- you can build a lock."},"79.87":{"start":"79.871","dur":"0.499","text":"JAKE: Yes."},"80.37":{"start":"80.37","dur":"2.37","text":"But you cannot wait on the\nmain thread with an atomic."},"82.74":{"start":"82.74","dur":"0.36","text":"SURMA: True."},"83.10":{"start":"83.1","dur":"0.98","text":"JAKE: You can only\nwait on a worker,"},"84.08":{"start":"84.08","dur":"2.245","text":"whereas with this it&#39;s\nan asynchronous thing."},"86.33":{"start":"86.325","dur":"0.735","text":"Whoo."},"87.06":{"start":"87.06","dur":"2.34","text":"So it can work on\na page as well."},"89.40":{"start":"89.4","dur":"3.82","text":"And it also lets you\ndo shared locks, right?"},"93.22":{"start":"93.22","dur":"0.5","text":"SURMA: OK."},"93.72":{"start":"93.72","dur":"2.22","text":"JAKE: Right, so\nin a shared mode,"},"95.94":{"start":"95.94","dur":"1.86","text":"you can say, like, I\nwant a lock on this."},"97.80":{"start":"97.8","dur":"3.16","text":"But I&#39;m prepared to share\nwith other shared things."},"100.96":{"start":"100.96","dur":"0.517","text":"SURMA: OK."},"101.48":{"start":"101.477","dur":"2.083","text":"JAKE: But then when a\nnon-shared thing comes along"},"103.56":{"start":"103.56","dur":"1.86","text":"for the same name, it has to\nwait for all of the shared"},"105.42":{"start":"105.42","dur":"0.97","text":"things to finish."},"106.39":{"start":"106.39","dur":"0.1","text":"SURMA: So this is like--"},"106.49":{"start":"106.49","dur":"1.11","text":"JAKE: And it&#39;s like\nan exclusive lock."},"107.60":{"start":"107.6","dur":"2.26","text":"SURMA: --like read\/write mutex,\nwhere lots of people can read,"},"109.86":{"start":"109.86","dur":"1.367","text":"but only one person can write."},"111.23":{"start":"111.227","dur":"1.333","text":"JAKE: Like read and write stuff."},"112.56":{"start":"112.56","dur":"2.52","text":"And it means you can kind of\ndo some of this similar stuff,"},"115.08":{"start":"115.08","dur":"3.28","text":"with like local\nstorage or with books."},"118.36":{"start":"118.36","dur":"1.91","text":"You run into problems\nif a tab crashes,"},"120.27":{"start":"120.27","dur":"1.292","text":"or if it closes before it can--"},"121.56":{"start":"121.562","dur":"0.958","text":"SURMA: Ah, the cleanup."},"122.52":{"start":"122.52","dur":"1.06","text":"JAKE: --create a lock."},"123.58":{"start":"123.58","dur":"2.15","text":"Whereas this will all\nhappen because it&#39;s--"},"125.73":{"start":"125.73","dur":"1.005","text":"[INTERPOSING VOICES]"},"127.13":{"start":"127.134","dur":"0.666","text":"SURMA: Yeah, OK."},"127.80":{"start":"127.8","dur":"1.92","text":"JAKE: There you go."},"129.72":{"start":"129.72","dur":"1.69","text":"Yeah, are you convinced?"},"131.41":{"start":"131.41","dur":"0.98","text":"Is that signed off?"},"132.39":{"start":"132.39","dur":"0.92","text":"Can we have it now?"},"133.31":{"start":"133.31","dur":"1.23","text":"SURMA: I&#39;ll think about it."},"134.54":{"start":"134.54","dur":"1.32","text":"JAKE: OK, fair enough."},"138.94":{"start":"138.94","dur":"1.998","text":"We have three seconds to go."},"140.94":{"start":"140.938","dur":"0.938","text":"[LAUGHTER]"},"141.88":{"start":"141.876","dur":"3.754","text":"[MUSIC PLAYING]"},"145.63":{"start":"145.63","dur":"1.78","text":"Architecture, that&#39;s buildings."},"147.41":{"start":"147.41","dur":"2.36","text":"It&#39;s not [INAUDIBLE] the\nweb, mate, you got confused."},"149.77":{"start":"149.77","dur":"3.66","text":"SURMA: Well, the\nthing is that lots"},"153.43":{"start":"153.43","dur":"2.566","text":"of other fields like enterprise\nengineering and gaming"},"156.00":{"start":"155.996","dur":"2.624","text":"have, like, these architectural\npatterns when they build, like,"},"158.62":{"start":"158.62","dur":"1.01","text":"really complex things."},"159.63":{"start":"159.63","dur":"1.791","text":"JAKE: Nope, fields\ndon&#39;t have architecture,"},"161.42":{"start":"161.421","dur":"1.299","text":"you&#39;re thinking of cities."}}