{"0":{"dur":2,"text":"[MUSIC PLAYING]"},"6":{"dur":1,"text":"JAKE: It's December,\nChristmas time."},"8":{"dur":2,"text":"I thought we'd talk about\nsome of the features that"},"10":{"dur":3,"text":"are coming in 2018, and\nI'll try and describe it"},"13":{"dur":1,"text":"to you in two minutes."},"15":{"dur":1,"text":"But you can ask the questions."},"16":{"dur":0,"text":"SURMA: OK."},"17":{"dur":2,"text":"JAKE: I want to talk\nabout the Web Locks API."},"19":{"dur":0,"text":"Go."},"20":{"dur":1,"text":"SURMA: Is that like warlocks?"},"22":{"dur":0,"text":"JAKE: No."},"23":{"dur":1,"text":"SURMA: So it's like--"},"24":{"dur":2,"text":"like mutex locks and stuff?"},"26":{"dur":1,"text":"JAKE: Yes, correct."},"28":{"dur":0,"text":"SURMA: What-- what is--"},"29":{"dur":1,"text":"what-- how?"},"30":{"dur":0,"text":"JAKE: Right, OK."},"31":{"dur":3,"text":"So the idea is in a page or\nin worker, you would say,"},"35":{"dur":1,"text":"I want a lock named bluh."},"37":{"dur":1,"text":"And you can give it a name."},"38":{"dur":1,"text":"Any name you want,\nit's just a string."},"40":{"dur":3,"text":"All right, and then it will\nwait until nothing else"},"43":{"dur":2,"text":"has a lock of that name open."},"46":{"dur":3,"text":"And then once it's open,\nyou get a call back."},"49":{"dur":1,"text":"And you'd usually use\nan async function here"},"51":{"dur":2,"text":"because it's expected\nto return a promise."},"53":{"dur":2,"text":"And you, like,\nreturn the promise--"},"55":{"dur":2,"text":"resolve the promise, like\nreturn from the async function"},"57":{"dur":3,"text":"once you have done the work that\nyou were wanting to look for."},"61":{"dur":1,"text":"SURMA: OK."},"62":{"dur":3,"text":"And so that lock is\nshared across the origin,"},"66":{"dur":0,"text":"JAKE: Yes."},"67":{"dur":0,"text":"The whole origin."},"68":{"dur":3,"text":"SURMA: OK, so I mean, we have\nlocks on shared [INAUDIBLE],,"},"72":{"dur":1,"text":"right?"},"73":{"dur":1,"text":"JAKE: We have atomics."},"74":{"dur":1,"text":"SURMA: The atomic things--"},"76":{"dur":2,"text":"SURMA: --which you can wait and\nlock-- you can build a lock."},"79":{"dur":0,"text":"JAKE: Yes."},"80":{"dur":2,"text":"But you cannot wait on the\nmain thread with an atomic."},"82":{"dur":0,"text":"SURMA: True."},"83":{"dur":0,"text":"JAKE: You can only\nwait on a worker,"},"84":{"dur":2,"text":"whereas with this it's\nan asynchronous thing."},"86":{"dur":0,"text":"Whoo."},"87":{"dur":2,"text":"So it can work on\na page as well."},"89":{"dur":3,"text":"And it also lets you\ndo shared locks, right?"},"93":{"dur":2,"text":"JAKE: Right, so\nin a shared mode,"},"95":{"dur":1,"text":"you can say, like, I\nwant a lock on this."},"97":{"dur":3,"text":"But I'm prepared to share\nwith other shared things."},"100":{"dur":0,"text":"SURMA: OK."},"101":{"dur":2,"text":"JAKE: But then when a\nnon-shared thing comes along"},"103":{"dur":1,"text":"for the same name, it has to\nwait for all of the shared"},"105":{"dur":0,"text":"things to finish."},"106":{"dur":1,"text":"JAKE: And it's like\nan exclusive lock."},"107":{"dur":2,"text":"SURMA: --like read\/write mutex,\nwhere lots of people can read,"},"109":{"dur":1,"text":"but only one person can write."},"111":{"dur":1,"text":"JAKE: Like read and write stuff."},"112":{"dur":2,"text":"And it means you can kind of\ndo some of this similar stuff,"},"115":{"dur":3,"text":"with like local\nstorage or with books."},"118":{"dur":1,"text":"You run into problems\nif a tab crashes,"},"120":{"dur":1,"text":"or if it closes before it can--"},"121":{"dur":0,"text":"SURMA: Ah, the cleanup."},"122":{"dur":1,"text":"JAKE: --create a lock."},"123":{"dur":2,"text":"Whereas this will all\nhappen because it's--"},"125":{"dur":1,"text":"[INTERPOSING VOICES]"},"127":{"dur":1,"text":"JAKE: There you go."},"129":{"dur":1,"text":"Yeah, are you convinced?"},"131":{"dur":0,"text":"Is that signed off?"},"132":{"dur":0,"text":"Can we have it now?"},"133":{"dur":1,"text":"SURMA: I'll think about it."},"134":{"dur":1,"text":"JAKE: OK, fair enough."},"138":{"dur":1,"text":"We have three seconds to go."},"140":{"dur":0,"text":"[LAUGHTER]"},"141":{"dur":3,"text":"[MUSIC PLAYING]"},"145":{"dur":1,"text":"Architecture, that's buildings."},"147":{"dur":2,"text":"It's not [INAUDIBLE] the\nweb, mate, you got confused."},"149":{"dur":3,"text":"SURMA: Well, the\nthing is that lots"},"153":{"dur":2,"text":"of other fields like enterprise\nengineering and gaming"},"155":{"dur":2,"text":"have, like, these architectural\npatterns when they build, like,"},"158":{"dur":1,"text":"really complex things."},"159":{"dur":1,"text":"JAKE: Nope, fields\ndon't have architecture,"},"161":{"dur":1,"text":"you're thinking of cities."}}