{"0":{"dur":4,"text":"Good morning party track\nhow are we doing? How many\npeople here came to learn about"},"5":{"dur":6,"text":"home alarm systems? Alright.\nYou're not going to learn about\nhome alarm systems. The spearker"},"21":{"dur":6,"text":"had a small problem with his\nemployer to that talk is not\ngoing to happen I can guess and"},"29":{"dur":2,"text":"I'll summarize is even though I\nhave not read the talk."},"32":{"dur":6,"text":"Your home alarm system\nis kind of fucked."},"38":{"dur":2,"text":"Oh, alright! Yeah."},"41":{"dur":7,"text":"So with that out of the way\nlet's fit in a bonus talk ok?\nThis is my good friend Zack, we"},"49":{"dur":6,"text":"go back a long way. He's going\nto give you the most\nentertaining talk about logs"},"57":{"dur":7,"text":"that you're all day. So let's\ngive him a big Party Track\nwelcome! (Clapping)"},"65":{"dur":2,"text":"This is the most exciting\none because there's no other\none."},"68":{"dur":6,"text":"Okay, before we get started\nthis is Logan. And we'll say hi\nto Logan. He was supposed to"},"79":{"dur":6,"text":"speak in this slot about home\nalarm systems. But last week\nthis article came out and it"},"90":{"dur":6,"text":"sounds that we had to cancel.\nMore recently NPR got an article\nwith him, I pinged him a few"},"97":{"dur":6,"text":"times, we wanted to see if he\nwanted to share some\ninformation, but he didn't"},"103":{"dur":6,"text":"respond. So I wanted to post\nthis NPR article quick because\nthis summarizes pretty much what"},"109":{"dur":7,"text":"happened. He was supposed to be\non stage but because of the\npressure put on him he can't. So"},"117":{"dur":6,"text":"I'm going to leave those names\nup there for a second ... and\nwe're moving on ... so in honor"},"129":{"dur":4,"text":"of Logan because he couldn't\nmake it I decided to start this\nwith a ridiculously good\u2011looking"},"133":{"dur":6,"text":"researcher so he can impress us\nwith his smile. And this is your\ntop gear top tip so if you're"},"145":{"dur":6,"text":"going to do this the top tip\nnumber one is follow responsible\ndisclosure if you're feeling"},"152":{"dur":5,"text":"nice. And tip number two don't\nname the vendor in a press\nrelease unless your goal is to"},"157":{"dur":7,"text":"get your talk pulled and if\nyou're going to give the talk\nand you're worried about legal"},"165":{"dur":6,"text":"action and go ahead and up the\nskate and make sure that you\nsell the job and if you're going"},"171":{"dur":6,"text":"to do what Logan did for the\nfuture maybe you're considering\nhis talk or doing his talk, but"},"178":{"dur":6,"text":"instead you get me, logging by\nZack. Yeah!"},"192":{"dur":6,"text":"This is Party Track, isn't\nit? Okay, good. Okay, so I would\nlike to talk start off with what"},"202":{"dur":3,"text":"this talk is and what this talk\nis not. So you don't have to\nspend the next 45 minutes"},"205":{"dur":5,"text":"listening to me ramble. This is\ngoing to be a defense focused\ntalk. Okay, so if you're looking"},"211":{"dur":5,"text":"for some sexy Ode you're not\ngoing to find it here. We're\ngoing to be talking about"},"217":{"dur":6,"text":"collecting, storing, monitoring,\nparsing \u2013 having fun with logs.\nAnd make it fun and the reason"},"224":{"dur":4,"text":"is because it's a reoccurring\nproblem we keep having it over\nand over and over. We're not"},"228":{"dur":4,"text":"getting good logging systems put\ntogether, we're not getting good\nlogging data in most situations."},"233":{"dur":4,"text":"Sure you may be the 1% here who\nis like \"Yea I've got this shit\ncovered.\" This talk is not for"},"238":{"dur":6,"text":"you. And if you know what \"ELK\"\nstands for and you're an \"ELK\"\nrock star then you may want to"},"245":{"dur":5,"text":"go get a few minutes elsewhere.\nOkay, this is going to be about\na 200, 300 level talk on logging"},"250":{"dur":7,"text":"and big logging environments.\nThis is not about hacking your\nalarm systems and the wireless"},"258":{"dur":4,"text":"problems with it. This is not an\noffensive security talk. And I'm\nnot going to be addressing the"},"263":{"dur":4,"text":"challenges of dealing with over\n200 gigs of log data a day.\nAnd\u00a0\u2011\u2011 and that's going to be a"},"267":{"dur":7,"text":"whole different barrel of\nmonkeys to deal with. So who am\nI?\u00a0\u2011\u2011 I'm Zack. I'm a managing"},"274":{"dur":6,"text":"partner over in Chicago. I do\nthings and stuff and everybody\nhas their big line of"},"283":{"dur":6,"text":"credentials. This is mine.\nMoving on. Okay, so offensives\ntalks can get up here and rant"},"294":{"dur":6,"text":"about their cool awesomeness for\na full hour about how awesome\nthings are \u2011\u2011 but really we're"},"300":{"dur":4,"text":"not going to use a lot of that\nstuff. Yea it's cool to hear\nabout the insecurities and this"},"304":{"dur":6,"text":"and thatand when we come back to\nour day job we have to deal with\nprotecting stuff so the vast"},"311":{"dur":6,"text":"majority of us need more\ndefensive talks. So let's start\nwith logging... and I'm going to"},"322":{"dur":4,"text":"say it with an Irish or Boston\naccent. Okay, so we're still\nhaving a logging problem, we're"},"326":{"dur":6,"text":"still relying on log data and\nlog formats that are archaic ...\nand we've seen that the"},"336":{"dur":4,"text":"technical community has this\nfigured out but not from a\nsecurity perspective. There"},"340":{"dur":5,"text":"focus is on, you know we want to\nknow if there's errors, what\ntheir habits are. But InfoSec"},"346":{"dur":4,"text":"hasn't really figured it out ...\nand I don't know if it's because\nwe're lazy or haven't taken the"},"351":{"dur":5,"text":"time to look at it, but I\nfigured let's dive into this a\nlittle more. We're not going to"},"356":{"dur":4,"text":"talk about generating logs,\nbecause that's easy. A\nconfiguration file and we could"},"361":{"dur":4,"text":"call it a day. And I'm not going\nto fill 45 minutes explaining a\nconfig file, it will put you all"},"366":{"dur":4,"text":"to sleep, even if there was\nmusic here at Party Track. We're\ngoing to talk about the"},"370":{"dur":6,"text":"collecting log and storing and\nprocessing and most importantly\nthe actual monitoring and"},"377":{"dur":6,"text":"security events for logs. Why do\nwe need logs? Because, Oh, I'm\njust storing them. It goes"},"386":{"dur":6,"text":"beyond security. We need it just\nfrom a management perspective to\nconvince our bosses that we're"},"392":{"dur":6,"text":"doing what we're supposed to be\ndoing and we're doing it right.\nA lot of the time we have to"},"399":{"dur":6,"text":"deal with the compliance stuff\n... okay, full disclosure I'm a\nQSA now\u00a0\u2011\u2011 and I can't say"},"405":{"dur":7,"text":"anything about it ... so. So\nlogs are very short. Compliances\nis going to be a driving force"},"413":{"dur":7,"text":"for stuff a lot of times. And we\ncan use that from a security\npoint of view of hey I've got to"},"420":{"dur":5,"text":"meet this ICO, PCI, HIPAA,\nwhatever it may be. Whatever you\nhave to deal with\u2014we can use"},"425":{"dur":7,"text":"that to say, hey I need a little\nmoney and time to do the cool\nsecurity stuff that I want to do"},"432":{"dur":4,"text":"... we need it from the security\nmonitoring perspective duh,\nincident responses duh and from"},"437":{"dur":4,"text":"a technical operations side, Dev\nOps has this figured out.\nThey've got this figured out"},"442":{"dur":4,"text":"from the operational side. But\nthey don't really share that\ninformation. Or we don't have a"},"447":{"dur":6,"text":"dev ops thing .... And let's be\nhonest about our current state\nof logs. Most stuff just kind of"},"460":{"dur":4,"text":"sits there or gets deleted and\nwe have our logs rotate stuff\nfor 90 days because we have to"},"465":{"dur":5,"text":"for compliance reasons and it's\ngetting deleted or we have to\nsend it to some product that's a"},"470":{"dur":5,"text":"pretty little box or pretty\nlittle BM or pretty little\nsoftware and we're storing it"},"475":{"dur":6,"text":"and when we have somebody come\nin to troubleshoot it or having\nan auditor or assessor come in"},"481":{"dur":6,"text":"and showing it to them. But\nlet's be honest with ourselves\nand confess right now. We're not"},"487":{"dur":6,"text":"really watching them as much as\nwe should. We don't actually\nwatch them. And I think that a"},"494":{"dur":5,"text":"lot of it comes from the usual\napproach of watching a log. But\nso the traditional approach of"},"507":{"dur":5,"text":"using a syslog server and regexs\nand grep and sending alerts and\nif it hits a certain thing it"},"513":{"dur":6,"text":"doesn't really scale well. We\ncan take and setup for multiple\nsystems ... it really defeats"},"521":{"dur":2,"text":"the purpose and being able to\nsearch leverage those and again\nlike I said we can love our"},"523":{"dur":6,"text":"vendor products. We have a lot\nof vendors. But a lot of them\nhave great products out there."},"532":{"dur":7,"text":"But they're expensive as shit.\nAnd the whole model to do it\nas\u00a0a volume based licensing. If"},"539":{"dur":5,"text":"you want to log more it's going\nto cost you more. But I'm hosing\nmy own data, it's going to cost"},"544":{"dur":4,"text":"you more. It makes sense from a\nbusiness standpoint and it makes\nsense from an up scale"},"548":{"dur":5,"text":"standpoint but it can get very\nexpensive quickly. I was talking\nto a friend the other day. They"},"554":{"dur":4,"text":"had a two million dollar IT\nbudget for all of their\noperating expenses. And they had"},"559":{"dur":6,"text":"a large vendor and they wanted\n400 thousand dollars to do the\nlogging for their environment."},"570":{"dur":6,"text":"That's almost 25 percent of\ntheir years budget just to do\ntheir logs. And we can use our"},"577":{"dur":7,"text":"moneys more wisely and I'm not\nsaying that vendors are a bad\nthing. If you work for a vendors"},"584":{"dur":4,"text":"and a lot of you probably do,\nI'm not saying oh don't go buy\nthe big guys data. It's great a"},"589":{"dur":5,"text":"lot of times. If you have the\nfinancial resources they are\ndefinitely great. And the offer"},"594":{"dur":6,"text":"of not having to have the\ntypical talent to manage them\u2011\u2011\nyou can hire the guy who just"},"601":{"dur":5,"text":"graduated from college and say,\nhere have fun with this product.\nAnd they'll figure it out. But"},"606":{"dur":5,"text":"we can be a little smarter since\nwe're people who like to tinker\nwith things, break things and do"},"611":{"dur":7,"text":"things right. Okay, I've been on\nthis journey to find open source\nsolutions. And to actually share"},"619":{"dur":4,"text":"the open source solutions and\nhow to configure them. So I\nlooked for scalable logging"},"623":{"dur":5,"text":"solutions that open sourced so\nwe can tinker with it and don't\nhave to pay a license to"},"628":{"dur":3,"text":"distribute. It's reliable,\nscalable and secure. And\nreliable and scalable is really"},"632":{"dur":4,"text":"important when it comes to your\nlog and meets the compliance\nrequirements that you have to"},"637":{"dur":6,"text":"follow. Here are our top 3\nwinners, we've got LogStash,\nElastic Search, Kibana, which"},"643":{"dur":5,"text":"I'll be talking about today, aka\nELK. Also as runner up we have\nFluentD which leverages Elastic"},"649":{"dur":4,"text":"Search, they're a great\nsolution, I don't want to call\nit a product because they don't"},"654":{"dur":6,"text":"really sell it. And there's\nGraylog2 as well. Okay, as you\ncan tell Log Stash and Graylog"},"660":{"dur":6,"text":"are JAVA based, I know, boo,\nhiss, JAVA memory consumption\nbut they work and then FluentD"},"667":{"dur":7,"text":"is based so\u00a0groovy. So we'll be\nfocusing on Log Stash, kind of\ngoing through what is this Log"},"675":{"dur":5,"text":"Stash, Elastic Search, Kibana\nstuff and how do we get events\nand process them and search them"},"680":{"dur":6,"text":"and most importantly impress\nthat boss. Okay, that's the end\nof my talk and you should just"},"689":{"dur":4,"text":"go use it and we're done. This\nis my water break."},"693":{"dur":6,"text":">>>: Okay, so the biggest pains\nfor logging a lot of us face is\nwe're getting a lot of log data"},"700":{"dur":3,"text":"data from a lot of different\nsources that come in all these\ndifferent formats and all these"},"703":{"dur":4,"text":"different time stamp formats and\nsometimes they're this and\nsometimes they're that. And we"},"708":{"dur":6,"text":"have to parse them, make sure we\nhave the accurate time for them.\nSo Log Stash processor tries to"},"714":{"dur":6,"text":"do that. So this is a look into\nhow Log Stash processes its\ndata. So from a shipper"},"723":{"dur":4,"text":"perspective that's kind of your\nagents that are actually\nentering those logs and sending"},"727":{"dur":5,"text":"them to a central source. You\nhave a broker that queues\neverything up so it can process"},"733":{"dur":4,"text":"everything as fast as possible\nand distribute that job across.\nYou have an indexer that looks"},"738":{"dur":6,"text":"at it as the analysis of, what\nis this log, how do I parse it,\nhow do I tag it and where do I"},"744":{"dur":3,"text":"ship it and send it off to\nsearch and storage. And then we\nhave the pretty little web"},"748":{"dur":5,"text":"interface to actually monitor\neverything, sounds familiar to a\nlot of other products out there."},"753":{"dur":4,"text":"But the cool thing with Elastic\nSearch and Log Stash is that you\ncan scale it. So instead of just"},"758":{"dur":4,"text":"having system, you know you may\nbe logging ten gigs of data a\nday and then next week you've"},"762":{"dur":6,"text":"got to log a hundred. Obviously\nthe whole talk is log all the\nthings. I'll start on the ramble"},"769":{"dur":4,"text":"of sharing logs later but the\nmore data we have the more we\ncan do actionable intelligence"},"774":{"dur":5,"text":"for it. So to scale it off all\nyou have to do is take the\nlittle individual parts and"},"779":{"dur":4,"text":"split them across more systems.\nSo you can take a split the\nbroker across multiple systems"},"784":{"dur":4,"text":"to queue everything up and have\na little bit more redundancy.\nYou can take the Log Stash"},"788":{"dur":4,"text":"indexer split it up over\nmultiple systems to actually\nprocess those logs. And then"},"793":{"dur":7,"text":"your Elastic Search cluster will\ngrow as well from the storing\nand searching. Okay, so we're"},"800":{"dur":4,"text":"going to focus on the aspects of\ncollecting and shipping logs,\nstoring logs, processing,"},"805":{"dur":4,"text":"monitoring them and searching\nthem, and obviously there's that\ngenerating log. So first thing"},"810":{"dur":5,"text":"is first the biggest reason that\na lot of us don't generate the\nlogs we need to is because we"},"815":{"dur":5,"text":"are using some commercial\nproduct and paying based upon\nhow much we generate. That"},"820":{"dur":4,"text":"doesn't work well for security\nand event monitoring because you\nstart to get into picking and"},"825":{"dur":5,"text":"choosing before you get the\nintel. We should build something\nthat we can collect all the logs"},"830":{"dur":5,"text":"we want and the only costs to us\nis more disc space and more\nprocessing power which it's not"},"836":{"dur":6,"text":"relatively cheap compared to the\nother things. And in order to\ncollect the logs, logs actually"},"845":{"dur":5,"text":"have these thigns called inputs.\nAnd we can use the traditional\nSyslog that everybody is"},"851":{"dur":6,"text":"familiar with. The archaic\nSyslog of text and we can also\nleverage Lunberjack, which is"},"857":{"dur":6,"text":"the thinner version that can do\nthe parsing of the data on the\nclient. We can also do time"},"864":{"dur":5,"text":"queries as inputs, I'll touch on\nthat in a second. So going\nthrough the different systems"},"869":{"dur":5,"text":"you typically have to face for\nyour Linux, Unix and Mac logs\nobviously you can leverage"},"874":{"dur":6,"text":"Syslog agents as is and send\nthat data to Log Stash or you\ncan also leverage\u00a0the Log Stash"},"880":{"dur":3,"text":"agent which is JAVA based. Now\nobviously you have to do that\ntrade off of, do I want to"},"884":{"dur":6,"text":"install JAVA or do I just want\nto send it with SysLog? It also\nsupports TLS as well, so for"},"900":{"dur":6,"text":"those of you that are like, oh\nit will lose stuff, it's not\nencrypted it does support TCP"},"910":{"dur":6,"text":"and TLS. The good old windows\nlogs that everybody is making\ntheir money off of because"},"917":{"dur":3,"text":"there's no good solution out\nthere for windows logging agent.\nYou're able to do it with Log"},"921":{"dur":3,"text":"Stash agent again installing\nJAVA on systems or there are\nSyslog systems that are"},"924":{"dur":3,"text":"available, open source, free and\ncommunity editions of them\nonline. So ExLog is a great one"},"927":{"dur":3,"text":"that basically takes whatever\nyou're sending it, files for\nwindows event logs and sends it"},"931":{"dur":5,"text":"off to SysLog...same thing for\nthe open source edition. Both of\nthese agents, Nxlog and Snare"},"937":{"dur":4,"text":"have commercial version, so\nbefore you go they have a paid\nversion they also have an open"},"941":{"dur":5,"text":"source edition. It just doesn't\nhave as much \"pretties.\" Then\nobviously the third option for"},"947":{"dur":3,"text":"those of you who are banging\nyour heads about the windows\nlogs and how you can deploy this"},"950":{"dur":4,"text":"across your environment is to\njust use the windows build an\nevent collector. Using windows"},"954":{"dur":4,"text":"event collector with one windows\nsystem to kind of collect all\nthose logs, use that central"},"959":{"dur":4,"text":"event collector system to parse\nthe logs and then ship them off\nover Syslog. That way you can"},"963":{"dur":4,"text":"easily deploy it with a group\npolicy and not to have to worry\nabout installing software on all"},"968":{"dur":7,"text":"of your production systems. And\nthen obviously the device logs,\nyour network devices, your"},"975":{"dur":3,"text":"storage devices, your\ntraditional Syslog works well\nbut that's one of the cool"},"978":{"dur":5,"text":"things about Log Stash that it\noffers SNMP traps as well. So\nyou're able to send SNMP traps"},"984":{"dur":6,"text":"to it and it's able to parse\nthat and push it into the\nlogging complex. You can send"},"991":{"dur":4,"text":"raw socket data and then I'll be\nable to parse whatever is coming\nin and then able to make exec"},"995":{"dur":4,"text":"calls which I'll touch on in a\nsecond. But most importantly\nsometimes we focus on the"},"1000":{"dur":6,"text":"operating system logs and\napplication system logs can get\nfed into Syslog complex. But one"},"1006":{"dur":5,"text":"of the biggest things we miss\nare these application logs. So\nwe need to log more than just"},"1011":{"dur":6,"text":"the default, \"hey, I requested\nthis page. Moving on.\"\nLeveraging web app logs and"},"1020":{"dur":3,"text":"integrating into the web app\ncode with your development team\nto generate, \"hey I saw a"},"1023":{"dur":4,"text":"password change, that seems\nweird and we just got a bunch of\nsessions that didn't exist.\""},"1027":{"dur":5,"text":"Send something into the main\nlogging complex and it creates a\nsingle source for you and the"},"1032":{"dur":3,"text":"rest of the security teams out\nthere to kind of monitor\neverything and so having all"},"1036":{"dur":5,"text":"these different aspects to pull.\nAnd obviously you can generate\nfrom those applications in text"},"1042":{"dur":4,"text":"files depending on the\napplication that you're using,\nfile an event in SysLog or use"},"1046":{"dur":5,"text":"Redis to queue up the logs and\npretty much anything. One of the\nthings about Log Stash is the"},"1052":{"dur":4,"text":"ability to pull from any source\nwith your own plug ins. That\nwould be a whole other talk for"},"1056":{"dur":5,"text":"a whole other day so we won't'\nget too far deep into there\u00a0but\nit's an option. So what about"},"1062":{"dur":6,"text":"the cloud? So, more and more\nproviders are offering cloud\ninfrastructure and a lot of more"},"1071":{"dur":6,"text":"people are moving to the cloud\ninfrastructure are offering the\nability to grab the audit logs"},"1082":{"dur":6,"text":"without having to do a formal\nrequest. So a lot of people\naren't monitoring this. And"},"1094":{"dur":6,"text":"recently, I'm trying to remember\nthe name that had their AWS\nsystems\u00a0completely, poof. Code"},"1103":{"dur":6,"text":"Spaces, thank you. Code Spaces\nrecently had an AWS attach and\nwe can argue over how their"},"1110":{"dur":2,"text":"infrastructure was actually set\nup, they should have had their\nbackups in a whole other"},"1113":{"dur":6,"text":"environment that wasn't AWS but\nwe aren't monitoring those logs.\nWe are pushing all our logs, not"},"1122":{"dur":7,"text":"we all but a lot of places are\npushing these logs and data\u00a0out\neverywhere and not monitoring"},"1129":{"dur":3,"text":"it. We're not monitoring who's\nlogging in to our google aps\naccount. Somebody could be"},"1133":{"dur":4,"text":"sitting there for months or\nlogging in from some other geo\nlocation that doesn't normally"},"1137":{"dur":5,"text":"log into and nobody is checking\nAWS to see who has our API key\nthat may have accidentally ended"},"1142":{"dur":3,"text":"up somewhere, something seems\nweird. So some of these services\nhave started to offer the"},"1146":{"dur":6,"text":"ability to actually take and\ngrab these logs from AWS, Google\nApps, Box, Sales Force, but"},"1153":{"dur":7,"text":"others aren't yet. So these are\nkind of a top gear top tip of\ndifferent options for logging"},"1160":{"dur":6,"text":"when you start to pull logs from\nthese cloud services. AWS has\nCoudtrail. Thank you! The"},"1166":{"dur":6,"text":"gentleman is keeping me honest!\nThank you, sir ... AWS has mmmm\ntrail. Which basically takes"},"1180":{"dur":2,"text":"event logs every five minutes\nand pushes we can send the log\nevery five minutes and pushes"},"1183":{"dur":4,"text":"them into an S3 bucket. And Log\nStash can pull those buckets and\nparse those logs and google apps"},"1188":{"dur":3,"text":"has their reports API which is\nbasically and API you can make\nqueries against. Box has their"},"1191":{"dur":5,"text":"events API and SalesForce has\ntheir LoginHistory now. Correct\nme if I'm wrong but Office 365"},"1197":{"dur":4,"text":"doesn't currently offer any live\nparsing but you can request\nthem, but that doesn't help you"},"1201":{"dur":4,"text":"with monitoring it. Drop Box,\nsame thing, you can see it\nthrough their dashboard but you"},"1206":{"dur":5,"text":"can't have any kind of API\naccess to it. And Gighub I have\nyet to find any kind of logging"},"1211":{"dur":5,"text":"other than enterprise. And more\nand more people for some reason\nthink it's a good idea to push"},"1216":{"dur":4,"text":"all of your enterprise code into\nGighub. I love Gighub, don't get\nme wrong. But I think that it's"},"1221":{"dur":6,"text":"a bad idea to push everything\nout there. So LogSash can pull\nfrom these from either an Exec"},"1228":{"dur":3,"text":"or from a built in input. Now\nyou're going to be like you're\ntalking about all these inputs"},"1231":{"dur":7,"text":"whatthey?\u00a0This is a list of the\ncurrent version of Inputs.\nThere's a lot that are, we'll"},"1238":{"dur":4,"text":"call them Alpha and we're touch\non that later. But there's a lot\nthat have been established,"},"1243":{"dur":5,"text":"tested and well-rouned. So as I\nsaid, you have Exec. Exec will\nlet you write any kind of shell"},"1248":{"dur":5,"text":"script, and kind of ruby script,\nany kind of command whatsoever,\ntake whatever the output is and"},"1254":{"dur":4,"text":"you can send it into logging\ninfrastructure. And you can\ncustomize exactly how you want"},"1258":{"dur":4,"text":"to get that log data. If you\ndon't have a traditional source\nof data you can start querying"},"1263":{"dur":3,"text":"other API's and in fact you\nmight see also on this list\nthere's a Twitter plug-in. You"},"1267":{"dur":4,"text":"can have it monitor the Twitter\nstream for mentions of\nsomething, hashtags, whatever"},"1271":{"dur":6,"text":"and put that into yur logging\ncomplex. That's pretty cool. And\nlike I said it has the S3 input,"},"1277":{"dur":5,"text":"it's got Exec and it's got a few\nother things in there as well.\nSo those are the different"},"1283":{"dur":6,"text":"inputs. So as I said,\ntraditional inputs you can still\nuse. The Syslog to collect"},"1295":{"dur":6,"text":"events and Redis and all those\nother agents. And the idea then\nis do you really trust a"},"1304":{"dur":5,"text":"somewhat young product and I\ndidn't mention that Log Stash is\nnow a part of Elastic Search and"},"1309":{"dur":4,"text":"their whole parent family so\nthey have commercial support\nbehind them. Do you really trust"},"1314":{"dur":6,"text":"this new JAVA based application\nwith all of your logs all the\ntime? So yeah, if you're one of"},"1321":{"dur":4,"text":"these people that live on the\nwild side like me, you can send\nit straight to Log Stash, like"},"1325":{"dur":4,"text":"here have fun. But you can also\ntake and build a logging complex\nwhere you're able to send these"},"1330":{"dur":3,"text":"logs and parse these logs in\ndifferent ways. So my\nrecommendation is that if you"},"1334":{"dur":5,"text":"don't always trust it you can\nalways build up an Arc SysLog or\nSysLog or SysLog NG layer."},"1339":{"dur":5,"text":"Basically send the logs to the\nlog system first then send it to\nLogStash and also send it to UDP"},"1344":{"dur":4,"text":"and send it to traditional\nfiling for storage. So you still\nhave have that retention. And"},"1349":{"dur":4,"text":"you still have that log being\narchived elsewhere but you still\nhave all of the cool new"},"1353":{"dur":6,"text":"pretties that LogStash offers.\nSo once LogStash has all these\nevents what do you do with them?"},"1362":{"dur":5,"text":"It's kind of awesome and sucks\nat the same time. It's awesome\nbecause you can do anything with"},"1367":{"dur":5,"text":"it ... it sucks because you can\ndo anything with it and you have\nto learn how to do anything with"},"1373":{"dur":4,"text":"it. So LogStash decided to make\nthis thing called, this parsing\nengine called GROK. It still"},"1378":{"dur":7,"text":"supports RegEx the traditional\nstatements but GROK is pretty\nawesome as it simplifies not"},"1385":{"dur":4,"text":"having to know RegEx. They\nprebuilt all of these different\nsyntax in here and I'll go"},"1390":{"dur":5,"text":"through examples in a second,\nthis is probably just ten\npercent of them. But if you want"},"1396":{"dur":6,"text":"a map and an IP address, a log\nstatus level you're able to do\nthat with just saying what the"},"1405":{"dur":6,"text":"syntax is. So you can just say\n\"word\" or \"data.\" It makes life\neasy. So even those who are not"},"1414":{"dur":5,"text":"super technical\u00a0with RegEx are\nable to write a pattern this\nquickly to parse the patching"},"1419":{"dur":4,"text":"logs. And this is really it. As\nsoon as you get an input,\nobviously you need to have the"},"1423":{"dur":5,"text":"input in there too but this is\nit for the filter. Combine a\npatching log, done this is it,"},"1428":{"dur":5,"text":"happy days. What about more\ncomplex data? The stuff that\ndoesn't really fit an existing"},"1434":{"dur":6,"text":"syntax. Let's think of this as\nan example, we have a typical\nPAM notification. This is raw"},"1443":{"dur":6,"text":"sys log data that I generated\nAugust 8th. You do the math.\nBasically your typical, hey PAM"},"1451":{"dur":6,"text":"detected somebody login. Now,\nthis may look a little\ncomplicated but I'm doing two"},"1458":{"dur":3,"text":"levels of parsing here and this\nis an actual working config and\nI'll be posting more later. This"},"1461":{"dur":5,"text":"is all you have to do in order\nto parse it. First we parse to\nsee, is it a PAgrab all the daM"},"1467":{"dur":6,"text":"message, so we look for the PAM\nUnix flag, ta, pick which\nmodule, then what phase it's"},"1473":{"dur":4,"text":"coming from. Is it\nauthentication, is it\nauthorization? Then once you tag"},"1478":{"dur":4,"text":"it you can see in there, there's\nthose add tags, add tag for PAM,\nadd tag for login so you can do"},"1483":{"dur":5,"text":"filtering and bondering for it.\nOnce you tag it with that you\ncan easily say alright let me"},"1488":{"dur":4,"text":"grab all the other data out of\nit. I want to grab the user, the\nsession ID, I want to grab the"},"1492":{"dur":7,"text":"remote host. And that's it for\nthe RegEx and it gets parsed.\nAnd you're able to take and"},"1499":{"dur":5,"text":"here's a quick from Elastic\nSearch parsing into all the\ndifferent fields and without"},"1505":{"dur":4,"text":"having to know all of this crazy\nRegEx to figure out we have a\nmissing case here. You're able"},"1510":{"dur":4,"text":"to quickly say, alright grab the\ndata and put it into this format\nand its pretty easy to figure"},"1515":{"dur":5,"text":"out how to start parsing and\nfiltering your logs. But that's\nnot all the filters it has on"},"1520":{"dur":4,"text":"the way in. We can tag metrics\nwith it. We can track to see,\nalright lets grab everything"},"1524":{"dur":3,"text":"that has a failed log in and\nassign a metrics to it and know\nhow many failed log ins we have"},"1528":{"dur":7,"text":"for this IP for this user over a\n1 minute, 5 minute, 15 minute, 1\nhour window. We can get you IP"},"1536":{"dur":5,"text":"information with the filters as\nwell. Those pretty graphs that\nyour bosses love. I don't know"},"1541":{"dur":5,"text":"why people love to see that we\nhave a bunch of attacks coming\nfrom this other country. Did"},"1547":{"dur":6,"text":"they get in? No, but we have a\nbunch of attacks. You're on the\ninternet bro. But management for"},"1556":{"dur":3,"text":"some reason loves that, you can\ngive them those pretty little\ngraphs. You can do GYP tagging"},"1559":{"dur":4,"text":"and pull from the GYP databases.\nYou can do reverse DNS look ups\nto be able to make your matches"},"1564":{"dur":4,"text":"easier if you have a dynamic\nenvironment or just want to\nstart logging that data. And"},"1568":{"dur":6,"text":"then there's URL decode so you\ncan take a decode if you have a\nURL inside of a URL. You can do"},"1574":{"dur":3,"text":"multiline data so if it crosses\nmore than one line. You can do\nkey values so if it's a"},"1578":{"dur":4,"text":"situation as you saw in the\nprevious one of our host equals,\naction equals you can just key"},"1583":{"dur":3,"text":"value it and it parses\nautomatically. And then the\ncoolest thing is it can do"},"1587":{"dur":4,"text":"anonymize. And if you happen not\nto be here in the United\nStates\u00a0and have to not store"},"1592":{"dur":5,"text":"data of people you can anonymize\nthat data as soon as it comes in\nwith random data or hash data,"},"1597":{"dur":5,"text":"however you can take and\nsanitize that. So those of you\nwho have to deal with European"},"1602":{"dur":7,"text":"laws or other laws that say y\ncan't restore this after so\nlong, great option. So after you"},"1610":{"dur":6,"text":"filter that data, LogStash can\noutput it to pretty much\nanywhere. Traditionally people"},"1616":{"dur":3,"text":"will send it to Elastic Search\nfor monitoring and searching.\nAnd that's what we're going to"},"1619":{"dur":5,"text":"cover next. But you can send it\nto different indexes just like\nyou can with other large logging"},"1624":{"dur":6,"text":"products. You can also do what's\nreally cool, it's called Exec.\nSo with Exec if you see a"},"1631":{"dur":5,"text":"certain set of flags or you\nparse it out and filter it out\nyou can take and go, oh this"},"1636":{"dur":5,"text":"looks interesting. I want to do\nsomething every time that I see\nthis. I don't want an e\u2011mail; I"},"1641":{"dur":5,"text":"want it to automatically block\nsomething. You can just make an\nExec call to whatever script and"},"1647":{"dur":6,"text":"I'll touch on some cool things\nlater. If you are like me and\nyou don't want to keep changing"},"1655":{"dur":2,"text":"your filters and want to\ndynamically change how things\nare, you can make a simple web"},"1658":{"dur":3,"text":"call to some other monitoring\napp that you wrote and say I saw\na bunch of odd things or saw a"},"1662":{"dur":3,"text":"log in from this IP. Do\nsomething with that. And write\nup a web app, instead of having"},"1666":{"dur":4,"text":"to script and write up all this\nstuff and keep restarting your\nfilters you can just say send"},"1671":{"dur":4,"text":"all this log in information to\nthis other web source and tell\nme if I should generate any kind"},"1675":{"dur":4,"text":"of alerts. And if you're\nsomebody who HipChats all day\nyou can send it to your chat"},"1679":{"dur":6,"text":"logs. I don't think there is an\nIRC output which I was kind of\ndisappointed in. If you're a"},"1686":{"dur":5,"text":"user of PagerDuty you can send\nit there or your traditional\nemail notifications to go in"},"1691":{"dur":5,"text":"that bucket you never monitor.\nAppliance vendors, a successful\nlog\u2011in, and if there's too many"},"1696":{"dur":4,"text":"failed log\u2011ins and then you can\nscale. So as I was saying you\ncan filter you can parse. You"},"1701":{"dur":3,"text":"can do all this fun stuff. What\ndo we care about? We're sending\nit to these places and we're not"},"1705":{"dur":3,"text":"monitoring it. The biggest most\nimportant thing is for us to\nactually monitor these security"},"1708":{"dur":5,"text":"events. So as I was saying we\nsetup filters and parsing and\nstuff, we tag them saying this"},"1713":{"dur":4,"text":"is a security event this is a\ncompliance event, this is a\nfailed login a success login. We"},"1718":{"dur":4,"text":"can create all the tags you\nwant. Add metrics if you want to\nsee if there are too many failed"},"1722":{"dur":5,"text":"logins over a certain window.\nYou pick the output and then you\ncan scale. So here are two"},"1727":{"dur":5,"text":"simple outputs that I wrote\ntogether real fast that shows if\nit's a failed login and if it's"},"1733":{"dur":7,"text":"been over two for this specific\nuser within a minute, send me an\nemail. That's how simple it is"},"1740":{"dur":5,"text":"(whispering) and if you want to\nsend it, like I was saying all\nthe auth requests, you want to"},"1745":{"dur":3,"text":"send it to some other source to\ndynamically determine, hey I\nwrote this cool little PHP app"},"1749":{"dur":5,"text":"that will tell me, if you send\nthe IP and the username it will\ndetermine if it's new. If you're"},"1754":{"dur":4,"text":"comfortable with some other\nlanguage, RUBY, or whatever send\nit there. You can start sending"},"1759":{"dur":5,"text":"all these kinds of actions\nelsewhere that traditional\nlogging complexes can't do. Yes,"},"1764":{"dur":7,"text":"some commercial products have\nworked as well, but this one is\nfree. So then the second"},"1771":{"dur":4,"text":"example, obviously anytime there\nis an auth request that's tagged\nas an auth request after we do"},"1775":{"dur":4,"text":"all of those filters, send it to\nwhatever. That's not actually\nreal so don't go trying to query"},"1780":{"dur":6,"text":"that you're not going to get\nanything. So as I was saying we\ncan do these Execs, we can do"},"1787":{"dur":4,"text":"these remote calls. As the\nsecurity people this is awesome.\nWe can have it do whatever. We"},"1791":{"dur":5,"text":"can have it update, this is for\nthose that like to live\ndangerously on the edge. You can"},"1796":{"dur":4,"text":"have it automatically update\nfirewalls, ACLS, switches, oh I\nsaw somebody new join the thing."},"1801":{"dur":5,"text":"I don't have a traditional NAC\ncomplex, so go ahead and tell it\nto disable the switchboard. Ok"},"1806":{"dur":5,"text":"cool, Exec, dun duh dun duh dun,\nwrote this cool script, done.\nYou're able to do that with this"},"1811":{"dur":4,"text":"new logging complex. Notifying\nuser directly, hey somebody\nlogged in from a new IP address"},"1816":{"dur":5,"text":"and this looks weird or it's not\nfrom within the U.S. or whatever\ncountry you're from, hey this is"},"1821":{"dur":5,"text":"weird for them, let me send that\nuser an email and make it their\nresponsibility to go, hey"},"1826":{"dur":5,"text":"security something is up, I\ndidn't log in. You don't have to\nmonitor that all and you can"},"1831":{"dur":4,"text":"start using your logging complex\nto generate those kind of alerts\ndirectly to your users."},"1835":{"dur":4,"text":"Obviously notify for admin\nlogins, both on the internal and\nexternal side. One of the"},"1840":{"dur":5,"text":"greatest things (indiscernible\n30:40) will talk about it, oh\nyea I got admin on all these"},"1845":{"dur":2,"text":"systems, oh yea I crawled across\nthe environment. Why aren't we\nlogging and detecting that? A"},"1847":{"dur":3,"text":"lot of admins shouldn't be\nlogging in remotely typically\nand why not generate events for"},"1851":{"dur":4,"text":"people to follow up? And then\nobviously for user log ins on\nnew machines, hey Jim doesn't"},"1856":{"dur":4,"text":"normally log in to this machine\nand I haven't seen this before,\nI'm going to generate an event."},"1861":{"dur":6,"text":"And this is easy to do then with\nthese filters with these custom\noutputs that some other logging"},"1867":{"dur":4,"text":"complexes don't support. So\nagain, we've got the monitoring;\nwe've got the collection and the"},"1871":{"dur":4,"text":"storage. What about the\nsearching? That's one of the\nbiggest problems on traditional"},"1876":{"dur":6,"text":"Syslogs is that you have to\nwrite, run through this text\nfile, wait, wait, wait, 10 gigs,"},"1882":{"dur":6,"text":"come on give me something. So\nsince it's based on Elastic\nSearch, the crew over at Elastic"},"1889":{"dur":4,"text":"Search, this complex has a\npretty little front end called\nKibana. Kibana pretty much looks"},"1893":{"dur":4,"text":"like every other logging\nsearching thing you can ever\nimagine. And you're able to"},"1898":{"dur":4,"text":"quickly search for the events,\ncorrelate the events. I'm not\ngoing to go too\u00a0far into Kibana"},"1902":{"dur":4,"text":"because you can create all these\npretty custom dashboards. You\ncan go through have the pretty"},"1907":{"dur":6,"text":"graphys for the management. Your\nboss loves them. Do this for\nyour boss to get a better job."},"1915":{"dur":6,"text":"But no, or get a raise, sorry.\nBut this works great ... but\nthat's the pretty dash board,"},"1924":{"dur":3,"text":"you can do all the searches, but\nreally like I said we are\nfocusing on the security side,"},"1927":{"dur":6,"text":"getting those alerts, getting\nthose notifications. But you may\nbe going, for those of you who"},"1936":{"dur":2,"text":"know what Elastic Search is, is\nmaybe going dude, uh elastic\nsearch, really? This shit"},"1938":{"dur":4,"text":"doesn't have any security\ncontrol whatsoever. Yea it\ndoesn't have security controls"},"1942":{"dur":5,"text":"whatsoever. You would have to\nbuild them. So as I said it's\nnot an easy solution but it's"},"1948":{"dur":5,"text":"one you can scale and customize\ngreatly. So Elastic Search is\nmade so that basically you can"},"1953":{"dur":3,"text":"cluster with everything,\nmulticast to figure out all the\npeers. It doesn't have"},"1957":{"dur":4,"text":"authentication and just trust\neveryone, give every one pseudo\nrights, yea it's bad from a"},"1961":{"dur":4,"text":"security perspective. But it's\ngreat from a data perspective.\nSo we have to build in these"},"1966":{"dur":5,"text":"security controls on top of\nthat. We have to write an nginx\nproxy in order to bind locally,"},"1971":{"dur":3,"text":"really simple config. Have to\nsegment this stuff off on the\nnetwork so it doesn't take and"},"1975":{"dur":5,"text":"multicast everywhere else.\nAgain, simple change and you\nhave to enable to logging on you"},"1981":{"dur":5,"text":"nginx that you're doing the\nproxy for, for compliance\nreasons and for the tracking of"},"1986":{"dur":3,"text":"that. Again, simple configs but\npeople are like oh, you can't\nuse that because of security"},"1990":{"dur":7,"text":"reasons. You just have to add a\nfew additional controls. Now,\nfrom a performance side you can"},"1997":{"dur":4,"text":"tweak a lot more when you built\nyour own system. So you can take\nin and tweak if you are starting"},"2002":{"dur":5,"text":"to scale up the size of your\nindexes, sometimes by default\nLogStash and Elastic Search do"},"2008":{"dur":5,"text":"daily indexes. But if you start\nlogging 200 gigs a day, a 200\ngig index is kind of a bad"},"2013":{"dur":5,"text":"thing, so you can start to\nchange the size of your indexes\nto hourly, minutes, so on and so"},"2019":{"dur":3,"text":"forth. You can increase the\nnumber of workers in LogStash in\norder to parse that stuff"},"2022":{"dur":5,"text":"faster. You can enable\ncompression in elastic search.\nAnd you can enable queuing for"},"2027":{"dur":6,"text":"the network traffic coming in.\nAnd the whole point of this is\nso you can scale. In traditional"},"2033":{"dur":4,"text":"systems you can't scale, you\ncan't cluster, it's not\ntolerant. You can easily scale"},"2038":{"dur":4,"text":"up with LogStash, elastic search\nand Kibana by cleaning up more\ninstances of Elastic Search. And"},"2042":{"dur":6,"text":"as I was saying putting more\nsteps in front of it that can\nkind of distribute and spit it"},"2049":{"dur":4,"text":"out and they recommend Redis.\nWorks well if you LogStash in\nfront of LogStash. I know this"},"2053":{"dur":5,"text":"doesn't make sense, but it does.\nSo the question is: Is it as\ngood or better than the vendor?"},"2059":{"dur":2,"text":"We are up here preaching, you\nshould look at open source stuff\nand you should take and do"},"2062":{"dur":4,"text":"something different than just\nbuy a product. Is it better?\nIt's your call. If you have a"},"2067":{"dur":3,"text":"technical ability, a team with\nthe technical ability or\ncoworkers then yea it works well"},"2071":{"dur":5,"text":"and doesn't come at the\nlicensure costs of other things.\nBut it's not as easy to manage"},"2076":{"dur":5,"text":"as a paid solution. It's still\nrelatively young so there may be\nbugs that you encounter. So if"},"2081":{"dur":5,"text":"you're sitting there with\ncritical logs that you cannot\nlose at all you may want to look"},"2086":{"dur":5,"text":"as somebody who is more\nestablished or like I was saying\nadd a few steps in there and"},"2091":{"dur":3,"text":"send it off to multiple storage\nlocations. It lacks\nauthentication out of the box,"},"2095":{"dur":3,"text":"it's something you can easily\nchange but you'll hear people\nshacking their stick at that"},"2098":{"dur":6,"text":"saying, you've got to be able to\nauthenticate to it, nginx proxy,\nHT password, done. But on the"},"2105":{"dur":5,"text":"plus side it's extremely\ncustomizable. The price is just\nright and some enterprises"},"2111":{"dur":6,"text":"support is available. And you\ncan even use it in the cloud.\n(Cheering) I had to wet my"},"2123":{"dur":5,"text":"whistle there. So what's next? I\njust rambled here about how\ngreat this thing is, what's"},"2128":{"dur":6,"text":"next? We have this thing we call\nthe Open PCI\u00a0Project, the domain\nhack PCI also works for some"},"2138":{"dur":6,"text":"reason, I don't' know why. But\nbasically the idea is there\nshouldn't be any secrets as to"},"2144":{"dur":5,"text":"how to secure stuff. People have\nbeen selling this whole magic\nbean of oh we can give you these"},"2150":{"dur":6,"text":"configs and keep reselling them.\nThey're configs guys, like we\ncan share that info, it doesn't"},"2156":{"dur":4,"text":"provide any competitive edge and\nin fact it just makes things\neasier for all of us. So we have"},"2161":{"dur":7,"text":"this thing called the Open PCI\nProject, it needs an update for\nall of this stuff but I'll get"},"2168":{"dur":6,"text":"that soon. As soon as possible.\nOkay, but basically to take and\nshare this information and share"},"2174":{"dur":4,"text":"all the configs, all the base\nparsing a VM that's ready to go\nthat you just spin up right"},"2179":{"dur":5,"text":"away. And obviously the\nhardening guides, Elastic\nSearch, insecure by default,"},"2184":{"dur":5,"text":"some hardening guides to just,\nhere paste a config, it works,\ngreat, awesome. To make it as"},"2189":{"dur":6,"text":"close as similar to these large\ncommercial projects but\nobviously you need a little more"},"2196":{"dur":6,"text":"hands on support. So with that\nI'm ending a bit early, I'm\nsorry.\u00a0I'll let you guys get in"},"2202":{"dur":5,"text":"lines for the next talks here.\nBut that's me, that's the talk\nabout all that stuff, all in all"},"2207":{"dur":6,"text":"log stuff. Fuck the companies\nthat sue people or \"legal\npressure\" for giving talks about"},"2213":{"dur":3,"text":"stuff they don't want and that's\nit. Thanks all!"}}