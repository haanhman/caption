{"6":{"dur":3,"text":"So, [FOREIGN], good morning everyone."},"9":{"dur":4,"text":"My name is Nimisha Asthagiri,\nI'm an engineer and architect at edX."},"14":{"dur":5,"text":"So, right now I feel like\na mother who just has so"},"19":{"dur":2,"text":"much love to share and\nwants to smother their kids."},"22":{"dur":3,"text":"Well, I just feel like there's so\nmuch knowledge I wanna give to you guys,"},"25":{"dur":2,"text":"so bear with me for the next half hour."},"28":{"dur":4,"text":"Afterwards I'm willing to also\ntalk to you guys, and the birds"},"33":{"dur":3,"text":"of a feather at lunch time as well,\nand we're also gonna share the slides."},"36":{"dur":3,"text":"So take what you can out of this."},"40":{"dur":4,"text":"So I'm gonna take you guys on a journey,\nwe're going to look at,"},"45":{"dur":3,"text":"it's a historical journey\nabout edx-platform."},"49":{"dur":4,"text":"We're gonna look at how we got here,\nwhere are we now."},"53":{"dur":3,"text":"What are our thoughts about where\nwe'd like to go, and what are we,"},"57":{"dur":4,"text":"where we actually going to, what are we\nactually doing right now to get there."},"62":{"dur":0,"text":"So you guys all ready?"},"63":{"dur":0,"text":">> Yeah."},"64":{"dur":1,"text":">> Yes, okay, here we go."},"65":{"dur":1,"text":"So how we evolved."},"67":{"dur":2,"text":"Well, here's one stop."},"69":{"dur":3,"text":"Can look at the GitHub repo and\nwhat it has to say."},"73":{"dur":5,"text":"December 11th, December of 2011 was\nour first commit into the repo."},"78":{"dur":4,"text":"And then there are different\ninterpretations of this graph possibly."},"82":{"dur":4,"text":"One interpretation is that,\nokay, around 2013, wow."},"86":{"dur":2,"text":"Almost 300 commits in one week."},"88":{"dur":2,"text":"There's a lot of activity going on."},"91":{"dur":4,"text":"Well, if you have free online\neducation for everyone everywhere, and"},"95":{"dur":3,"text":"you have a mission, of course\nyou're gonna make so much activity."},"98":{"dur":4,"text":"You have a small code base right,\nand there's greenfield development,"},"103":{"dur":4,"text":"so there's a lot of activity going on."},"107":{"dur":3,"text":"Eventually though,\nit starts to taper off as you can see."},"111":{"dur":2,"text":"Well, your code base may have\nchanged a little bit, and"},"114":{"dur":4,"text":"now you're thinking about more maintenance\nmode and incremental development."},"118":{"dur":4,"text":"That's one interpretation of this graph,\nlet's look at what other data we have."},"123":{"dur":2,"text":"If you look at the contributors\nto edx-platform, right."},"125":{"dur":1,"text":"And in each time period."},"127":{"dur":3,"text":"So that was definitely\nincreasing linearly, and"},"131":{"dur":3,"text":"then once again it's starting to drop off."},"134":{"dur":2,"text":"Now mind you,\nthis is just the edx-platform repo."},"137":{"dur":2,"text":"We also have other repos in edX."},"139":{"dur":2,"text":"But here's another view for\nus to consider."},"143":{"dur":1,"text":"Then if you can look at team growth."},"144":{"dur":3,"text":"Now this is only\nthe engineers at edX itself,"},"148":{"dur":3,"text":"this doesn't include the awesome\nopen source community that we have."},"151":{"dur":2,"text":"But still this is the data I had at hand."},"153":{"dur":4,"text":"So the team growth,\nright, from 2013 to 2017."},"158":{"dur":4,"text":"Steadily increasing,\nwe're over 70 people now."},"162":{"dur":5,"text":"So, all these changes are happening\nwithin the team, within the code base."},"167":{"dur":2,"text":"If you look at the code\nbase a little bit closer."},"169":{"dur":2,"text":"Let's look at the number\nof files in the code base."},"172":{"dur":3,"text":"That was linearly increasing,\nsteadily increasing."},"175":{"dur":2,"text":"Yeah, there was a little bit of a dip\nbecause we chose to pull out some"},"177":{"dur":1,"text":"language files."},"179":{"dur":3,"text":"But as you can see over time,\nthat continues to increase."},"182":{"dur":1,"text":"Maybe it's now plateauing."},"184":{"dur":2,"text":"Once again,\nI said they're more additional repose."},"186":{"dur":3,"text":"So let's take a closer\nlook at edx-platform."},"190":{"dur":3,"text":"Well, small code base, thinking of a baby,"},"193":{"dur":3,"text":"it's just starting up\nto that December 2011."},"197":{"dur":4,"text":"Later on it starts to grow,\nand within the code"},"202":{"dur":6,"text":"base we decide to split it up into LMS and\nStudio."},"208":{"dur":3,"text":"Now interesting thing about Conway's\nlaw if you guys have heard of it."},"211":{"dur":1,"text":"Where like it or"},"213":{"dur":3,"text":"not, your code structure tends to\nmirror your organization's structure."},"217":{"dur":4,"text":"Well you'll see that edx-platform is\ndefinitely no exception to this rule."},"221":{"dur":4,"text":"So even at edX we have an LMS team and\na Studio team."},"226":{"dur":2,"text":"Well, that's what you\nsee in the code base."},"229":{"dur":5,"text":"And then we also had Forums team\nthat started in June of 2012."},"234":{"dur":2,"text":"And we had another team working on ORA."},"237":{"dur":2,"text":"And each of them had their own repos."},"239":{"dur":3,"text":"I don't know if the resolution\nis that great, but"},"242":{"dur":3,"text":"they had edx ORA repo and\na Common service repo."},"246":{"dur":3,"text":"But then as engineering organizations,\nthey grow and what not of course."},"249":{"dur":1,"text":"Of course re-organization happens, and"},"251":{"dur":2,"text":"let's see what happens to\nthe code base along with it."},"254":{"dur":3,"text":"So engineering organization\njust ties to re-org, and"},"257":{"dur":3,"text":"now we create a teaching and\nlearning team."},"260":{"dur":3,"text":"Teaching and learning team\nnow owns all of edx-platform."},"264":{"dur":4,"text":"There's LMS and Studio and\nORA and Forums all in one team."},"268":{"dur":1,"text":"But we're growing and we have demands and"},"270":{"dur":1,"text":"the other features that\nwe need to implement."},"271":{"dur":4,"text":"So we add an Analytics team coming and\nwith their own repos."},"276":{"dur":3,"text":"They don't want to deal with edx-platform,\nand the monolith that's growing."},"280":{"dur":2,"text":"So, definitely they wanna\nbe self isolated, and"},"283":{"dur":2,"text":"working on their own code base."},"285":{"dur":5,"text":"Analytics team starts the mobile team\nwith their own open sourced repos, and"},"290":{"dur":5,"text":"the ecommerce team focusing on\nmore of the edx.org requirements."},"295":{"dur":2,"text":"But ecommerce,\ncourse-discovery, credentials,"},"297":{"dur":2,"text":"all other repos that are starting."},"299":{"dur":4,"text":"So once again you see that\nConway's law in action."},"304":{"dur":2,"text":"And as you heard yesterday,\nMark Haseltine said yesterday morning,"},"307":{"dur":3,"text":"our CTO, that now we're going\nthrough another re-organization."},"310":{"dur":3,"text":"Now we're actually being\na lot more customer focused."},"313":{"dur":4,"text":"We're gonna have educator team, and\nthe learner team and the business team."},"317":{"dur":3,"text":"So what does this mean for\nour code base, what's gonna happen?"},"321":{"dur":5,"text":"Well, we have that big monolith still that\nexists, the edX platform, and there's"},"326":{"dur":4,"text":"educator components in it, and learner\ncomponents and business components."},"331":{"dur":4,"text":"And all these teams now have to deal\nwith that one single code base."},"336":{"dur":3,"text":"And of course they have their own repos in\naddition to it that are domain specific to"},"340":{"dur":0,"text":"their own teams."},"341":{"dur":3,"text":"But let's, anyway that's one look at this."},"345":{"dur":2,"text":"We'll come back to this in a little while."},"347":{"dur":2,"text":"And that was more of talking about code."},"349":{"dur":4,"text":"Let's look also at usage, and how over\ntime the usage of edx-platform has"},"354":{"dur":2,"text":"grown at least specifically to edx.org."},"357":{"dur":2,"text":"So now where are we?"},"359":{"dur":2,"text":"This is the number of\nenrollments in thousands."},"361":{"dur":5,"text":"So over four million\nenrollments per time period."},"367":{"dur":2,"text":"Steadily increasing over time."},"370":{"dur":2,"text":"And then if you also look at compounded,"},"372":{"dur":2,"text":"how many total enrollments\nwe have to date."},"375":{"dur":5,"text":"We now have over 40 million\nenrollments on edx.org to date."},"380":{"dur":2,"text":"So we need to scale along with this."},"383":{"dur":4,"text":"If you look at data, by data I'm talking\nabout number of courses on edx.org."},"387":{"dur":5,"text":"The red line is talking about, once again,\nthe compounded courses to date."},"392":{"dur":4,"text":"And the blue line, the number of courses\nthat are created at each time stamp,"},"397":{"dur":4,"text":"where we're now over\n4,000 courses on edx.org."},"402":{"dur":3,"text":"So we need to scale and\nedx-platform is evolving this way as well."},"407":{"dur":2,"text":"So that's how we've evolved to date."},"410":{"dur":0,"text":"Where are we now?"},"413":{"dur":2,"text":"Once again,\nour beloved monolith comes back."},"416":{"dur":4,"text":"[LAUGH] And it's there."},"420":{"dur":1,"text":"But what's going on in the inside?"},"422":{"dur":3,"text":"A lot of people, they've probably faced"},"425":{"dur":3,"text":"this as well in their own companies\nwhen they're have a large code base."},"428":{"dur":5,"text":"And there's a lot of tight\ncoupling that exists."},"433":{"dur":4,"text":"And definitely something\nthat we need to deal with."},"438":{"dur":3,"text":"There's a lot of interdependencies\nin the code base."},"442":{"dur":2,"text":"And as a developer when you\nwant to make one change,"},"444":{"dur":3,"text":"whoa now you have to make another change,\nand another change, and"},"447":{"dur":3,"text":"it's just a rippling effect,\ntaking you from one place to another."},"451":{"dur":4,"text":"Or you make a change, but then you don't\nrealize it would actually break something"},"456":{"dur":2,"text":"else, somewhere you didn't even expect to."},"459":{"dur":3,"text":"These are things that we deal\nwith both within edX and"},"462":{"dur":1,"text":"also outside in the community."},"465":{"dur":3,"text":"If you wanna make extensions and\nadd features,"},"468":{"dur":5,"text":"these are things that are continuously\nblocking us at every pathway."},"473":{"dur":4,"text":"It's, we wanna move fast, we kinda, at the\nlearning community, all the requirements,"},"478":{"dur":1,"text":"there's so much that we wanna do."},"479":{"dur":2,"text":"But we are blocked and we're slowed down."},"482":{"dur":2,"text":"By our modelists."},"485":{"dur":1,"text":"It started out simple."},"488":{"dur":4,"text":"Eventually became complex,\nand for good reasons."},"493":{"dur":2,"text":"Complex in a good way, right?"},"495":{"dur":2,"text":"More features, more things that we need."},"497":{"dur":0,"text":"We're working at it."},"498":{"dur":1,"text":"We're doing out best."},"500":{"dur":3,"text":"What we wanna make sure is that\nit does not become chaotic."},"505":{"dur":5,"text":"High energy, unpredictable, these\nare things that are not what we want."},"511":{"dur":2,"text":"So what's a desirable future?"},"514":{"dur":0,"text":"What are we looking at?"},"516":{"dur":2,"text":"Well, let's take a look at\nwhat's gonna make us happy,"},"518":{"dur":5,"text":"[LAUGH] what's gonna make us jump for joy."},"523":{"dur":3,"text":"Well, all the things in orange that I have\nlisted here, this is from the architect"},"527":{"dur":3,"text":"perspective, so don't get boiled\ndown by all the terminology."},"530":{"dur":4,"text":"But essentially, the things I have in\norange here are things that are great for"},"535":{"dur":2,"text":"deployment and for operational support."},"537":{"dur":4,"text":"The things here on blue that I have\nhere are more about scaling with"},"542":{"dur":3,"text":"the thin size and\nscaling with the core base, so"},"545":{"dur":3,"text":"let's take a look closely\non the orange things first."},"551":{"dur":5,"text":"The reactive manifesto, you guys can\nlook up, I strongly encourage it,"},"557":{"dur":4,"text":"it talks about the orange things,\ntalks about being responsive."},"561":{"dur":5,"text":"It talks about, whenever an API is\nbeing requested, or whenever a user is"},"567":{"dur":5,"text":"requesting something, you want\nthe system to respond as fast as it can."},"572":{"dur":2,"text":"And what is the thing that\nyou should be looking at?"},"574":{"dur":3,"text":"Not the average response rate,\nbut the 99.9%."},"578":{"dur":1,"text":"And why?"},"579":{"dur":4,"text":"Because when you're looking at scale,\nthat 1%, it's not 99.9, sorry, 99%."},"584":{"dur":2,"text":"And why?"},"586":{"dur":4,"text":"Because when you're looking at that 1%,\nif you have 10 million learners"},"590":{"dur":3,"text":"in your system,\nthere's 100,000 learners in that 1%."},"594":{"dur":4,"text":"So 99 percentile is what is actually\ncritical to look at, and at edX.org"},"598":{"dur":4,"text":"we strive to make sure that those are all\nwithin less than 2 second response times."},"603":{"dur":2,"text":"Yes, there are times when\nthere might be exceptions,"},"605":{"dur":3,"text":"but that's the rule that\nwe like to embrace."},"608":{"dur":4,"text":"Resiliency, that's 99.9% of uptime."},"613":{"dur":2,"text":"And that's why our DevOps\nteam works really hard and"},"616":{"dur":3,"text":"making sure that our systems\nare always up and available."},"620":{"dur":4,"text":"And if your components are isolated,\nthen if one fails,"},"624":{"dur":3,"text":"the other one doesn't necessarily fail,\nthere's no domino effect."},"628":{"dur":2,"text":"The resilience is what we're aiming for."},"630":{"dur":1,"text":"And elasticity."},"632":{"dur":4,"text":"What I mean by that, well, if you\nwanna horizontally scale your system,"},"636":{"dur":6,"text":"you wanna think about which components in\nyour system can be scaled differently."},"642":{"dur":4,"text":"At edX.org,\nthe LMS has 13,000 requests per minute."},"647":{"dur":6,"text":"But studio,\nit has only 16 requests per minute,"},"653":{"dur":2,"text":"and so you wanna scale them differently."},"656":{"dur":3,"text":"So if you can isolate those components,\nand make sure there are no common"},"660":{"dur":5,"text":"bottlenecks in between,\nthen that's gonna allow you to be elastic."},"667":{"dur":2,"text":"Now, how are we gonna get there?"},"669":{"dur":3,"text":"Well, let's see the reactive\nmanifesto again."},"673":{"dur":5,"text":"What it suggests is something called\nbeing message driven or event driven and"},"678":{"dur":5,"text":"the reactive community is all\naround us and so think about this."},"684":{"dur":4,"text":"If you have a one component,\nanother component, if they're"},"688":{"dur":5,"text":"gonna make a synchronize calls,\na blocking call"},"694":{"dur":4,"text":"then if the other system is down,\nit's going to have a rippling effect."},"699":{"dur":3,"text":"So if you have asynchronous\nnon-blocking calls,"},"702":{"dur":4,"text":"if you just send a message and\nlet the other system know about it, wow,"},"707":{"dur":3,"text":"isn't all of a sudden your\nsystem more resilient?"},"711":{"dur":3,"text":"Isn't it going to allow you there for\nbecome more responsive?"},"715":{"dur":3,"text":"And elasticity,\nbecause there's now a lot more decoupling."},"718":{"dur":2,"text":"So that's what we wanna strive for."},"722":{"dur":3,"text":"So now let me ask you guys,\npop quiz, assessment!"},"726":{"dur":1,"text":"Everyone, wake up!"},"727":{"dur":3,"text":"[LAUGH] If you have\nan asynchronous system,"},"730":{"dur":5,"text":"is that going to be like an orchestra,\nwhere you have a conductor, that says,"},"736":{"dur":5,"text":"violins, cellos, trumpets,\nand coordinates that way?"},"741":{"dur":3,"text":"Or is it going to be\nmore like a choreography,"},"744":{"dur":5,"text":"where each entity in the system\nknows their part, and"},"750":{"dur":4,"text":"then based on the change in event,\nharmoniously they work together."},"756":{"dur":0,"text":"Choreography?"},"758":{"dur":2,"text":"Yes, awesome, great job, let's move on."},"761":{"dur":5,"text":"[LAUGH] So there's a lot of resources\nout there which talk about these things,"},"766":{"dur":4,"text":"about supporting large-scale\ndistributed systems."},"770":{"dur":3,"text":"And you can refer to them later and\nstrongly encourage it."},"774":{"dur":4,"text":"But the main takeaways are these\nasynchronous non-blocking calls."},"779":{"dur":2,"text":"The other one is separating\nyour reads from your writes."},"781":{"dur":4,"text":"Now, don't worry about terminology."},"785":{"dur":2,"text":"Command query responsibility,\nseparation, but"},"788":{"dur":2,"text":"essentially separating your\nreads from your writes."},"790":{"dur":3,"text":"And what we're talking about\nthere is once again, LMS."},"793":{"dur":1,"text":"So many requests per minute."},"795":{"dur":1,"text":"That's where the constant\nreads are happening."},"797":{"dur":1,"text":"That's where your learners are."},"799":{"dur":2,"text":"And in studio,\nyou have the course authors, and"},"801":{"dur":3,"text":"that's where they're actually changing\nthe course content and whatever."},"805":{"dur":6,"text":"But if you keep them separate, once again,\nthat's where elasticity comes in."},"811":{"dur":6,"text":"So that's one of the big\nadvantages of CQRS."},"819":{"dur":3,"text":"And we'll give you examples of\nhow we're actually using that."},"822":{"dur":3,"text":"Now, bounded context,\nmodularity and extensibilty."},"826":{"dur":5,"text":"Bounded context, let me give\nyou a concrete example of that."},"831":{"dur":4,"text":"So if you had a bunch of\nthese materials at your home,"},"836":{"dur":2,"text":"what's one way of organizing this?"},"841":{"dur":4,"text":"So let's say you decide to organize\nthem by their technical concerns."},"845":{"dur":5,"text":"By the materials that they're made of,\nsteel, silver, plastic, wood, etc."},"851":{"dur":3,"text":"Now, are you gonna be able to find\nthese things at your house or"},"854":{"dur":4,"text":"does it actually make sense to instead\nseparate them by their business concerns?"},"859":{"dur":3,"text":"Kitchenware, hardware, currency and so\nforth, I have withdrawal of my money and"},"862":{"dur":1,"text":"I have this and that, whatever."},"863":{"dur":4,"text":"Now, that is actually a lot more logical\nof course and with bounded context,"},"868":{"dur":2,"text":"it allows you to think that way and\nthere's this"},"871":{"dur":4,"text":"thing called domain driven design by Eric\nEvans and he talks a little bit about how"},"876":{"dur":4,"text":"you work with your product and\nyour X team to think along these lines."},"880":{"dur":1,"text":"Now, unfortunately,"},"881":{"dur":4,"text":"edX platform is currently organized\nby their technical concerns."},"888":{"dur":3,"text":"There's a saying that if you regret\nthe decisions that you made,"},"891":{"dur":2,"text":"that means you're successful."},"893":{"dur":1,"text":"And well, we're successful."},"895":{"dur":5,"text":"[LAUGH] So yes,\nwe decided to organize our code base by,"},"900":{"dur":6,"text":"what depends on Django versus,\nwhere are templates located and so forth."},"907":{"dur":4,"text":"But now come with me,\nwhat could the future look like?"},"911":{"dur":2,"text":"If the future instead\nlooks something like this,"},"914":{"dur":3,"text":"more aligned to also what our\norganizational structure is going to be."},"919":{"dur":2,"text":"So it's a lot more clear."},"921":{"dur":3,"text":"You have groups and users and\nprogress and so forth."},"924":{"dur":2,"text":"It's going to make on boarding easier for"},"926":{"dur":3,"text":"our own developers as well as\nthe open source community."},"929":{"dur":5,"text":"And not only that,\nit will allow us to think"},"934":{"dur":6,"text":"about what's called\nintegration at the UI layer."},"940":{"dur":4,"text":"So for instance, we don't have to have LMS\nand studio as first class components per"},"945":{"dur":4,"text":"se, but elements can choose which\nof the views that it needs from or"},"950":{"dur":1,"text":"progress, or so forth."},"951":{"dur":2,"text":"And studio can choose it, as well."},"954":{"dur":4,"text":"And it'll also allow us to When\nwe want to, if for instance,"},"958":{"dur":4,"text":"progress is its own component,\nif we then it's isolated and"},"962":{"dur":4,"text":"it's modularized, we can actually\nthen pull it out of the repo and"},"967":{"dur":3,"text":"make its own first class repo as well."},"970":{"dur":4,"text":"So this is a direction that will allow\nus to get where we want to in terms of"},"975":{"dur":1,"text":"taming our monolith."},"977":{"dur":3,"text":"And these are conversations that we're\nhaving within edX that I wanted to share"},"980":{"dur":1,"text":"with you guys."},"982":{"dur":1,"text":"So what are some examples?"},"983":{"dur":8,"text":"I want some recent examples of how we're\nactually achieving these principles."},"993":{"dur":2,"text":"There's a bunch of things that\nwe've worked on recently."},"995":{"dur":4,"text":"The two that I wanna talk about today\nare block transformers and grades."},"1001":{"dur":3,"text":"You guys may not have heard of block\ntransformers so let me just give a quick"},"1005":{"dur":5,"text":"run down but\nessentially block transformers is so"},"1010":{"dur":6,"text":"our course structure right is a recursive\nhierarchical composition of x blocks"},"1016":{"dur":5,"text":"as a lot of you may know and\nthose can become very big."},"1022":{"dur":6,"text":"MIT has a course where there's\n4,332 blocks all in one course and"},"1029":{"dur":4,"text":"it's you know it varies course by course\nhow many blocks they've chosen to have."},"1034":{"dur":3,"text":"But as you can see if you are scaling\nyou have 4,000 courses and"},"1037":{"dur":3,"text":"some of them with their own 4,000\nblocks within the course and so forth."},"1041":{"dur":4,"text":"It is something that we want to\nmake sure when a learner asks for"},"1046":{"dur":3,"text":"a particular course we can\nreturn it to them quickly."},"1049":{"dur":2,"text":"Well once again let's think\nabout what we talked about,"},"1052":{"dur":1,"text":"separating leads from rights."},"1055":{"dur":8,"text":"So block transformers is a mechanism by\nwhich we have separated these phases."},"1063":{"dur":3,"text":"We call it the collect phase and\nthe read phase."},"1067":{"dur":3,"text":"Let the collect phase do all\nthe expensive operations."},"1070":{"dur":5,"text":"Let it do the tree traversals and let it\ndo all the instantiation of xBlocks, and"},"1075":{"dur":5,"text":"getting it out from Mongo, and do all the\nlogic with inheritance, field inheritance,"},"1081":{"dur":4,"text":"and all the things that are, actually,\ncurrently costly in xBlocks."},"1086":{"dur":3,"text":"And let's also denormalize the data,"},"1089":{"dur":5,"text":"meaning if you have fields that\nare up in the hierarchy, right?"},"1095":{"dur":4,"text":"Let's denormalize it so that if I only\nneed a particular field from a lower part"},"1099":{"dur":3,"text":"in the hierarchy can just go and\naccess it, I don't need to go and"},"1102":{"dur":3,"text":"do all the traversal at\nthe time of reading it."},"1105":{"dur":3,"text":"So that's what the Collect phase and\nseparating the Collect phase and"},"1109":{"dur":1,"text":"Read phase allows us to do."},"1111":{"dur":1,"text":"And the Read phase,"},"1112":{"dur":4,"text":"well all of that heavy duty lifting has\nalready been done in the Collect phase."},"1116":{"dur":2,"text":"So just go ahead and access that data."},"1118":{"dur":1,"text":"There might be user specific and"},"1120":{"dur":3,"text":"API specific transformations\nthat we need to do."},"1123":{"dur":1,"text":"Well we can do that in the Read phase."},"1126":{"dur":3,"text":"And that under Read phase is\ngoing to be synchronous right?"},"1130":{"dur":3,"text":"Because we're responding to an API\nrequest for a user response."},"1133":{"dur":1,"text":"But the Collect phase,"},"1135":{"dur":4,"text":"that can happen asynchronously whenever\na course team changes the course."},"1139":{"dur":4,"text":"Well then let's send an event\nlet our choreography happen and"},"1143":{"dur":3,"text":"let the block transformers do their job."},"1147":{"dur":2,"text":"So here's another view\nof this information."},"1150":{"dur":5,"text":"So during the Collect phase, we have\nthe block transform of the hierarchy,"},"1156":{"dur":2,"text":"and it's a registry of transformers."},"1159":{"dur":1,"text":"It's extensible."},"1160":{"dur":3,"text":"So, people can go ahead and register\nwhatever the transformers they want, and"},"1164":{"dur":4,"text":"automatically the system will run those\ntransformers for you, and convert"},"1168":{"dur":3,"text":"that tree, and add more data, whatever\nit needs to do in the Collect phase."},"1173":{"dur":3,"text":"And then in the Read phase\na user is making a request."},"1177":{"dur":2,"text":"So, we take whatever data was collected,\nand"},"1179":{"dur":4,"text":"then we go ahead and transform it for\nthat particular user."},"1184":{"dur":2,"text":"If that user does not have\naccess to a particular sub tree,"},"1186":{"dur":2,"text":"well just eliminate it, and move on."},"1189":{"dur":4,"text":"So, that's how access control can be\nalso implemented in a scalable and"},"1194":{"dur":1,"text":"in a extensible manner."},"1195":{"dur":5,"text":"Here's another example of what\nI mean about denormalization."},"1201":{"dur":4,"text":"So let's take the start date transformer\nthat's implemented in our platform."},"1205":{"dur":3,"text":"So in a start date transformer,\nwhat it's doing is, it needs"},"1209":{"dur":4,"text":"to provide access control based on when\nyou actually get access to the block."},"1214":{"dur":4,"text":"So if the top of the course says\nthis course doesn't start until May."},"1218":{"dur":4,"text":"But then there might be other blocks later\nin the hierarchy that say, actually for"},"1222":{"dur":2,"text":"this one,\nit's okay if it starts it in April."},"1225":{"dur":1,"text":"And the other one, no."},"1226":{"dur":4,"text":"Actually don't even let it be\navailable until August and so forth."},"1230":{"dur":2,"text":"So let's take a look at\nthe bottom two here."},"1233":{"dur":5,"text":"What happens is that then when the\ntransformer is run on the Collect Phase"},"1238":{"dur":2,"text":"it actually denormalizes all of this."},"1240":{"dur":3,"text":"And it takes it actually takes a maximum"},"1244":{"dur":3,"text":"of all the dates from its ancestors and\nthen it computes."},"1248":{"dur":5,"text":"So for here even though the descendants\nsaid it didn't start till March"},"1253":{"dur":4,"text":"actually the ancestors said May and\nso that actually stores it as May."},"1257":{"dur":2,"text":"So then when I read and\nI wanna figure out,"},"1260":{"dur":2,"text":"does a user have access\nto a particular block?"},"1262":{"dur":1,"text":"I don't need to do all\nthat traversal right."},"1264":{"dur":2,"text":"I just go ahead and\nget what collected data was there."},"1268":{"dur":1,"text":"Now don't worry about this but"},"1269":{"dur":4,"text":"basically we also support dags, so\ndifferent nodes can have multiple parents."},"1274":{"dur":6,"text":"And so anyway, I can tell you guys more\nabout that but awesome stuff, right?"},"1280":{"dur":4,"text":"[LAUGH] So another example I\nwanna share with you guys is"},"1285":{"dur":2,"text":"the work that we did with grades."},"1288":{"dur":3,"text":"And for grades, thanks, so for grades,"},"1292":{"dur":4,"text":"the main takeaway I want you\nguys to get out of this is our"},"1297":{"dur":4,"text":"extensive use of asynchronous processing."},"1301":{"dur":2,"text":"And we're doing that with grades,"},"1303":{"dur":5,"text":"up till now edX platform didn't\nactually store a user's grade."},"1309":{"dur":3,"text":"But that didn't allow us to do all\nthe things that we wanted to do in"},"1313":{"dur":3,"text":"terms of showing progress quickly and\nthings like that and"},"1316":{"dur":3,"text":"grade reports are taking very\nlong to run and so forth."},"1319":{"dur":4,"text":"Well we heard that issue, and now we're\ndefinitely addressing it, and what"},"1324":{"dur":5,"text":"we're doing is whenever a learner submits\na problem we want to update their grade."},"1329":{"dur":4,"text":"Now once again responsiveness is\nsuch an important criteria for us."},"1333":{"dur":4,"text":"We don't want to take the time\nto recompute the grade"},"1338":{"dur":3,"text":"before responding to the user,\nso what do we do?"},"1341":{"dur":1,"text":"Fire a task and"},"1343":{"dur":4,"text":"let the grade's asynchronous task do\nits choreography job and whatever."},"1347":{"dur":2,"text":"And compute it asynchronously."},"1349":{"dur":5,"text":"One other advantage of that is that\nif computing that grade failed,"},"1355":{"dur":1,"text":"well it's a separate task."},"1356":{"dur":0,"text":"Let it retry."},"1358":{"dur":3,"text":"What if it keeps failing because\nthere's a bug in our code?"},"1362":{"dur":5,"text":"Well let's store that in a separate queue,\nin a failed queue so"},"1368":{"dur":4,"text":"that when we actually fix the bug\nwe can retry at that time."},"1373":{"dur":2,"text":"So that resiliency is there right?"},"1375":{"dur":4,"text":"And so we're able to, we've implemented\nall of this in edX and we've"},"1379":{"dur":4,"text":"experimented with it and it's working now\nand we're trying to and we're scaling it."},"1384":{"dur":5,"text":"So it's just rethinking about how things\ncan be done in a message driven and"},"1389":{"dur":5,"text":"asynchronous manner, allows us to think\nabout how the code base can work."},"1396":{"dur":3,"text":"And then we're also separating\nour reads from our rights."},"1399":{"dur":1,"text":"So this is LMS."},"1401":{"dur":2,"text":"Where there's a string processing queue."},"1403":{"dur":5,"text":"Continuously processing grades and\nupdating grades as learners make changes."},"1409":{"dur":5,"text":"But then we could have a separate queue\nthat can be done in a batch processing"},"1415":{"dur":4,"text":"meaning it doesn't happen as often\nthat course teams change courses and"},"1419":{"dur":3,"text":"that could affect the grading policy."},"1422":{"dur":3,"text":"By keeping those things\nseparate allows our dev ops and"},"1425":{"dur":3,"text":"operationally we can\nscale them differently."},"1429":{"dur":3,"text":"So you can see there's a lot\ngoing on here in action,"},"1432":{"dur":4,"text":"you have asynchronous message passing."},"1437":{"dur":2,"text":"You see the resiliency in effect."},"1439":{"dur":4,"text":"You see how scalability and\nelasticity can happen."},"1443":{"dur":2,"text":"And Finally, in terms of bounded context,"},"1446":{"dur":4,"text":"we've done a similar thing where with\ngrades we've taken it out as a separate."},"1451":{"dur":2,"text":"Within the model, it's still however but"},"1453":{"dur":4,"text":"it's now its own first class\ncitizen within the monolith."},"1459":{"dur":4,"text":"The other thing I wanna talk to you\nabout is all of these things that"},"1464":{"dur":4,"text":"we're discovering, all of the things\nthat we're learning about,"},"1468":{"dur":2,"text":"we wanna share that with others,"},"1471":{"dur":5,"text":"with the community as well as include the\ncommunity in some of these best practices."},"1477":{"dur":4,"text":"Of course, we have OEPs, you guys must\nhave heard of, there is going to be PRs"},"1481":{"dur":4,"text":"within our documentation folders,\nand of course there's always slack."},"1486":{"dur":4,"text":"The next thing that we're gonna\ntouch upon are thinking about tests."},"1492":{"dur":4,"text":"Now, if you have a code base that's been\naround for this many years, and as you can"},"1496":{"dur":4,"text":"see the edX platform code based has aged\na little bit very quickly because, well,"},"1501":{"dur":5,"text":"we're just working on awesome stuff,\nthen the texts themselves have also"},"1506":{"dur":2,"text":"not really evolved in the way\nthat we would perhaps like."},"1509":{"dur":1,"text":"There are way too many unit tests,"},"1510":{"dur":3,"text":"integration tests and\nacceptance tests and end to end tests."},"1513":{"dur":3,"text":"So what exactly are we gonna do with\nthe test, what are the best practices."},"1517":{"dur":1,"text":"So we need to address that."},"1518":{"dur":3,"text":"We have our working group\nthat's talking about this."},"1521":{"dur":2,"text":"And we'll talk about it,\nwe're going to document this."},"1524":{"dur":5,"text":"And if you have any input on this,\ndefinitely, join us in that discussion."},"1529":{"dur":4,"text":"Once that best practice is in place,\nwe can then actually start using them."},"1533":{"dur":3,"text":"Code structure, we talked about a little\nbit in terms of bounded context."},"1536":{"dur":4,"text":"We wanna codify this in terms of\nputting an NA document in the repo so"},"1541":{"dur":1,"text":"everyone's on the same page."},"1542":{"dur":1,"text":"And finally, extensibility."},"1545":{"dur":1,"text":"Let's talk about this in further."},"1547":{"dur":2,"text":"I wanna get a lot more input\nfrom the community on this."},"1550":{"dur":1,"text":"So what are your biggest pinpoints?"},"1551":{"dur":2,"text":"What are you thinking about\nin terms of extensibility?"},"1554":{"dur":4,"text":"The thoughts that we have currently\nare for instance xBlocks,"},"1559":{"dur":3,"text":"to delete, how to be django independent."},"1562":{"dur":4,"text":"That means if you could have a xBlock\nthat can run in any runtime whether or"},"1567":{"dur":2,"text":"not it was django or not."},"1569":{"dur":4,"text":"But we've learned from your feedback\nas well as ourselves that actually"},"1574":{"dur":3,"text":"that's not a requirement that's necessary,\nand therefore let xBlocks use Django."},"1578":{"dur":3,"text":"Let xBlocks be their first class,\ntheir own bounded context."},"1581":{"dur":3,"text":"Be isolated,\ndon't be dependent on the edX platform."},"1585":{"dur":3,"text":"If you need something then don't\nnecessarily require that the platform's"},"1588":{"dur":1,"text":"runtime get updated."},"1590":{"dur":4,"text":"And so, let xBlocks depend on Django is"},"1594":{"dur":2,"text":"a best practice that we\nwant to then put out there."},"1596":{"dur":3,"text":"If you need your own way of doing\nsettings, if you need to be able to"},"1600":{"dur":4,"text":"integrate with your own internalization\nthing, whatever it is, there's"},"1605":{"dur":4,"text":"a lot that you can do by thinking about\nxBlocks at its own independent thing."},"1609":{"dur":3,"text":"So that's one, let's practice."},"1612":{"dur":5,"text":"Pluggable frameworks, we are already using\nthat within edX platform, but basically"},"1617":{"dur":5,"text":"how you could have a registry of libraries\nwithout name to update the platform."},"1622":{"dur":2,"text":"LTI and single sign on, and web hooks."},"1624":{"dur":4,"text":"So these are all examples that\nI loved to talk with you, guys."},"1629":{"dur":4,"text":"Finally, if you guys have any questions,\nI'll be happy, how much time do I have?"},"1633":{"dur":0,"text":"Five minutes?"},"1634":{"dur":3,"text":"Great, so I'm happy to take questions now,\nand thank you so much for listening."},"1638":{"dur":0,"text":"[LAUGH]"},"1639":{"dur":10,"text":">> [APPLAUSE]"},"1649":{"dur":1,"text":">> Yes."},"1650":{"dur":3,"text":">> The timeline for this,\nhow long has this been going on and"},"1653":{"dur":1,"text":"then what's the future?"},"1656":{"dur":5,"text":">> Yes, so since December of 2011,\n[LAUGH] things have continued to evolve."},"1662":{"dur":3,"text":"Over time, of course,\nwe've always made changes."},"1665":{"dur":3,"text":"So in terms of the asynchronous and"},"1668":{"dur":5,"text":"the message driven things,\nwe have extensively built libraries and"},"1674":{"dur":4,"text":"utilities for this, and so\nsince we started on the grades project,"},"1678":{"dur":4,"text":"that has happened, so\nthat was the end of last summer until now."},"1683":{"dur":2,"text":"In terms of the bounded context and\ndiscussions on that,"},"1686":{"dur":3,"text":"we have a working group right now talking\nabout the taming of the monolith."},"1690":{"dur":3,"text":"And like I said, we're at a point right\nnow where we're talking about best"},"1693":{"dur":4,"text":"practices, we're all aligned together\nin terms of yes, we want to do this."},"1698":{"dur":2,"text":"And so now we're taking it from there."},"1701":{"dur":3,"text":"And that's why, and\nwelcome everyone to communicate."},"1705":{"dur":4,"text":"Our discussions,\nour meeting notes are all out on our Wiki,"},"1709":{"dur":2,"text":"which are all publicly available."},"1712":{"dur":5,"text":"And then, other things like accessibility,\nthat's something where yes,"},"1717":{"dur":5,"text":"we have some rest API, of course we have\nxBlocks as a way of doing extensibility,"},"1723":{"dur":4,"text":"but I think what we're hearing from\nthe community in terms of their"},"1728":{"dur":3,"text":"requirements for\nJavaScript or other things,"},"1731":{"dur":5,"text":"we're at a point where I would say\nthat we're more in a discovery phase."},"1736":{"dur":1,"text":"Any other questions?"},"1737":{"dur":1,"text":"Yes."},"1739":{"dur":1,"text":">> Hello, thank you."},"1741":{"dur":4,"text":"I know I'm pretty used to the submitted\nsystem breaking and nobody can break it"},"1745":{"dur":3,"text":"around the queue when it's rigid and\ndoesn't want to forget stuff."},"1749":{"dur":5,"text":"If you make the resilience choice,\nwhen your system will break, it will"},"1754":{"dur":5,"text":"break relatively with a meaning that\nit will come as if there is no problem,"},"1760":{"dur":5,"text":"then something will come of\nthe 1% if you're sorting break."},"1765":{"dur":5,"text":"Do you really want to make\na rigid queue for the messages?"},"1770":{"dur":4,"text":">> Yes, so that's definitely\nsomething that we have experienced."},"1775":{"dur":3,"text":"And so that's how we've addressed\nit by having a fail queue."},"1778":{"dur":4,"text":"So if you have an asynchronous queue,\nwhich is receiving all these messages,"},"1783":{"dur":6,"text":"then if there's any failure in the system,\nit automatically retries."},"1789":{"dur":3,"text":"And like I said, even if automatically\nretrying doesn't address the problem"},"1793":{"dur":4,"text":"because there's actually a bug in\nthe system or some other external issue"},"1797":{"dur":4,"text":"then it allows us to queue it until\nlater for relative processing."},"1802":{"dur":2,"text":"And we've created automatic\nmanagement commands and"},"1805":{"dur":2,"text":"things like that to be able\nto address those issues."},"1810":{"dur":0,"text":"Yes, Regis."},"1817":{"dur":2,"text":">> Thanks, thanks for talking,"},"1819":{"dur":3,"text":"I'm a big fan of the decoupling of\nthe modules, decoupling of the xBlock and"},"1823":{"dur":3,"text":"Django much less anyway, so-\n>> Let's talk about it."},"1827":{"dur":2,"text":">> Yeah, we'll talk about it later."},"1830":{"dur":5,"text":"So my question is about decoupling of\nthe modules, where are you going to start?"},"1835":{"dur":1,"text":"How are you going to do it and"},"1838":{"dur":4,"text":"do you consider that the community\ncan help at doing this?"},"1843":{"dur":3,"text":">> Thank you for asking that question."},"1846":{"dur":6,"text":"And so our current thoughts are to\nattack it from breathe first."},"1853":{"dur":4,"text":"So that if you're in a city, or\nyou guys know the analogy, right?"},"1858":{"dur":1,"text":"Broken windows, and"},"1859":{"dur":3,"text":"as long as you have broken windows\nthere's gonna be more broken windows."},"1862":{"dur":3,"text":"If you fix one, and someone sees it,\nthere's gonna be more."},"1865":{"dur":2,"text":"So our strategy is actually\nto attack it breathe first."},"1868":{"dur":4,"text":"We wanna first actually at the top level\norganize the monolith in a way that is"},"1872":{"dur":3,"text":"actually, in terms of\nwhat I showed earlier,"},"1875":{"dur":2,"text":"in terms of at least what\nthe bounded context are."},"1878":{"dur":3,"text":"Within it so\nbasically the big ball of mud,"},"1881":{"dur":3,"text":"let's make [LAUGH] chunks of smaller muds."},"1884":{"dur":4,"text":"And then once you do that, it it should\ngive a little bit more welcoming, and"},"1889":{"dur":4,"text":"then over time, we tackle the small\nmuds if necessary, we don't need to."},"1894":{"dur":1,"text":"Like if you have a pile of mud but"},"1895":{"dur":4,"text":"it's a component that is never touched or\nused, then let it just be."},"1900":{"dur":1,"text":"Embrace it and move on."},"1901":{"dur":2,"text":"Let's move fast and\nlet's create more features."},"1904":{"dur":2,"text":"So we're not here to deep clean."},"1906":{"dur":5,"text":"We're here to just sorta really do what\nis necessary so we can work faster and"},"1912":{"dur":4,"text":"the community can understand the system,\nand so forth."},"1916":{"dur":1,"text":"Did that answer your question?"},"1917":{"dur":1,"text":"You had another part."},"1919":{"dur":5,"text":">> [INAUDIBLE] How many\nversions it will take?"},"1924":{"dur":1,"text":"How many versions will it take on the?"},"1925":{"dur":1,"text":">> [INAUDIBLE] about the community, sorry."},"1927":{"dur":2,"text":">> I was hoping you would\ngive me a specific name for"},"1929":{"dur":2,"text":"a module that you'd send to."},"1932":{"dur":5,"text":">> Well, so grades, so grades is\none example that we did this with."},"1937":{"dur":4,"text":"And Andy's team actually worked on\nthe course outline, recently, and"},"1942":{"dur":4,"text":"that also, they, basically,\nmoved that into a separate module."},"1947":{"dur":3,"text":"We're not talking about moving\noutside of the repo at this time,"},"1950":{"dur":1,"text":"but it's within the repo."},"1951":{"dur":5,"text":"Now, our platform team also is working\non looking at the module store,"},"1957":{"dur":5,"text":"and it's interesting because we actually\nexperimented with this, just take that"},"1962":{"dur":5,"text":"module sorta out of that repo but\nwe've run into a lot and so forth."},"1968":{"dur":4,"text":"It actually acknowledged and validity\nour approach which is, just taking"},"1973":{"dur":4,"text":"things out is going to take a really\nlong time and it may not be worth it."},"1977":{"dur":2,"text":"So right now what we're doing is\nwe're just gonna leave it there."},"1979":{"dur":2,"text":"But make it isolated,"},"1982":{"dur":5,"text":"fix all the circular dependencies whatever\nare in there but within the same repo."},"1987":{"dur":2,"text":"So that's approach that\nwe're currently taking."},"1990":{"dur":3,"text":"And then after that,\nmaybe we'll see about removing it out."},"1993":{"dur":4,"text":"So those three are great examples of\nrecent changes that we've been doing for"},"1998":{"dur":1,"text":"the last six months."},"2000":{"dur":4,"text":"And then, in terms of how can\nthe open source community help,"},"2004":{"dur":5,"text":"I think if you are considering a PR and\nmaking functionality change,"},"2010":{"dur":4,"text":"a feature change, if it's within the repo,\nif it's something"},"2015":{"dur":5,"text":"that once these best practices\nare written, how should tests be?"},"2020":{"dur":1,"text":"How should the co-structure be?"},"2021":{"dur":2,"text":"If you then, consider, hey,"},"2024":{"dur":5,"text":"let's do it the way that it should be now,\nthat we're wiser, that would be awesome."},"2029":{"dur":4,"text":"So basically, let's do this as\na community, that's what would I say and"},"2033":{"dur":3,"text":"then in terms of extensibility and\nall new repos are created,"},"2037":{"dur":5,"text":"new xBlocks that are created, if they\nfollow this concept, that would be great."},"2045":{"dur":1,"text":"Any other questions?"},"2046":{"dur":0,"text":"Okay, we're out of time anyways."},"2047":{"dur":0,"text":"So okay."},"2048":{"dur":1,"text":"Sounds good.\nThanks, everybody."},"2049":{"dur":0,"text":"Thank you very much."},"2050":{"dur":4,"text":">> [APPLAUSE]"}}